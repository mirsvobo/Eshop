2025-04-14T00:07:56.857+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Starting EshopApplication using Java 21.0.6 with PID 24756 (C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop\target\classes started by mirsv in C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop)
2025-04-14T00:07:56.865+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Running with Spring Boot v3.4.4, Spring v6.2.5
2025-04-14T00:07:56.869+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : No active profile set, falling back to 1 default profile: "default"
2025-04-14T00:07:57.690+02:00  INFO 24756 --- [Eshop] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-14T00:07:57.690+02:00  INFO 24756 --- [Eshop] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-14T00:08:07.089+02:00  INFO 24756 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-14T00:08:07.565+02:00  INFO 24756 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 432 ms. Found 14 JPA repository interfaces.
2025-04-14T00:08:10.075+02:00  INFO 24756 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-04-14T00:08:10.108+02:00  INFO 24756 --- [Eshop] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-04-14T00:08:10.112+02:00  INFO 24756 --- [Eshop] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-04-14T00:08:10.270+02:00  INFO 24756 --- [Eshop] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-04-14T00:08:10.270+02:00  INFO 24756 --- [Eshop] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 12578 ms
2025-04-14T00:08:11.352+02:00  INFO 24756 --- [Eshop] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-14T00:08:11.507+02:00  INFO 24756 --- [Eshop] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-04-14T00:08:11.605+02:00  INFO 24756 --- [Eshop] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-14T00:08:12.290+02:00  INFO 24756 --- [Eshop] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-14T00:08:12.375+02:00  INFO 24756 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-14T00:08:12.581+02:00  INFO 24756 --- [Eshop] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.mariadb.jdbc.Connection@671eb72d
2025-04-14T00:08:12.585+02:00  INFO 24756 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-14T00:08:12.731+02:00  INFO 24756 --- [Eshop] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 11.7.2
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-04-14T00:08:15.885+02:00  INFO 24756 --- [Eshop] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-14T00:08:18.897+02:00  INFO 24756 --- [Eshop] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T00:08:19.849+02:00  INFO 24756 --- [Eshop] [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-14T00:08:20.350+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Initializing Google Maps API context...
2025-04-14T00:08:20.612+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Google Maps API context initialized successfully.
2025-04-14T00:08:20.612+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Origin coordinates set to: 50.03500389,15.49180022
2025-04-14T00:08:20.631+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Initializing order code counter...
2025-04-14T00:08:20.838+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : No existing numeric-like order codes found in database.
2025-04-14T00:08:20.839+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Order code counter initialized to: 205
2025-04-14T00:08:21.402+02:00  WARN 24756 --- [Eshop] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-14T00:08:22.106+02:00  INFO 24756 --- [Eshop] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-04-14T00:08:22.267+02:00  INFO 24756 --- [Eshop] [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-04-14T00:08:23.045+02:00  INFO 24756 --- [Eshop] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-04-14T00:08:24.841+02:00  INFO 24756 --- [Eshop] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-04-14T00:08:25.271+02:00  INFO 24756 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-04-14T00:08:25.345+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Started EshopApplication in 30.607 seconds (process running for 32.841)
2025-04-14T00:08:25.425+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Initializing test data...
2025-04-14T00:08:26.803+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Tax Rates...
2025-04-14T00:08:26.979+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Order States...
2025-04-14T00:08:27.045+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Email Template Configs...
2025-04-14T00:08:27.335+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik
2025-04-14T00:08:27.346+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik Plus
2025-04-14T00:08:27.356+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Simple
2025-04-14T00:08:27.461+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Box
2025-04-14T00:08:27.475+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Ořech
2025-04-14T00:08:27.485+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Palisandr
2025-04-14T00:08:27.493+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Bezbarvý lak
2025-04-14T00:08:27.501+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Šedá lazura
2025-04-14T00:08:27.511+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Antracit
2025-04-14T00:08:27.522+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak
2025-04-14T00:08:27.529+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak Premium
2025-04-14T00:08:27.735+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Antracit
2025-04-14T00:08:27.750+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Červená
2025-04-14T00:08:27.762+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Zelená
2025-04-14T00:08:27.772+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná
2025-04-14T00:08:27.786+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná metalická
2025-04-14T00:08:27.805+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Polička navíc
2025-04-14T00:08:27.820+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Držák na nářadí
2025-04-14T00:08:27.830+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Starý doplněk
2025-04-14T00:08:27.866+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Klasik
2025-04-14T00:08:28.041+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Modern
2025-04-14T00:08:28.066+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník na míru
2025-04-14T00:08:28.077+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating new configurator for product ID: 3
2025-04-14T00:08:28.077+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Updating existing configurator for product ID: 3
2025-04-14T00:08:29.125+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating admin user: admin@example.com
2025-04-14T00:08:29.162+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating test orders...
2025-04-14T00:08:29.163+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T00:08:29.166+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T00:08:29.167+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T00:08:29.217+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T00:08:29.219+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T00:08:29.220+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T00:08:29.221+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T00:08:29.221+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T00:08:29.222+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T00:08:29.222+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 1
2025-04-14T00:08:29.223+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 1
2025-04-14T00:08:29.238+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T00:08:29.239+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 1)
2025-04-14T00:08:29.240+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Klasik | Lazura: Ořech | Střecha: Antracit
2025-04-14T00:08:29.241+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 5990.00
2025-04-14T00:08:29.277+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 5990.00
2025-04-14T00:08:29.279+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T00:08:29.279+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 5990.00
2025-04-14T00:08:29.279+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 1257.90
2025-04-14T00:08:29.279+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 7247.90
2025-04-14T00:08:29.291+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=5990.00, TotalTaxAmount=1257.90, TotalPriceWithTax=7247.90
2025-04-14T00:08:29.297+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=5990.00, TaxAmount=1257.90
2025-04-14T00:08:29.299+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 5990.00, Running Item Tax: 1257.90
2025-04-14T00:08:29.300+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 5990.00, Final Item Tax: 1257.90
2025-04-14T00:08:29.300+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T00:08:29.301+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T00:08:29.302+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T00:08:29.303+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=6490.00, TotalTax=1362.90, OriginalTotalWithTax=7852.90, RoundedTotalToSave=7852
2025-04-14T00:08:29.304+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T00:08:29.308+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T00:08:29.308+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T00:08:29.312+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T00:08:29.315+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T00:08:29.317+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 206
2025-04-14T00:08:29.320+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 206
2025-04-14T00:08:29.320+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T00:08:29.384+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 206 created successfully. Total: 7852 CZK
2025-04-14T00:08:29.385+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 206...
2025-04-14T00:08:29.393+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 206 (Total: 7852 CZK)
2025-04-14T00:08:29.394+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in EUR
2025-04-14T00:08:29.395+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: EUR
2025-04-14T00:08:29.395+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: EUR
2025-04-14T00:08:29.407+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: EUR
2025-04-14T00:08:29.408+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T00:08:29.408+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T00:08:29.409+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T00:08:29.410+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T00:08:29.410+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: EUR
2025-04-14T00:08:29.410+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 3
2025-04-14T00:08:29.410+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 3
2025-04-14T00:08:29.412+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T00:08:29.412+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 3)
2025-04-14T00:08:29.413+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Na míru|Rozměry (DxHxV): 350x120x210 cm|Příčka: Ano
2025-04-14T00:08:29.423+02:00  INFO 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: EUR
2025-04-14T00:08:29.424+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (EUR): 1623.60
2025-04-14T00:08:29.426+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (EUR): 0.00
2025-04-14T00:08:29.426+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for divider (EUR): 62.40
2025-04-14T00:08:29.426+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (EUR, fixed): 0.00
2025-04-14T00:08:29.428+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (EUR, fixed): 0.00
2025-04-14T00:08:29.429+02:00  INFO 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: EUR. Vypočtená cena: 1686.00
2025-04-14T00:08:29.430+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 1686.00
2025-04-14T00:08:29.458+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 1686.00
2025-04-14T00:08:29.461+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing addons for OrderItem (Product ID: 3), Currency: EUR
2025-04-14T00:08:29.467+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Requested addon IDs: [1, 2]
2025-04-14T00:08:29.510+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Found addons from DB: [1, 2]
2025-04-14T00:08:29.512+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Allowed addon IDs for this product: [1, 2]
2025-04-14T00:08:29.513+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=1, Name=Polička navíc
2025-04-14T00:08:29.513+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (EUR): 15.00
2025-04-14T00:08:29.515+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (EUR): 30.00
2025-04-14T00:08:29.515+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=2, Name=Držák na nářadí
2025-04-14T00:08:29.515+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (EUR): 20.00
2025-04-14T00:08:29.516+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (EUR): 20.00
2025-04-14T00:08:29.516+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished processing addons. Total addon price (EUR): 50.00
2025-04-14T00:08:29.516+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 50.00
2025-04-14T00:08:29.516+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 1736.00
2025-04-14T00:08:29.517+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 364.56
2025-04-14T00:08:29.517+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 2100.56
2025-04-14T00:08:29.518+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=1736.00, TotalTaxAmount=364.56, TotalPriceWithTax=2100.56
2025-04-14T00:08:29.518+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=1736.00, TaxAmount=364.56
2025-04-14T00:08:29.518+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 1736.00, Running Item Tax: 364.56
2025-04-14T00:08:29.518+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 1736.00, Final Item Tax: 364.56
2025-04-14T00:08:29.519+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: EUR
2025-04-14T00:08:29.519+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 25.00, Tax: 5.25, Estimated Rate: 0.2100
2025-04-14T00:08:29.519+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: EUR
2025-04-14T00:08:29.519+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=1761.00, TotalTax=369.81, OriginalTotalWithTax=2130.81, RoundedTotalToSave=2130
2025-04-14T00:08:29.520+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: EUR
2025-04-14T00:08:29.520+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null contains custom product. Calculating potential deposit.
2025-04-14T00:08:29.520+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 2130 is 1065.00
2025-04-14T00:08:29.520+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 1000
2025-04-14T00:08:29.520+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 1000.00
2025-04-14T00:08:29.521+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Deposit required for order null. Status set to AWAITING_DEPOSIT.
2025-04-14T00:08:29.521+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 2130 is 1065.00
2025-04-14T00:08:29.521+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 1000
2025-04-14T00:08:29.522+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 1000.00
2025-04-14T00:08:29.522+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Deposit amount 1000.00 EUR calculated for custom order (new).
2025-04-14T00:08:29.522+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: AWAITING_DEPOSIT, Deposit Amount: 1000.00
2025-04-14T00:08:29.522+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 207
2025-04-14T00:08:29.523+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 207
2025-04-14T00:08:29.523+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T00:08:29.599+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 207 created successfully. Total: 2130 EUR
2025-04-14T00:08:29.601+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 207...
2025-04-14T00:08:29.603+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 11] Triggering proforma invoice generation for order 207. Currency: EUR
2025-04-14T00:08:29.643+02:00 ERROR 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Non-critical error generating proforma invoice for order 207: Order not found: 2. Order creation continues.

jakarta.persistence.EntityNotFoundException: Order not found: 2
	at org.example.eshop.service.SuperFakturaInvoiceService.lambda$reloadOrder$2(SuperFakturaInvoiceService.java:289) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.reloadOrder(SuperFakturaInvoiceService.java:289) ~[classes/:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.generateProformaInvoice(SuperFakturaInvoiceService.java:76) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$1.generateProformaInvoice(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$0.generateProformaInvoice(<generated>) ~[classes/:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:348) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:191) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T00:08:29.714+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 207 (Total: 2130 EUR)
2025-04-14T00:08:29.715+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer admin@example.com with 1 items in CZK
2025-04-14T00:08:29.718+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 2 with explicit currency: CZK
2025-04-14T00:08:29.719+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T00:08:29.742+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T00:08:29.743+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 2 to order.
2025-04-14T00:08:29.743+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Admin Eshopu
2025-04-14T00:08:29.743+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T00:08:29.743+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T00:08:29.743+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T00:08:29.743+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 2
2025-04-14T00:08:29.743+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 2
2025-04-14T00:08:29.748+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 500.00
2025-04-14T00:08:29.750+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 2)
2025-04-14T00:08:29.751+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Modern Simple | Lazura: Teak Premium | Střecha: Stříbrná metalická
2025-04-14T00:08:29.752+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 7490.00
2025-04-14T00:08:29.766+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 7490.00
2025-04-14T00:08:29.766+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T00:08:29.767+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 7990.00
2025-04-14T00:08:29.770+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 1677.90
2025-04-14T00:08:29.771+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 9667.90
2025-04-14T00:08:29.771+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=15980.00, TotalTaxAmount=3355.80, TotalPriceWithTax=19335.80
2025-04-14T00:08:29.771+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=15980.00, TaxAmount=3355.80
2025-04-14T00:08:29.773+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 15980.00, Running Item Tax: 3355.80
2025-04-14T00:08:29.775+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 15980.00, Final Item Tax: 3355.80
2025-04-14T00:08:29.775+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T00:08:29.775+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T00:08:29.779+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T00:08:29.779+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=16480.00, TotalTax=3460.80, OriginalTotalWithTax=19940.80, RoundedTotalToSave=19940
2025-04-14T00:08:29.779+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T00:08:29.779+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T00:08:29.780+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T00:08:29.780+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T00:08:29.780+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T00:08:29.780+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 208
2025-04-14T00:08:29.780+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 208
2025-04-14T00:08:29.780+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T00:08:29.795+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 208 created successfully. Total: 19940 CZK
2025-04-14T00:08:29.795+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 208...
2025-04-14T00:08:29.796+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 208 (Total: 19940 CZK)
2025-04-14T00:08:29.796+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updating order 208 to PAID and state PROCESSING (SF API calls might be triggered if active)
2025-04-14T00:08:29.810+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updated order 208 to PAID and state PROCESSING (bypassed SF calls)
2025-04-14T00:08:29.810+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T00:08:29.811+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T00:08:29.811+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T00:08:29.833+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T00:08:29.834+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T00:08:29.834+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T00:08:29.834+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T00:08:29.835+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T00:08:29.835+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T00:08:29.835+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 3
2025-04-14T00:08:29.835+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 3
2025-04-14T00:08:29.836+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T00:08:29.837+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 3)
2025-04-14T00:08:29.837+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Na míru|Rozměry (DxHxV): 280x90x195 cm|Okap: Ano
2025-04-14T00:08:29.838+02:00  INFO 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: CZK
2025-04-14T00:08:29.838+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (CZK): 32700.00
2025-04-14T00:08:29.840+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (CZK): 0.00
2025-04-14T00:08:29.840+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for divider (CZK): 0.00
2025-04-14T00:08:29.840+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (CZK, fixed): 1000.00
2025-04-14T00:08:29.840+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (CZK, fixed): 0.00
2025-04-14T00:08:29.840+02:00  INFO 24756 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: CZK. Vypočtená cena: 33700.00
2025-04-14T00:08:29.840+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 33700.00
2025-04-14T00:08:29.851+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 33700.00
2025-04-14T00:08:29.852+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing addons for OrderItem (Product ID: 3), Currency: CZK
2025-04-14T00:08:29.853+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Requested addon IDs: [1]
2025-04-14T00:08:29.867+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Found addons from DB: [1]
2025-04-14T00:08:29.868+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Allowed addon IDs for this product: [1, 2]
2025-04-14T00:08:29.868+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=1, Name=Polička navíc
2025-04-14T00:08:29.868+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (CZK): 350.00
2025-04-14T00:08:29.869+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (CZK): 350.00
2025-04-14T00:08:29.870+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished processing addons. Total addon price (CZK): 350.00
2025-04-14T00:08:29.870+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 350.00
2025-04-14T00:08:29.870+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 34050.00
2025-04-14T00:08:29.870+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 7150.50
2025-04-14T00:08:29.871+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 41200.50
2025-04-14T00:08:29.871+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=34050.00, TotalTaxAmount=7150.50, TotalPriceWithTax=41200.50
2025-04-14T00:08:29.871+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=34050.00, TaxAmount=7150.50
2025-04-14T00:08:29.871+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 34050.00, Running Item Tax: 7150.50
2025-04-14T00:08:29.872+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 34050.00, Final Item Tax: 7150.50
2025-04-14T00:08:29.872+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T00:08:29.872+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T00:08:29.872+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T00:08:29.872+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=34550.00, TotalTax=7255.50, OriginalTotalWithTax=41805.50, RoundedTotalToSave=41805
2025-04-14T00:08:29.873+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T00:08:29.873+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null contains custom product. Calculating potential deposit.
2025-04-14T00:08:29.875+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 41805 is 20902.50
2025-04-14T00:08:29.875+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 20000
2025-04-14T00:08:29.875+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 20000.00
2025-04-14T00:08:29.876+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Deposit required for order null. Status set to AWAITING_DEPOSIT.
2025-04-14T00:08:29.878+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 41805 is 20902.50
2025-04-14T00:08:29.879+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 20000
2025-04-14T00:08:29.880+02:00  INFO 24756 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 20000.00
2025-04-14T00:08:29.881+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Deposit amount 20000.00 CZK calculated for custom order (new).
2025-04-14T00:08:29.881+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: AWAITING_DEPOSIT, Deposit Amount: 20000.00
2025-04-14T00:08:29.881+02:00 DEBUG 24756 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 209
2025-04-14T00:08:29.882+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 209
2025-04-14T00:08:29.882+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T00:08:29.894+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 209 created successfully. Total: 41805 CZK
2025-04-14T00:08:29.895+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 209...
2025-04-14T00:08:29.899+02:00 DEBUG 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 11] Triggering proforma invoice generation for order 209. Currency: CZK
2025-04-14T00:08:29.912+02:00 ERROR 24756 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Non-critical error generating proforma invoice for order 209: Order not found: 4. Order creation continues.

jakarta.persistence.EntityNotFoundException: Order not found: 4
	at org.example.eshop.service.SuperFakturaInvoiceService.lambda$reloadOrder$2(SuperFakturaInvoiceService.java:289) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.reloadOrder(SuperFakturaInvoiceService.java:289) ~[classes/:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.generateProformaInvoice(SuperFakturaInvoiceService.java:76) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$1.generateProformaInvoice(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$0.generateProformaInvoice(<generated>) ~[classes/:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:348) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:236) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T00:08:29.921+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 209 (Total: 41805 CZK)
2025-04-14T00:08:29.922+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updating order 209 to DEPOSIT_PAID and state IN_PRODUCTION (SF API calls might be triggered if active)
2025-04-14T00:08:29.925+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updated order 209 to DEPOSIT_PAID and state IN_PRODUCTION (bypassed SF calls)
2025-04-14T00:08:29.926+02:00  INFO 24756 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Test data initialization finished successfully.
2025-04-14T00:08:30.890+02:00 ERROR 24756 --- [Eshop] [task-3] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-3] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:08:30.890+02:00 ERROR 24756 --- [Eshop] [task-1] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-1] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:08:30.890+02:00 ERROR 24756 --- [Eshop] [task-4] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-4] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:08:30.890+02:00 ERROR 24756 --- [Eshop] [task-2] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-2] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:08:30.902+02:00 ERROR 24756 --- [Eshop] [task-1] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 206: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:08:30.902+02:00 ERROR 24756 --- [Eshop] [task-4] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 209: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:08:30.901+02:00 ERROR 24756 --- [Eshop] [task-3] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 208: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:08:30.911+02:00 ERROR 24756 --- [Eshop] [task-2] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 207: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:08:32.729+02:00  INFO 24756 --- [Eshop] [RMI TCP Connection(3)-192.168.1.157] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-14T00:08:32.729+02:00  INFO 24756 --- [Eshop] [RMI TCP Connection(3)-192.168.1.157] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-04-14T00:08:32.741+02:00  INFO 24756 --- [Eshop] [RMI TCP Connection(3)-192.168.1.157] o.s.web.servlet.DispatcherServlet        : Completed initialization in 12 ms
2025-04-14T00:09:16.235+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T00:09:16.237+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:16.237+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:16.240+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T00:09:20.028+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:09:20.028+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:20.035+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:20.035+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:09:21.184+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkty
2025-04-14T00:09:21.184+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:21.184+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:21.201+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do listProducts. Pageable: Page request [number: 0, size 9, sort: name: ASC]
2025-04-14T00:09:21.202+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProducts(Pageable: Page request [number: 0, size 9, sort: name: ASC]) <<<
2025-04-14T00:09:21.259+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : [ProductService] getActiveProducts(Pageable): Načtena stránka s 3 aktivními produkty.
2025-04-14T00:09:21.259+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProducts(Pageable) <<<
2025-04-14T00:09:21.259+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : [ProductController] ProductService.getActiveProducts vrátil stránku: TotalElements=3, TotalPages=1, Number=0, Size=9
2025-04-14T00:09:21.276+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : [ProductController] Hibernate.initialize(images) dokončeno pro 3 produktů na stránce.
2025-04-14T00:09:21.276+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím listProducts. Obsah modelu před vrácením 'produkty': {currentGlobalCurrency=CZK, productPage=Page 1 of 1 containing org.example.eshop.model.Product instances}
2025-04-14T00:09:21.821+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T00:09:21.821+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/placeholder-custom.png
2025-04-14T00:09:21.821+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T00:09:21.822+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:21.823+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:21.822+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:21.823+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:21.823+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:21.823+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:21.915+02:00 ERROR 24756 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:09:21.915+02:00 ERROR 24756 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:09:21.915+02:00 ERROR 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "placeholder-custom.png"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:09:22.018+02:00  WARN 24756 --- [Eshop] [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]]
2025-04-14T00:09:22.018+02:00  WARN 24756 --- [Eshop] [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T00:09:22.018+02:00  WARN 24756 --- [Eshop] [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T00:09:22.100+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:09:22.101+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:22.101+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:22.101+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:09:23.998+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkt/klasik
2025-04-14T00:09:23.998+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:23.998+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:24.001+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do productDetail. Slug: klasik
2025-04-14T00:09:24.001+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-10] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProductBySlug. Slug: klasik
2025-04-14T00:09:24.015+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-10] o.example.eshop.service.ProductService   : [ProductService] getActiveProductBySlug: Aktivní produkt se slugem 'klasik' nalezen.
2025-04-14T00:09:24.015+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-10] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProductBySlug (Slug: klasik) <<<
2025-04-14T00:09:24.015+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.ProductController   : [ProductController] Produkt ID 1 nalezen pro slug 'klasik'.
2025-04-14T00:09:24.021+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.ProductController   : [ProductController] Inicializovány obrázky pro produkt ID 1
2025-04-14T00:09:24.021+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.ProductController   : [ProductController] Zpracovávám detail pro STANDARD produkt ID 1
2025-04-14T00:09:24.035+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.ProductController   : [ProductController] Inicializovány designy, lazury a barvy střech pro standardní produkt ID 1
2025-04-14T00:09:24.035+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím productDetail. Obsah modelu před vrácením 'produkt-detail-standard': {currentGlobalCurrency=CZK, product=org.example.eshop.model.Product@a92479, basePriceCZK=5990.00, basePriceEUR=250.00, availableDesigns=[org.example.eshop.model.Design@20, org.example.eshop.model.Design@21], availableGlazes=[org.example.eshop.model.Glaze@3c7221ec, org.example.eshop.model.Glaze@3c7221ec, org.example.eshop.model.Glaze@3c7221ec], availableRoofColors=[org.example.eshop.model.RoofColor@15599efe, org.example.eshop.model.RoofColor@15599efe, org.example.eshop.model.RoofColor@15599efe], cartItemDto=org.example.eshop.dto.CartItemDto@7b37a27f}
2025-04-14T00:09:24.453+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T00:09:24.455+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:24.455+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:24.456+02:00 ERROR 24756 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:09:24.461+02:00  WARN 24756 --- [Eshop] [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T00:09:24.565+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:09:24.568+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:24.568+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:24.568+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:09:26.205+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik/pridat
2025-04-14T00:09:26.205+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:26.205+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:26.259+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : --- addToCart START (Attribute Select Version) --- Cart instance hash: 972398559
2025-04-14T00:09:26.259+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 1
2025-04-14T00:09:26.264+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 1 nalezen.
2025-04-14T00:09:26.269+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 1) <<<
2025-04-14T00:09:26.270+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Processing addToCart request for product ID: 1
2025-04-14T00:09:26.270+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : CartItemDto details: isCustom=false, quantity=1
2025-04-14T00:09:26.270+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Selected IDs: Design=1, Glaze=3, RoofColor=1
2025-04-14T00:09:26.270+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 1
2025-04-14T00:09:26.270+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 1 nalezen.
2025-04-14T00:09:26.270+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 1) <<<
2025-04-14T00:09:26.295+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Applied Tax Rate 21.00% for product ID 1
2025-04-14T00:09:26.295+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Calculated attribute surcharges: CZK=0, EUR=0
2025-04-14T00:09:26.295+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Using base price for standard product: CZK=5990.00, EUR=250.00
2025-04-14T00:09:26.295+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Final unit prices calculated (incl. attribute surcharges and addons): CZK=5990.00, EUR=250.00
2025-04-14T00:09:26.295+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Built variant info string for CartItem (ProductID: 1): 'Rozměry (DxHxV): 200x80x180 cm | Design: Klasik | Lazura: Bezbarvý lak | Střecha: Antracit'
2025-04-14T00:09:26.295+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Generated Cart Item ID: P1-S-D1-G3-RC1
2025-04-14T00:09:26.295+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.Cart           : addItem called for cart hash: 174842297. Item ID: P1-S-D1-G3-RC1, Product ID: 1
2025-04-14T00:09:26.300+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.Cart           : Increased quantity for cart item ID: P1-S-D1-G3-RC1 to 3. Cart hash: 174842297
2025-04-14T00:09:26.300+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.Cart           : Cart items map after addItem (hash: 174842297): {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=3, taxRatePercent=0.21}}
2025-04-14T00:09:26.310+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : --- addToCart END --- Item added/updated. Cart instance hash: 972398559, Current cart items count: 1
2025-04-14T00:09:26.365+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik
2025-04-14T00:09:26.365+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:26.365+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:26.370+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : --- viewCart START --- Cart instance hash: 972398559
2025-04-14T00:09:26.371+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Cart items before display: {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=3, taxRatePercent=0.21}}
2025-04-14T00:09:26.371+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Displaying cart page. Cart has 1 items.
2025-04-14T00:09:26.371+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Current currency set to: CZK
2025-04-14T00:09:26.375+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Cart subtotal (CZK): 17970.00
2025-04-14T00:09:26.375+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Validated coupon: None, Discount amount (CZK): 0
2025-04-14T00:09:26.380+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Total VAT (CZK): 3773.70
2025-04-14T00:09:26.380+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : VAT Breakdown (CZK): {0.21=3773.70}
2025-04-14T00:09:26.380+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Total Price Before Shipping (CZK): 21743.70
2025-04-14T00:09:26.380+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Total Price Without Tax After Discount (CZK): 17970.00
2025-04-14T00:09:26.380+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : --- viewCart END --- Model attributes set for cart.
2025-04-14T00:09:26.590+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T00:09:26.590+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:26.590+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:26.595+02:00 ERROR 24756 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:09:26.597+02:00  WARN 24756 --- [Eshop] [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T00:09:26.687+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:09:26.687+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:26.687+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:26.687+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:09:29.122+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:09:29.122+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:29.122+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:29.122+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:09:29.122+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:09:29.125+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:09:29.125+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:09:29.127+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:09:29.127+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:09:29.127+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:09:29.438+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:09:29.438+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:09:29.438+02:00  INFO 24756 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:09:29.438+02:00 DEBUG 24756 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:09:45.422+02:00  INFO 24756 --- [Eshop] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-04-14T00:09:45.481+02:00  INFO 24756 --- [Eshop] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-04-14T00:09:45.509+02:00  INFO 24756 --- [Eshop] [SpringApplicationShutdownHook] o.e.e.service.GoogleMapsShippingService  : Shutting down Google Maps API context.
2025-04-14T00:09:45.518+02:00  INFO 24756 --- [Eshop] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T00:09:46.913+02:00  INFO 24756 --- [Eshop] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-14T00:09:46.919+02:00  INFO 24756 --- [Eshop] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-14T00:12:20.700+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Starting EshopApplication using Java 21.0.6 with PID 18304 (C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop\target\classes started by mirsv in C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop)
2025-04-14T00:12:20.706+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Running with Spring Boot v3.4.4, Spring v6.2.5
2025-04-14T00:12:20.710+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : No active profile set, falling back to 1 default profile: "default"
2025-04-14T00:12:21.397+02:00  INFO 18304 --- [Eshop] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-14T00:12:21.397+02:00  INFO 18304 --- [Eshop] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-14T00:12:24.167+02:00  INFO 18304 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-14T00:12:24.435+02:00  INFO 18304 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 242 ms. Found 14 JPA repository interfaces.
2025-04-14T00:12:26.364+02:00  INFO 18304 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-04-14T00:12:26.394+02:00  INFO 18304 --- [Eshop] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-04-14T00:12:26.396+02:00  INFO 18304 --- [Eshop] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-04-14T00:12:26.508+02:00  INFO 18304 --- [Eshop] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-04-14T00:12:26.509+02:00  INFO 18304 --- [Eshop] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5111 ms
2025-04-14T00:12:27.335+02:00  INFO 18304 --- [Eshop] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-14T00:12:27.453+02:00  INFO 18304 --- [Eshop] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-04-14T00:12:27.505+02:00  INFO 18304 --- [Eshop] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-14T00:12:27.984+02:00  INFO 18304 --- [Eshop] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-14T00:12:28.045+02:00  INFO 18304 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-14T00:12:28.206+02:00  INFO 18304 --- [Eshop] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.mariadb.jdbc.Connection@62da92ad
2025-04-14T00:12:28.208+02:00  INFO 18304 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-14T00:12:28.322+02:00  INFO 18304 --- [Eshop] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 11.7.2
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-04-14T00:12:31.131+02:00  INFO 18304 --- [Eshop] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-14T00:12:34.501+02:00  INFO 18304 --- [Eshop] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T00:12:35.211+02:00  INFO 18304 --- [Eshop] [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-14T00:12:35.694+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Initializing Google Maps API context...
2025-04-14T00:12:35.938+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Google Maps API context initialized successfully.
2025-04-14T00:12:35.938+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Origin coordinates set to: 50.03500389,15.49180022
2025-04-14T00:12:35.963+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Initializing order code counter...
2025-04-14T00:12:36.139+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : No existing numeric-like order codes found in database.
2025-04-14T00:12:36.140+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Order code counter initialized to: 205
2025-04-14T00:12:36.581+02:00  WARN 18304 --- [Eshop] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-14T00:12:37.107+02:00  INFO 18304 --- [Eshop] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-04-14T00:12:37.275+02:00  INFO 18304 --- [Eshop] [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-04-14T00:12:38.027+02:00  INFO 18304 --- [Eshop] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-04-14T00:12:39.166+02:00  INFO 18304 --- [Eshop] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-04-14T00:12:39.266+02:00  INFO 18304 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-04-14T00:12:39.285+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Started EshopApplication in 20.062 seconds (process running for 22.069)
2025-04-14T00:12:39.315+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Initializing test data...
2025-04-14T00:12:39.765+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Tax Rates...
2025-04-14T00:12:39.832+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Order States...
2025-04-14T00:12:39.860+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Email Template Configs...
2025-04-14T00:12:40.011+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik
2025-04-14T00:12:40.017+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik Plus
2025-04-14T00:12:40.024+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Simple
2025-04-14T00:12:40.033+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Box
2025-04-14T00:12:40.040+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Ořech
2025-04-14T00:12:40.047+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Palisandr
2025-04-14T00:12:40.051+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Bezbarvý lak
2025-04-14T00:12:40.056+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Šedá lazura
2025-04-14T00:12:40.064+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Antracit
2025-04-14T00:12:40.069+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak
2025-04-14T00:12:40.074+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak Premium
2025-04-14T00:12:40.082+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Antracit
2025-04-14T00:12:40.087+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Červená
2025-04-14T00:12:40.093+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Zelená
2025-04-14T00:12:40.099+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná
2025-04-14T00:12:40.104+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná metalická
2025-04-14T00:12:40.114+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Polička navíc
2025-04-14T00:12:40.121+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Držák na nářadí
2025-04-14T00:12:40.128+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Starý doplněk
2025-04-14T00:12:40.147+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Klasik
2025-04-14T00:12:40.200+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Modern
2025-04-14T00:12:40.210+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník na míru
2025-04-14T00:12:40.214+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating new configurator for product ID: 3
2025-04-14T00:12:40.214+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Updating existing configurator for product ID: 3
2025-04-14T00:12:40.621+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating admin user: admin@example.com
2025-04-14T00:12:40.632+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating test orders...
2025-04-14T00:12:40.632+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T00:12:40.633+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T00:12:40.634+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T00:12:40.651+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T00:12:40.652+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T00:12:40.652+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T00:12:40.652+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T00:12:40.652+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T00:12:40.652+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T00:12:40.652+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 1
2025-04-14T00:12:40.652+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 1
2025-04-14T00:12:40.660+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T00:12:40.661+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 1)
2025-04-14T00:12:40.661+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Klasik | Lazura: Ořech | Střecha: Antracit
2025-04-14T00:12:40.661+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 5990.00
2025-04-14T00:12:40.671+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 5990.00
2025-04-14T00:12:40.671+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T00:12:40.671+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 5990.00
2025-04-14T00:12:40.671+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 1257.90
2025-04-14T00:12:40.671+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 7247.90
2025-04-14T00:12:40.672+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=5990.00, TotalTaxAmount=1257.90, TotalPriceWithTax=7247.90
2025-04-14T00:12:40.672+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=5990.00, TaxAmount=1257.90
2025-04-14T00:12:40.672+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 5990.00, Running Item Tax: 1257.90
2025-04-14T00:12:40.672+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 5990.00, Final Item Tax: 1257.90
2025-04-14T00:12:40.673+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T00:12:40.673+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T00:12:40.673+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T00:12:40.673+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=6490.00, TotalTax=1362.90, OriginalTotalWithTax=7852.90, RoundedTotalToSave=7852
2025-04-14T00:12:40.673+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T00:12:40.674+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T00:12:40.674+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T00:12:40.674+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T00:12:40.674+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T00:12:40.674+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 206
2025-04-14T00:12:40.675+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 206
2025-04-14T00:12:40.675+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T00:12:40.702+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 206 created successfully. Total: 7852 CZK
2025-04-14T00:12:40.702+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 206...
2025-04-14T00:12:40.705+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 206 (Total: 7852 CZK)
2025-04-14T00:12:40.706+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in EUR
2025-04-14T00:12:40.706+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: EUR
2025-04-14T00:12:40.706+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: EUR
2025-04-14T00:12:40.712+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: EUR
2025-04-14T00:12:40.712+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T00:12:40.712+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T00:12:40.712+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T00:12:40.712+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T00:12:40.713+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: EUR
2025-04-14T00:12:40.713+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 3
2025-04-14T00:12:40.713+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 3
2025-04-14T00:12:40.713+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T00:12:40.713+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 3)
2025-04-14T00:12:40.714+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Na míru|Rozměry (DxHxV): 350x120x210 cm|Příčka: Ano
2025-04-14T00:12:40.720+02:00  INFO 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: EUR
2025-04-14T00:12:40.721+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (EUR): 1623.60
2025-04-14T00:12:40.721+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (EUR): 0.00
2025-04-14T00:12:40.721+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for divider (EUR): 62.40
2025-04-14T00:12:40.721+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (EUR, fixed): 0.00
2025-04-14T00:12:40.721+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (EUR, fixed): 0.00
2025-04-14T00:12:40.721+02:00  INFO 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: EUR. Vypočtená cena: 1686.00
2025-04-14T00:12:40.722+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 1686.00
2025-04-14T00:12:40.727+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 1686.00
2025-04-14T00:12:40.727+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing addons for OrderItem (Product ID: 3), Currency: EUR
2025-04-14T00:12:40.735+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Requested addon IDs: [1, 2]
2025-04-14T00:12:40.754+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Found addons from DB: [1, 2]
2025-04-14T00:12:40.755+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Allowed addon IDs for this product: [1, 2]
2025-04-14T00:12:40.755+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=1, Name=Polička navíc
2025-04-14T00:12:40.756+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (EUR): 15.00
2025-04-14T00:12:40.756+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (EUR): 30.00
2025-04-14T00:12:40.756+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=2, Name=Držák na nářadí
2025-04-14T00:12:40.756+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (EUR): 20.00
2025-04-14T00:12:40.756+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (EUR): 20.00
2025-04-14T00:12:40.756+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished processing addons. Total addon price (EUR): 50.00
2025-04-14T00:12:40.756+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 50.00
2025-04-14T00:12:40.756+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 1736.00
2025-04-14T00:12:40.756+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 364.56
2025-04-14T00:12:40.756+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 2100.56
2025-04-14T00:12:40.756+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=1736.00, TotalTaxAmount=364.56, TotalPriceWithTax=2100.56
2025-04-14T00:12:40.757+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=1736.00, TaxAmount=364.56
2025-04-14T00:12:40.757+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 1736.00, Running Item Tax: 364.56
2025-04-14T00:12:40.757+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 1736.00, Final Item Tax: 364.56
2025-04-14T00:12:40.757+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: EUR
2025-04-14T00:12:40.757+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 25.00, Tax: 5.25, Estimated Rate: 0.2100
2025-04-14T00:12:40.757+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: EUR
2025-04-14T00:12:40.757+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=1761.00, TotalTax=369.81, OriginalTotalWithTax=2130.81, RoundedTotalToSave=2130
2025-04-14T00:12:40.757+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: EUR
2025-04-14T00:12:40.757+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null contains custom product. Calculating potential deposit.
2025-04-14T00:12:40.757+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 2130 is 1065.00
2025-04-14T00:12:40.757+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 1000
2025-04-14T00:12:40.757+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 1000.00
2025-04-14T00:12:40.758+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Deposit required for order null. Status set to AWAITING_DEPOSIT.
2025-04-14T00:12:40.758+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 2130 is 1065.00
2025-04-14T00:12:40.758+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 1000
2025-04-14T00:12:40.758+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 1000.00
2025-04-14T00:12:40.758+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Deposit amount 1000.00 EUR calculated for custom order (new).
2025-04-14T00:12:40.758+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: AWAITING_DEPOSIT, Deposit Amount: 1000.00
2025-04-14T00:12:40.758+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 207
2025-04-14T00:12:40.758+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 207
2025-04-14T00:12:40.759+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T00:12:40.774+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 207 created successfully. Total: 2130 EUR
2025-04-14T00:12:40.774+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 207...
2025-04-14T00:12:40.774+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 11] Triggering proforma invoice generation for order 207. Currency: EUR
2025-04-14T00:12:40.794+02:00 ERROR 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Non-critical error generating proforma invoice for order 207: Order not found: 2. Order creation continues.

jakarta.persistence.EntityNotFoundException: Order not found: 2
	at org.example.eshop.service.SuperFakturaInvoiceService.lambda$reloadOrder$2(SuperFakturaInvoiceService.java:289) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.reloadOrder(SuperFakturaInvoiceService.java:289) ~[classes/:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.generateProformaInvoice(SuperFakturaInvoiceService.java:76) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$1.generateProformaInvoice(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$0.generateProformaInvoice(<generated>) ~[classes/:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:348) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:191) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T00:12:40.803+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 207 (Total: 2130 EUR)
2025-04-14T00:12:40.804+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer admin@example.com with 1 items in CZK
2025-04-14T00:12:40.804+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 2 with explicit currency: CZK
2025-04-14T00:12:40.804+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T00:12:40.810+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T00:12:40.810+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 2 to order.
2025-04-14T00:12:40.811+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Admin Eshopu
2025-04-14T00:12:40.811+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T00:12:40.811+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T00:12:40.811+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T00:12:40.811+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 2
2025-04-14T00:12:40.811+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 2
2025-04-14T00:12:40.812+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 500.00
2025-04-14T00:12:40.813+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 2)
2025-04-14T00:12:40.813+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Modern Simple | Lazura: Teak Premium | Střecha: Stříbrná metalická
2025-04-14T00:12:40.813+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 7490.00
2025-04-14T00:12:40.817+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 7490.00
2025-04-14T00:12:40.818+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T00:12:40.818+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 7990.00
2025-04-14T00:12:40.818+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 1677.90
2025-04-14T00:12:40.818+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 9667.90
2025-04-14T00:12:40.818+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=15980.00, TotalTaxAmount=3355.80, TotalPriceWithTax=19335.80
2025-04-14T00:12:40.818+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=15980.00, TaxAmount=3355.80
2025-04-14T00:12:40.819+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 15980.00, Running Item Tax: 3355.80
2025-04-14T00:12:40.819+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 15980.00, Final Item Tax: 3355.80
2025-04-14T00:12:40.819+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T00:12:40.819+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T00:12:40.819+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T00:12:40.819+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=16480.00, TotalTax=3460.80, OriginalTotalWithTax=19940.80, RoundedTotalToSave=19940
2025-04-14T00:12:40.819+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T00:12:40.819+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T00:12:40.819+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T00:12:40.820+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T00:12:40.820+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T00:12:40.820+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 208
2025-04-14T00:12:40.820+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 208
2025-04-14T00:12:40.820+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T00:12:40.826+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 208 created successfully. Total: 19940 CZK
2025-04-14T00:12:40.827+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 208...
2025-04-14T00:12:40.828+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 208 (Total: 19940 CZK)
2025-04-14T00:12:40.828+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updating order 208 to PAID and state PROCESSING (SF API calls might be triggered if active)
2025-04-14T00:12:40.838+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updated order 208 to PAID and state PROCESSING (bypassed SF calls)
2025-04-14T00:12:40.839+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T00:12:40.839+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T00:12:40.839+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T00:12:40.848+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T00:12:40.848+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T00:12:40.848+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T00:12:40.848+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T00:12:40.849+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T00:12:40.849+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T00:12:40.849+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 3
2025-04-14T00:12:40.849+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 3
2025-04-14T00:12:40.849+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T00:12:40.850+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 3)
2025-04-14T00:12:40.850+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Na míru|Rozměry (DxHxV): 280x90x195 cm|Okap: Ano
2025-04-14T00:12:40.850+02:00  INFO 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: CZK
2025-04-14T00:12:40.850+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (CZK): 32700.00
2025-04-14T00:12:40.850+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (CZK): 0.00
2025-04-14T00:12:40.850+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for divider (CZK): 0.00
2025-04-14T00:12:40.850+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (CZK, fixed): 1000.00
2025-04-14T00:12:40.850+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (CZK, fixed): 0.00
2025-04-14T00:12:40.850+02:00  INFO 18304 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: CZK. Vypočtená cena: 33700.00
2025-04-14T00:12:40.851+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 33700.00
2025-04-14T00:12:40.855+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 33700.00
2025-04-14T00:12:40.855+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing addons for OrderItem (Product ID: 3), Currency: CZK
2025-04-14T00:12:40.855+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Requested addon IDs: [1]
2025-04-14T00:12:40.860+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Found addons from DB: [1]
2025-04-14T00:12:40.861+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Allowed addon IDs for this product: [1, 2]
2025-04-14T00:12:40.861+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=1, Name=Polička navíc
2025-04-14T00:12:40.862+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (CZK): 350.00
2025-04-14T00:12:40.862+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (CZK): 350.00
2025-04-14T00:12:40.862+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished processing addons. Total addon price (CZK): 350.00
2025-04-14T00:12:40.862+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 350.00
2025-04-14T00:12:40.862+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 34050.00
2025-04-14T00:12:40.862+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 7150.50
2025-04-14T00:12:40.862+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 41200.50
2025-04-14T00:12:40.862+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=34050.00, TotalTaxAmount=7150.50, TotalPriceWithTax=41200.50
2025-04-14T00:12:40.862+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=34050.00, TaxAmount=7150.50
2025-04-14T00:12:40.862+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 34050.00, Running Item Tax: 7150.50
2025-04-14T00:12:40.862+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 34050.00, Final Item Tax: 7150.50
2025-04-14T00:12:40.863+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T00:12:40.863+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T00:12:40.863+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T00:12:40.863+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=34550.00, TotalTax=7255.50, OriginalTotalWithTax=41805.50, RoundedTotalToSave=41805
2025-04-14T00:12:40.863+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T00:12:40.863+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null contains custom product. Calculating potential deposit.
2025-04-14T00:12:40.864+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 41805 is 20902.50
2025-04-14T00:12:40.864+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 20000
2025-04-14T00:12:40.864+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 20000.00
2025-04-14T00:12:40.864+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Deposit required for order null. Status set to AWAITING_DEPOSIT.
2025-04-14T00:12:40.864+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 41805 is 20902.50
2025-04-14T00:12:40.864+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 20000
2025-04-14T00:12:40.864+02:00  INFO 18304 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 20000.00
2025-04-14T00:12:40.864+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Deposit amount 20000.00 CZK calculated for custom order (new).
2025-04-14T00:12:40.865+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: AWAITING_DEPOSIT, Deposit Amount: 20000.00
2025-04-14T00:12:40.865+02:00 DEBUG 18304 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 209
2025-04-14T00:12:40.865+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 209
2025-04-14T00:12:40.865+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T00:12:40.873+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 209 created successfully. Total: 41805 CZK
2025-04-14T00:12:40.874+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 209...
2025-04-14T00:12:40.875+02:00 DEBUG 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 11] Triggering proforma invoice generation for order 209. Currency: CZK
2025-04-14T00:12:40.879+02:00 ERROR 18304 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Non-critical error generating proforma invoice for order 209: Order not found: 4. Order creation continues.

jakarta.persistence.EntityNotFoundException: Order not found: 4
	at org.example.eshop.service.SuperFakturaInvoiceService.lambda$reloadOrder$2(SuperFakturaInvoiceService.java:289) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.reloadOrder(SuperFakturaInvoiceService.java:289) ~[classes/:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.generateProformaInvoice(SuperFakturaInvoiceService.java:76) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$1.generateProformaInvoice(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$0.generateProformaInvoice(<generated>) ~[classes/:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:348) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:236) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T00:12:40.884+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 209 (Total: 41805 CZK)
2025-04-14T00:12:40.884+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updating order 209 to DEPOSIT_PAID and state IN_PRODUCTION (SF API calls might be triggered if active)
2025-04-14T00:12:40.885+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updated order 209 to DEPOSIT_PAID and state IN_PRODUCTION (bypassed SF calls)
2025-04-14T00:12:40.885+02:00  INFO 18304 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Test data initialization finished successfully.
2025-04-14T00:12:41.132+02:00 ERROR 18304 --- [Eshop] [task-3] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-3] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:12:41.132+02:00 ERROR 18304 --- [Eshop] [task-4] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-4] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:12:41.132+02:00 ERROR 18304 --- [Eshop] [task-2] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-2] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:12:41.137+02:00 ERROR 18304 --- [Eshop] [task-4] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 209: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:12:41.137+02:00 ERROR 18304 --- [Eshop] [task-3] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 208: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:12:41.138+02:00 ERROR 18304 --- [Eshop] [task-2] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 207: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:12:41.132+02:00 ERROR 18304 --- [Eshop] [task-1] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-1] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:12:41.144+02:00 ERROR 18304 --- [Eshop] [task-1] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 206: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T00:12:41.290+02:00  INFO 18304 --- [Eshop] [RMI TCP Connection(4)-192.168.1.157] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-14T00:12:41.291+02:00  INFO 18304 --- [Eshop] [RMI TCP Connection(4)-192.168.1.157] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-04-14T00:12:41.299+02:00  INFO 18304 --- [Eshop] [RMI TCP Connection(4)-192.168.1.157] o.s.web.servlet.DispatcherServlet        : Completed initialization in 7 ms
2025-04-14T00:12:53.604+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:12:53.605+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:12:53.605+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:12:53.639+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:12:53.639+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:12:53.644+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:12:53.644+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:12:53.655+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:12:53.655+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:12:53.655+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:12:59.892+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:12:59.892+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:12:59.892+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:12:59.900+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:13:16.104+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:13:16.105+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:13:16.106+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:13:16.109+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:13:16.109+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:13:16.109+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:13:16.109+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:13:16.111+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:13:16.111+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:13:16.111+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:13:16.932+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:13:16.932+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:13:16.932+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:13:16.932+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:14:28.516+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:14:28.517+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:14:28.518+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:14:28.522+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:14:28.523+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:14:28.523+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:14:28.523+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:14:28.525+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:14:28.525+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:14:28.525+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:14:29.253+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:14:29.254+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:14:29.254+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:14:29.254+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:16:29.350+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:16:29.350+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:16:29.350+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:16:29.352+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:16:29.352+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:16:29.352+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:16:29.352+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:16:29.357+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:16:29.357+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:16:29.358+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:16:29.827+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:16:29.827+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:16:29.827+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:16:29.827+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:18:42.294+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:18:42.295+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:18:42.295+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:18:42.300+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:18:42.301+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:18:42.301+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:18:42.301+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:18:42.302+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:18:42.302+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:18:42.303+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:18:43.798+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:18:43.800+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:18:43.802+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:18:43.802+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:18:55.811+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:18:55.811+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:18:55.811+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:18:55.813+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:18:55.813+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:18:55.813+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:18:55.816+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:18:55.817+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:18:55.817+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:18:55.817+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:18:56.520+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:18:56.533+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:18:56.534+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:18:56.534+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:24:30.214+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:24:30.214+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:24:30.214+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:24:30.218+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:24:30.218+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:24:30.218+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:24:30.219+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:24:30.220+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:24:30.220+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:24:30.220+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:24:31.256+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:24:31.256+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:24:31.256+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:24:31.257+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:27:05.325+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:27:05.329+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:27:05.329+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:27:05.332+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:27:05.335+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:27:05.335+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:27:05.336+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:27:05.336+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:27:05.336+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:27:05.337+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:27:05.591+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:27:05.592+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:27:05.592+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:27:05.592+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:28:28.182+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:28:28.182+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:28.183+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:28.186+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:28:28.188+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:28:28.188+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:28:28.188+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:28:28.189+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:28:28.189+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:28:28.189+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:28:28.584+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:28:28.585+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:28.585+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:28.586+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:28:29.922+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:28:29.923+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:29.923+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:29.924+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:28:29.926+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:28:29.926+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:28:29.926+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:28:29.926+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:28:29.926+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:28:29.926+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:28:30.233+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:28:30.233+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:30.233+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:30.234+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:28:48.207+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:28:48.208+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:48.208+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:48.209+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:28:48.209+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:28:48.209+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:28:48.209+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:28:48.210+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:28:48.210+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:28:48.210+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:28:48.412+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:28:48.412+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:48.412+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:48.412+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:28:48.980+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:28:48.980+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:48.980+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:48.982+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:28:48.982+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:28:48.982+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:28:48.982+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:28:48.983+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:28:48.983+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:28:48.983+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:28:49.143+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:28:49.143+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:49.143+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:49.143+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:28:49.171+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:28:49.171+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:49.171+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:49.172+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:28:49.172+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:28:49.173+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:28:49.173+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:28:49.173+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:28:49.173+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:28:49.173+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:28:49.399+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:28:49.399+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:49.399+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:49.400+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:28:49.443+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:28:49.443+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:49.443+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:49.447+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:28:49.448+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:28:49.448+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:28:49.448+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:28:49.448+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:28:49.449+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:28:49.449+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:28:49.733+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:28:49.733+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:49.733+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:49.733+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:28:49.761+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:28:49.761+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:49.761+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:49.763+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:28:49.763+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:28:49.763+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:28:49.763+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:28:49.764+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:28:49.765+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:28:49.765+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:28:50.015+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:28:50.016+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:28:50.016+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:28:50.016+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:29:23.064+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:29:23.064+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:29:23.064+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:29:23.072+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:29:23.072+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:29:23.072+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:29:23.072+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:29:23.074+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:29:23.074+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:29:23.074+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:29:23.372+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:29:23.372+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:29:23.372+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:29:23.372+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:29:24.114+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:29:24.116+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:29:24.116+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:29:24.125+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:29:24.125+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:29:24.125+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:29:24.125+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:29:24.125+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:29:24.125+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:29:24.125+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:29:24.357+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:29:24.357+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:29:24.357+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:29:24.357+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:29:30.247+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:29:30.247+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:29:30.247+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:29:30.251+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:29:30.256+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:29:30.256+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:29:30.256+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:29:30.256+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:29:30.258+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=17970.00, itemDiscount=0, itemVat=3773.70, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=3773.70, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:29:30.258+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:29:31.346+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:29:31.346+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:29:31.346+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:29:31.346+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:29:33.213+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:29:33.213+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:29:33.213+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:29:33.213+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:29:33.494+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:29:33.494+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:29:33.497+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:29:33.497+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:29:34.551+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T00:29:34.551+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:29:34.551+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:29:34.551+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T00:29:34.848+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:29:34.848+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:29:34.848+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:29:34.850+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:10.334+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T00:30:10.334+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:10.334+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:10.334+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T00:30:10.514+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:30:10.514+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:10.514+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:10.514+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:11.343+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkty
2025-04-14T00:30:11.343+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:11.343+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:11.351+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do listProducts. Pageable: Page request [number: 0, size 9, sort: name: ASC]
2025-04-14T00:30:11.353+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProducts(Pageable: Page request [number: 0, size 9, sort: name: ASC]) <<<
2025-04-14T00:30:11.397+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.example.eshop.service.ProductService   : [ProductService] getActiveProducts(Pageable): Načtena stránka s 3 aktivními produkty.
2025-04-14T00:30:11.398+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProducts(Pageable) <<<
2025-04-14T00:30:11.398+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.ProductController   : [ProductController] ProductService.getActiveProducts vrátil stránku: TotalElements=3, TotalPages=1, Number=0, Size=9
2025-04-14T00:30:11.410+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.ProductController   : [ProductController] Hibernate.initialize(images) dokončeno pro 3 produktů na stránce.
2025-04-14T00:30:11.412+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím listProducts. Obsah modelu před vrácením 'produkty': {currentGlobalCurrency=CZK, productPage=Page 1 of 1 containing org.example.eshop.model.Product instances}
2025-04-14T00:30:11.555+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:30:11.555+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:11.555+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:11.555+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:12.972+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:30:12.973+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:12.973+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:12.973+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:13.233+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:30:13.233+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:13.233+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:13.233+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:13.916+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /registrace
2025-04-14T00:30:13.916+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:13.916+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:13.916+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.AuthController      : Displaying registration page
2025-04-14T00:30:14.088+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:30:14.088+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:14.088+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:14.088+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:21.704+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:30:21.704+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:21.704+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:21.704+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:21.981+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:30:21.981+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:21.981+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:21.981+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:22.994+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T00:30:22.994+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:22.994+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:22.994+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T00:30:23.388+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:30:23.392+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:23.392+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:23.392+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:33.626+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T00:30:33.626+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:33.626+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:33.628+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T00:30:34.055+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:30:34.055+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:34.055+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:34.055+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:38.823+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkty
2025-04-14T00:30:38.823+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:38.823+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:38.827+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do listProducts. Pageable: Page request [number: 0, size 9, sort: name: ASC]
2025-04-14T00:30:38.827+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProducts(Pageable: Page request [number: 0, size 9, sort: name: ASC]) <<<
2025-04-14T00:30:38.846+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.example.eshop.service.ProductService   : [ProductService] getActiveProducts(Pageable): Načtena stránka s 3 aktivními produkty.
2025-04-14T00:30:38.846+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProducts(Pageable) <<<
2025-04-14T00:30:38.846+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.ProductController   : [ProductController] ProductService.getActiveProducts vrátil stránku: TotalElements=3, TotalPages=1, Number=0, Size=9
2025-04-14T00:30:38.857+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.ProductController   : [ProductController] Hibernate.initialize(images) dokončeno pro 3 produktů na stránce.
2025-04-14T00:30:38.857+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím listProducts. Obsah modelu před vrácením 'produkty': {currentGlobalCurrency=CZK, productPage=Page 1 of 1 containing org.example.eshop.model.Product instances}
2025-04-14T00:30:39.073+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T00:30:39.074+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T00:30:39.074+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:39.074+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:39.074+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:39.074+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:39.094+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/placeholder-custom.png
2025-04-14T00:30:39.094+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:39.097+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:39.168+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:30:39.168+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "placeholder-custom.png"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:30:39.168+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:30:39.234+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T00:30:39.234+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]]
2025-04-14T00:30:39.234+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T00:30:39.394+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:30:39.394+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:39.394+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:39.394+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:41.043+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkt/modern
2025-04-14T00:30:41.043+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:41.044+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:41.046+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do productDetail. Slug: modern
2025-04-14T00:30:41.046+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProductBySlug. Slug: modern
2025-04-14T00:30:41.059+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.ProductService   : [ProductService] getActiveProductBySlug: Aktivní produkt se slugem 'modern' nalezen.
2025-04-14T00:30:41.059+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProductBySlug (Slug: modern) <<<
2025-04-14T00:30:41.059+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.ProductController   : [ProductController] Produkt ID 2 nalezen pro slug 'modern'.
2025-04-14T00:30:41.064+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.ProductController   : [ProductController] Inicializovány obrázky pro produkt ID 2
2025-04-14T00:30:41.065+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.ProductController   : [ProductController] Zpracovávám detail pro STANDARD produkt ID 2
2025-04-14T00:30:41.076+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.ProductController   : [ProductController] Inicializovány designy, lazury a barvy střech pro standardní produkt ID 2
2025-04-14T00:30:41.076+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím productDetail. Obsah modelu před vrácením 'produkt-detail-standard': {currentGlobalCurrency=CZK, product=org.example.eshop.model.Product@4e48994c, basePriceCZK=7490.00, basePriceEUR=310.00, availableDesigns=[org.example.eshop.model.Design@23, org.example.eshop.model.Design@22], availableGlazes=[org.example.eshop.model.Glaze@314e9701, org.example.eshop.model.Glaze@314e9701, org.example.eshop.model.Glaze@314e9701, org.example.eshop.model.Glaze@314e9701], availableRoofColors=[org.example.eshop.model.RoofColor@650884d7, org.example.eshop.model.RoofColor@650884d7, org.example.eshop.model.RoofColor@650884d7], cartItemDto=org.example.eshop.dto.CartItemDto@3408c2fc}
2025-04-14T00:30:41.299+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T00:30:41.299+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:41.299+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:41.303+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:30:41.308+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T00:30:41.575+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:30:41.576+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:41.576+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:41.576+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:43.511+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik/pridat
2025-04-14T00:30:43.511+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:43.511+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:43.576+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : --- addToCart START (Attribute Select Version) --- Cart instance hash: -1883155065
2025-04-14T00:30:43.576+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 2
2025-04-14T00:30:43.584+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 2 nalezen.
2025-04-14T00:30:43.584+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 2) <<<
2025-04-14T00:30:43.584+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Processing addToCart request for product ID: 2
2025-04-14T00:30:43.584+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : CartItemDto details: isCustom=false, quantity=1
2025-04-14T00:30:43.584+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Selected IDs: Design=4, Glaze=5, RoofColor=1
2025-04-14T00:30:43.584+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 2
2025-04-14T00:30:43.584+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 2 nalezen.
2025-04-14T00:30:43.588+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 2) <<<
2025-04-14T00:30:43.615+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Applied Tax Rate 21.00% for product ID 2
2025-04-14T00:30:43.615+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Calculated attribute surcharges: CZK=0, EUR=0
2025-04-14T00:30:43.615+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Using base price for standard product: CZK=7490.00, EUR=310.00
2025-04-14T00:30:43.615+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Final unit prices calculated (incl. attribute surcharges and addons): CZK=7490.00, EUR=310.00
2025-04-14T00:30:43.617+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Built variant info string for CartItem (ProductID: 2): 'Rozměry (DxHxV): 250x90x190 cm | Design: Modern Box | Lazura: Antracit | Střecha: Antracit'
2025-04-14T00:30:43.618+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Generated Cart Item ID: P2-S-D4-G5-RC1
2025-04-14T00:30:43.618+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] org.example.eshop.service.Cart           : addItem called for cart hash: 1722388482. Item ID: P2-S-D4-G5-RC1, Product ID: 2
2025-04-14T00:30:43.618+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] org.example.eshop.service.Cart           : Added new cart item ID: P2-S-D4-G5-RC1. Cart hash: 1722388482
2025-04-14T00:30:43.618+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] org.example.eshop.service.Cart           : Cart items map after addItem (hash: 1722388482): {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=3, taxRatePercent=0.21}, P2-S-D4-G5-RC1=CartItem{cartItemId='P2-S-D4-G5-RC1', productId=2, quantity=1, taxRatePercent=0.21}}
2025-04-14T00:30:43.627+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : --- addToCart END --- Item added/updated. Cart instance hash: -1883155065, Current cart items count: 2
2025-04-14T00:30:43.673+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik
2025-04-14T00:30:43.673+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:43.673+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:43.674+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : --- viewCart START --- Cart instance hash: -1883155065
2025-04-14T00:30:43.677+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Cart items before display: {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=3, taxRatePercent=0.21}, P2-S-D4-G5-RC1=CartItem{cartItemId='P2-S-D4-G5-RC1', productId=2, quantity=1, taxRatePercent=0.21}}
2025-04-14T00:30:43.677+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Displaying cart page. Cart has 2 items.
2025-04-14T00:30:43.678+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Current currency set to: CZK
2025-04-14T00:30:43.678+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Cart subtotal (CZK): 25460.00
2025-04-14T00:30:43.680+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Validated coupon: None, Discount amount (CZK): 0
2025-04-14T00:30:43.680+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Total VAT (CZK): 5346.60
2025-04-14T00:30:43.680+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : VAT Breakdown (CZK): {0.21=5346.60}
2025-04-14T00:30:43.682+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Total Price Before Shipping (CZK): 30806.60
2025-04-14T00:30:43.684+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Total Price Without Tax After Discount (CZK): 25460.00
2025-04-14T00:30:43.684+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : --- viewCart END --- Model attributes set for cart.
2025-04-14T00:30:43.844+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T00:30:43.844+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:43.844+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:43.846+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:30:43.849+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T00:30:43.854+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T00:30:43.854+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:43.854+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:43.854+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:30:43.861+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T00:30:44.088+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:30:44.088+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:44.088+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:44.088+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:46.084+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:30:46.084+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:46.084+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:46.084+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:30:46.084+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:30:46.084+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:30:46.084+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:30:46.087+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:30:46.087+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=25460.00, itemDiscount=0, itemVat=5346.60, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=5346.60, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:30:46.087+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:30:46.668+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:30:46.668+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:46.668+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:46.673+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:30:55.837+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:30:55.837+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:30:55.837+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:30:55.974+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:30:55.974+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:30:55.974+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:30:56.574+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:30:56.574+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=31806.53, finalTotalVat=5520.14
2025-04-14T00:31:13.306+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:31:13.309+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:31:13.309+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:31:13.314+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:31:13.316+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:31:13.316+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:31:13.382+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:31:13.382+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=31806.53, finalTotalVat=5520.14
2025-04-14T00:31:26.878+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:31:26.878+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:31:26.878+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:31:26.880+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:31:26.880+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:31:26.880+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:31:26.944+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:31:26.944+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=31806.53, finalTotalVat=5520.14
2025-04-14T00:32:06.427+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:32:06.428+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:06.428+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:06.444+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:32:06.445+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:32:06.445+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:32:06.445+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:32:06.446+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:32:06.446+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=25460.00, itemDiscount=0, itemVat=5346.60, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=5346.60, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:32:06.447+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:32:07.562+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:32:07.562+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:07.562+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:07.563+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:32:27.032+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T00:32:27.032+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:27.032+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:27.032+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T00:32:27.286+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:32:27.286+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:27.286+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:27.287+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:32:28.948+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkty
2025-04-14T00:32:28.948+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:28.948+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:28.948+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do listProducts. Pageable: Page request [number: 0, size 9, sort: name: ASC]
2025-04-14T00:32:28.948+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProducts(Pageable: Page request [number: 0, size 9, sort: name: ASC]) <<<
2025-04-14T00:32:28.967+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.example.eshop.service.ProductService   : [ProductService] getActiveProducts(Pageable): Načtena stránka s 3 aktivními produkty.
2025-04-14T00:32:28.967+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProducts(Pageable) <<<
2025-04-14T00:32:28.967+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.ProductController   : [ProductController] ProductService.getActiveProducts vrátil stránku: TotalElements=3, TotalPages=1, Number=0, Size=9
2025-04-14T00:32:28.974+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.ProductController   : [ProductController] Hibernate.initialize(images) dokončeno pro 3 produktů na stránce.
2025-04-14T00:32:28.974+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím listProducts. Obsah modelu před vrácením 'produkty': {currentGlobalCurrency=CZK, productPage=Page 1 of 1 containing org.example.eshop.model.Product instances}
2025-04-14T00:32:29.101+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T00:32:29.101+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:29.101+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:29.103+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T00:32:29.103+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:29.103+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:29.103+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/placeholder-custom.png
2025-04-14T00:32:29.106+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:29.106+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:29.103+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:32:29.107+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:32:29.107+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T00:32:29.107+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "placeholder-custom.png"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:32:29.114+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T00:32:29.114+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]]
2025-04-14T00:32:29.240+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:32:29.240+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:29.241+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:29.241+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:32:30.343+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkt/klasik
2025-04-14T00:32:30.343+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:30.343+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:30.345+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do productDetail. Slug: klasik
2025-04-14T00:32:30.345+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProductBySlug. Slug: klasik
2025-04-14T00:32:30.353+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : [ProductService] getActiveProductBySlug: Aktivní produkt se slugem 'klasik' nalezen.
2025-04-14T00:32:30.353+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProductBySlug (Slug: klasik) <<<
2025-04-14T00:32:30.353+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : [ProductController] Produkt ID 1 nalezen pro slug 'klasik'.
2025-04-14T00:32:30.356+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : [ProductController] Inicializovány obrázky pro produkt ID 1
2025-04-14T00:32:30.356+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : [ProductController] Zpracovávám detail pro STANDARD produkt ID 1
2025-04-14T00:32:30.363+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : [ProductController] Inicializovány designy, lazury a barvy střech pro standardní produkt ID 1
2025-04-14T00:32:30.365+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím productDetail. Obsah modelu před vrácením 'produkt-detail-standard': {currentGlobalCurrency=CZK, product=org.example.eshop.model.Product@401871eb, basePriceCZK=5990.00, basePriceEUR=250.00, availableDesigns=[org.example.eshop.model.Design@20, org.example.eshop.model.Design@21], availableGlazes=[org.example.eshop.model.Glaze@314e9701, org.example.eshop.model.Glaze@314e9701, org.example.eshop.model.Glaze@314e9701], availableRoofColors=[org.example.eshop.model.RoofColor@650884d7, org.example.eshop.model.RoofColor@650884d7, org.example.eshop.model.RoofColor@650884d7], cartItemDto=org.example.eshop.dto.CartItemDto@436573b7}
2025-04-14T00:32:30.584+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T00:32:30.584+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:30.584+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:30.590+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:32:30.601+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T00:32:30.669+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:32:30.669+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:30.669+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:30.669+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:32:32.727+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik/pridat
2025-04-14T00:32:32.727+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:32.727+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:32.727+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : --- addToCart START (Attribute Select Version) --- Cart instance hash: -1883155065
2025-04-14T00:32:32.733+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 1
2025-04-14T00:32:32.740+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 1 nalezen.
2025-04-14T00:32:32.740+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 1) <<<
2025-04-14T00:32:32.741+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : Processing addToCart request for product ID: 1
2025-04-14T00:32:32.741+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : CartItemDto details: isCustom=false, quantity=1
2025-04-14T00:32:32.741+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : Selected IDs: Design=1, Glaze=3, RoofColor=1
2025-04-14T00:32:32.744+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 1
2025-04-14T00:32:32.744+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 1 nalezen.
2025-04-14T00:32:32.744+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 1) <<<
2025-04-14T00:32:32.769+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : Applied Tax Rate 21.00% for product ID 1
2025-04-14T00:32:32.769+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : Calculated attribute surcharges: CZK=0, EUR=0
2025-04-14T00:32:32.770+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : Using base price for standard product: CZK=5990.00, EUR=250.00
2025-04-14T00:32:32.770+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : Final unit prices calculated (incl. attribute surcharges and addons): CZK=5990.00, EUR=250.00
2025-04-14T00:32:32.770+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : Built variant info string for CartItem (ProductID: 1): 'Rozměry (DxHxV): 200x80x180 cm | Design: Klasik | Lazura: Bezbarvý lak | Střecha: Antracit'
2025-04-14T00:32:32.770+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : Generated Cart Item ID: P1-S-D1-G3-RC1
2025-04-14T00:32:32.770+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] org.example.eshop.service.Cart           : addItem called for cart hash: 1722388482. Item ID: P1-S-D1-G3-RC1, Product ID: 1
2025-04-14T00:32:32.770+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] org.example.eshop.service.Cart           : Increased quantity for cart item ID: P1-S-D1-G3-RC1 to 4. Cart hash: 1722388482
2025-04-14T00:32:32.770+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] org.example.eshop.service.Cart           : Cart items map after addItem (hash: 1722388482): {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=4, taxRatePercent=0.21}, P2-S-D4-G5-RC1=CartItem{cartItemId='P2-S-D4-G5-RC1', productId=2, quantity=1, taxRatePercent=0.21}}
2025-04-14T00:32:32.771+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : --- addToCart END --- Item added/updated. Cart instance hash: -1883155065, Current cart items count: 2
2025-04-14T00:32:32.793+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik
2025-04-14T00:32:32.793+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:32.794+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:32.795+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : --- viewCart START --- Cart instance hash: -1883155065
2025-04-14T00:32:32.795+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Cart items before display: {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=4, taxRatePercent=0.21}, P2-S-D4-G5-RC1=CartItem{cartItemId='P2-S-D4-G5-RC1', productId=2, quantity=1, taxRatePercent=0.21}}
2025-04-14T00:32:32.795+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Displaying cart page. Cart has 2 items.
2025-04-14T00:32:32.795+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Current currency set to: CZK
2025-04-14T00:32:32.796+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Cart subtotal (CZK): 31450.00
2025-04-14T00:32:32.796+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Validated coupon: None, Discount amount (CZK): 0
2025-04-14T00:32:32.797+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Total VAT (CZK): 6604.50
2025-04-14T00:32:32.797+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : VAT Breakdown (CZK): {0.21=6604.50}
2025-04-14T00:32:32.797+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Total Price Before Shipping (CZK): 38054.50
2025-04-14T00:32:32.797+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Total Price Without Tax After Discount (CZK): 31450.00
2025-04-14T00:32:32.797+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : --- viewCart END --- Model attributes set for cart.
2025-04-14T00:32:32.944+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T00:32:32.944+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:32.944+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:32.945+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T00:32:32.948+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:32.948+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:32.945+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:32:32.951+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T00:32:32.950+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:32:32.955+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T00:32:33.023+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:32:33.023+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:33.023+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:33.027+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:32:34.870+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:32:34.871+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:34.871+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:34.873+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:32:34.873+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:32:34.873+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:32:34.874+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:32:34.874+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:32:34.874+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=31450.00, itemDiscount=0, itemVat=6604.50, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=6604.50, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:32:34.874+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:32:35.256+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:32:35.256+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:35.256+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:35.257+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:32:48.393+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:32:48.401+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:48.403+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:48.409+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:32:48.409+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:32:48.409+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:32:48.615+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:32:48.620+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=39054.43, finalTotalVat=6778.04
2025-04-14T00:32:50.775+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:32:50.775+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:32:50.775+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:32:50.782+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:32:50.782+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:32:50.782+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:32:50.846+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:32:50.846+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=39054.43, finalTotalVat=6778.04
2025-04-14T00:34:25.360+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:34:25.360+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:34:25.360+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:34:25.362+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:34:25.362+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:34:25.362+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:34:25.362+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:34:25.363+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:34:25.363+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=31450.00, itemDiscount=0, itemVat=6604.50, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=6604.50, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:34:25.363+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:34:25.837+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:34:25.837+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:34:25.837+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:34:25.837+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:34:52.175+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:34:52.177+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:34:52.177+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:34:52.187+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:34:52.189+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:34:52.189+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:34:52.372+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:34:52.373+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=39054.43, finalTotalVat=6778.04
2025-04-14T00:39:04.960+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:39:04.960+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:39:04.960+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:39:04.965+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:39:04.966+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:39:04.966+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:39:04.966+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:39:04.966+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:39:04.966+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=31450.00, itemDiscount=0, itemVat=6604.50, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=6604.50, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:39:04.966+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:39:06.075+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:39:06.075+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:39:06.075+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:39:06.076+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:39:31.932+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:39:31.936+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:39:31.936+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:39:31.942+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Chrudim, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:39:31.942+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:39:31.942+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Chrudim, 53803, Česká republika'
2025-04-14T00:39:32.186+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:39:32.186+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=39054.43, finalTotalVat=6778.04
2025-04-14T00:39:40.659+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:39:40.659+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:39:40.659+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:39:40.664+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Chrudim, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:39:40.665+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:39:40.665+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Chrudim, 53803, Česká republika'
2025-04-14T00:39:40.726+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:39:40.726+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=39054.43, finalTotalVat=6778.04
2025-04-14T00:39:49.862+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:39:49.862+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:39:49.862+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:39:49.864+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Chrudim, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:39:49.864+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:39:49.864+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Chrudim, 53803, Česká republika'
2025-04-14T00:39:49.937+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:39:49.937+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=39054.43, finalTotalVat=6778.04
2025-04-14T00:40:02.909+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:40:02.909+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:40:02.910+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:40:02.913+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:40:02.913+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:40:02.913+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:40:02.978+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:40:02.978+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=39054.43, finalTotalVat=6778.04
2025-04-14T00:40:15.817+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/odeslat
2025-04-14T00:40:15.819+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:40:15.819+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:40:15.912+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Processing checkout submission for guest: mirsvobo@gmail.com in currency: CZK
2025-04-14T00:40:15.936+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Guest validation invoked. Errors after guest validation: false
2025-04-14T00:40:15.936+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Getting or creating guest customer.
2025-04-14T00:40:15.938+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.CustomerService  : Attempting to get or create guest customer for email: mirsvobo@gmail.com
2025-04-14T00:40:15.950+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.CustomerService  : Creating new guest customer record for email: mirsvobo@gmail.com
2025-04-14T00:40:15.950+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.CustomerService  : Setting invoice name/lastname from main contact for customer ID (new).
2025-04-14T00:40:15.974+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.CustomerService  : Guest customer created successfully with ID: 3
2025-04-14T00:40:15.974+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Invalid or missing shipping costs submitted (ShippingRequired=true). CostNoTax: null, Tax: null
2025-04-14T00:40:15.974+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Validation or processing error during checkout for mirsvobo@gmail.com: Missing or invalid shipping costs.
2025-04-14T00:40:15.974+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Preparing model for rendering checkout page after form error. Currency: CZK
2025-04-14T00:40:15.974+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:40:15.976+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:40:15.976+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=31450.00, itemDiscount=0, itemVat=6604.50, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=6604.50, shippingError='Zkontrolujte chyby ve formuláři a znovu vypočítejte dopravu.'
2025-04-14T00:40:15.976+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Model prepared for error view. Shipping error state indicated.
2025-04-14T00:40:16.432+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:40:16.434+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:40:16.434+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:40:16.434+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:40:24.425+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:40:24.425+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:40:24.425+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:40:24.432+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:40:24.432+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:40:24.432+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:40:24.483+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:40:24.483+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=39054.43, finalTotalVat=6778.04
2025-04-14T00:40:44.165+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:40:44.165+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:40:44.165+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:40:44.173+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:40:44.175+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:40:44.175+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:40:44.260+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:40:44.260+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=39054.43, finalTotalVat=6778.04
2025-04-14T00:40:45.125+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:40:45.125+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:40:45.125+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:40:45.132+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:40:45.132+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:40:45.132+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:40:45.174+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:40:45.174+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=39054.43, finalTotalVat=6778.04
2025-04-14T00:44:25.866+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/odeslat
2025-04-14T00:44:25.866+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:25.867+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:25.874+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Processing checkout submission for guest: mirsvobo@gmail.com in currency: CZK
2025-04-14T00:44:25.875+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Guest validation invoked. Errors after guest validation: false
2025-04-14T00:44:25.876+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Getting or creating guest customer.
2025-04-14T00:44:25.876+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.CustomerService  : Attempting to get or create guest customer for email: mirsvobo@gmail.com
2025-04-14T00:44:25.889+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.CustomerService  : Found existing guest account for email mirsvobo@gmail.com, updating details.
2025-04-14T00:44:25.889+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.CustomerService  : Setting invoice name/lastname from main contact for customer ID 3.
2025-04-14T00:44:25.890+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Invalid or missing shipping costs submitted (ShippingRequired=true). CostNoTax: null, Tax: null
2025-04-14T00:44:25.890+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Validation or processing error during checkout for mirsvobo@gmail.com: Missing or invalid shipping costs.
2025-04-14T00:44:25.890+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Preparing model for rendering checkout page after form error. Currency: CZK
2025-04-14T00:44:25.890+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:44:25.892+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:44:25.892+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=31450.00, itemDiscount=0, itemVat=6604.50, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=6604.50, shippingError='Zkontrolujte chyby ve formuláři a znovu vypočítejte dopravu.'
2025-04-14T00:44:25.892+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Model prepared for error view. Shipping error state indicated.
2025-04-14T00:44:27.152+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:44:27.152+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:27.153+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:27.154+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:44:28.325+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:44:28.325+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:28.325+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:28.328+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:44:28.328+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:44:28.328+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:44:28.506+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:44:28.507+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=39054.43, finalTotalVat=6778.04
2025-04-14T00:44:36.745+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/odeslat
2025-04-14T00:44:36.745+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:36.745+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:36.754+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Processing checkout submission for guest: mirsvobo@gmail.com in currency: CZK
2025-04-14T00:44:36.754+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Guest validation invoked. Errors after guest validation: false
2025-04-14T00:44:36.754+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Getting or creating guest customer.
2025-04-14T00:44:36.754+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.CustomerService  : Attempting to get or create guest customer for email: mirsvobo@gmail.com
2025-04-14T00:44:36.761+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.CustomerService  : Found existing guest account for email mirsvobo@gmail.com, updating details.
2025-04-14T00:44:36.761+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.CustomerService  : Setting invoice name/lastname from main contact for customer ID 3.
2025-04-14T00:44:36.761+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Invalid or missing shipping costs submitted (ShippingRequired=true). CostNoTax: null, Tax: null
2025-04-14T00:44:36.761+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Validation or processing error during checkout for mirsvobo@gmail.com: Missing or invalid shipping costs.
2025-04-14T00:44:36.761+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Preparing model for rendering checkout page after form error. Currency: CZK
2025-04-14T00:44:36.761+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:44:36.761+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:44:36.761+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=31450.00, itemDiscount=0, itemVat=6604.50, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=6604.50, shippingError='Zkontrolujte chyby ve formuláři a znovu vypočítejte dopravu.'
2025-04-14T00:44:36.761+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Model prepared for error view. Shipping error state indicated.
2025-04-14T00:44:37.453+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:44:37.453+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:37.453+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:37.453+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:44:40.106+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/odeslat
2025-04-14T00:44:40.111+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:40.111+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:40.117+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Processing checkout submission for guest: mirsvobo@gmail.com in currency: CZK
2025-04-14T00:44:40.117+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Guest validation invoked. Errors after guest validation: false
2025-04-14T00:44:40.117+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Getting or creating guest customer.
2025-04-14T00:44:40.117+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.CustomerService  : Attempting to get or create guest customer for email: mirsvobo@gmail.com
2025-04-14T00:44:40.121+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.CustomerService  : Found existing guest account for email mirsvobo@gmail.com, updating details.
2025-04-14T00:44:40.121+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.CustomerService  : Setting invoice name/lastname from main contact for customer ID 3.
2025-04-14T00:44:40.121+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Invalid or missing shipping costs submitted (ShippingRequired=true). CostNoTax: null, Tax: null
2025-04-14T00:44:40.121+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Validation or processing error during checkout for mirsvobo@gmail.com: Missing or invalid shipping costs.
2025-04-14T00:44:40.121+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Preparing model for rendering checkout page after form error. Currency: CZK
2025-04-14T00:44:40.121+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:44:40.121+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:44:40.121+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=31450.00, itemDiscount=0, itemVat=6604.50, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=6604.50, shippingError='Zkontrolujte chyby ve formuláři a znovu vypočítejte dopravu.'
2025-04-14T00:44:40.121+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Model prepared for error view. Shipping error state indicated.
2025-04-14T00:44:40.533+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:44:40.533+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:40.533+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:40.535+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:44:41.784+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T00:44:41.784+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:41.784+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:41.784+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T00:44:41.962+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:44:41.962+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:41.962+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:41.962+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:44:43.181+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkty
2025-04-14T00:44:43.181+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:43.181+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:43.185+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do listProducts. Pageable: Page request [number: 0, size 9, sort: name: ASC]
2025-04-14T00:44:43.188+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProducts(Pageable: Page request [number: 0, size 9, sort: name: ASC]) <<<
2025-04-14T00:44:43.206+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] getActiveProducts(Pageable): Načtena stránka s 3 aktivními produkty.
2025-04-14T00:44:43.207+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProducts(Pageable) <<<
2025-04-14T00:44:43.207+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] ProductService.getActiveProducts vrátil stránku: TotalElements=3, TotalPages=1, Number=0, Size=9
2025-04-14T00:44:43.212+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Hibernate.initialize(images) dokončeno pro 3 produktů na stránce.
2025-04-14T00:44:43.212+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím listProducts. Obsah modelu před vrácením 'produkty': {currentGlobalCurrency=CZK, productPage=Page 1 of 1 containing org.example.eshop.model.Product instances}
2025-04-14T00:44:43.335+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T00:44:43.337+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:43.337+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:43.346+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/placeholder-custom.png
2025-04-14T00:44:43.346+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T00:44:43.349+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:43.349+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:43.349+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:43.349+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:43.346+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:44:43.357+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T00:44:43.353+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:44:43.353+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "placeholder-custom.png"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:44:43.366+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T00:44:43.367+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]]
2025-04-14T00:44:43.452+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:44:43.452+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:43.452+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:43.452+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:44:44.793+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkt/klasik
2025-04-14T00:44:44.794+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:44.794+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:44.796+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do productDetail. Slug: klasik
2025-04-14T00:44:44.797+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProductBySlug. Slug: klasik
2025-04-14T00:44:44.807+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.example.eshop.service.ProductService   : [ProductService] getActiveProductBySlug: Aktivní produkt se slugem 'klasik' nalezen.
2025-04-14T00:44:44.807+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProductBySlug (Slug: klasik) <<<
2025-04-14T00:44:44.808+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.ProductController   : [ProductController] Produkt ID 1 nalezen pro slug 'klasik'.
2025-04-14T00:44:44.811+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.ProductController   : [ProductController] Inicializovány obrázky pro produkt ID 1
2025-04-14T00:44:44.812+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.ProductController   : [ProductController] Zpracovávám detail pro STANDARD produkt ID 1
2025-04-14T00:44:44.828+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.ProductController   : [ProductController] Inicializovány designy, lazury a barvy střech pro standardní produkt ID 1
2025-04-14T00:44:44.829+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím productDetail. Obsah modelu před vrácením 'produkt-detail-standard': {currentGlobalCurrency=CZK, product=org.example.eshop.model.Product@39ad9d46, basePriceCZK=5990.00, basePriceEUR=250.00, availableDesigns=[org.example.eshop.model.Design@20, org.example.eshop.model.Design@21], availableGlazes=[org.example.eshop.model.Glaze@314e9701, org.example.eshop.model.Glaze@314e9701, org.example.eshop.model.Glaze@314e9701], availableRoofColors=[org.example.eshop.model.RoofColor@650884d7, org.example.eshop.model.RoofColor@650884d7, org.example.eshop.model.RoofColor@650884d7], cartItemDto=org.example.eshop.dto.CartItemDto@3c898c98}
2025-04-14T00:44:45.021+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T00:44:45.021+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:45.021+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:45.023+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:44:45.027+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T00:44:45.114+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:44:45.114+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:45.114+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:45.114+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:44:45.931+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik/pridat
2025-04-14T00:44:45.931+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:45.935+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:45.943+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : --- addToCart START (Attribute Select Version) --- Cart instance hash: -1883155065
2025-04-14T00:44:45.946+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 1
2025-04-14T00:44:45.949+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 1 nalezen.
2025-04-14T00:44:45.949+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 1) <<<
2025-04-14T00:44:45.950+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Processing addToCart request for product ID: 1
2025-04-14T00:44:45.950+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : CartItemDto details: isCustom=false, quantity=1
2025-04-14T00:44:45.951+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Selected IDs: Design=1, Glaze=3, RoofColor=1
2025-04-14T00:44:45.951+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 1
2025-04-14T00:44:45.952+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 1 nalezen.
2025-04-14T00:44:45.952+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 1) <<<
2025-04-14T00:44:45.961+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Applied Tax Rate 21.00% for product ID 1
2025-04-14T00:44:45.961+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Calculated attribute surcharges: CZK=0, EUR=0
2025-04-14T00:44:45.961+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Using base price for standard product: CZK=5990.00, EUR=250.00
2025-04-14T00:44:45.961+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Final unit prices calculated (incl. attribute surcharges and addons): CZK=5990.00, EUR=250.00
2025-04-14T00:44:45.961+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Built variant info string for CartItem (ProductID: 1): 'Rozměry (DxHxV): 200x80x180 cm | Design: Klasik | Lazura: Bezbarvý lak | Střecha: Antracit'
2025-04-14T00:44:45.967+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Generated Cart Item ID: P1-S-D1-G3-RC1
2025-04-14T00:44:45.967+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.Cart           : addItem called for cart hash: 1722388482. Item ID: P1-S-D1-G3-RC1, Product ID: 1
2025-04-14T00:44:45.967+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.Cart           : Increased quantity for cart item ID: P1-S-D1-G3-RC1 to 5. Cart hash: 1722388482
2025-04-14T00:44:45.967+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.Cart           : Cart items map after addItem (hash: 1722388482): {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=5, taxRatePercent=0.21}, P2-S-D4-G5-RC1=CartItem{cartItemId='P2-S-D4-G5-RC1', productId=2, quantity=1, taxRatePercent=0.21}}
2025-04-14T00:44:45.968+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : --- addToCart END --- Item added/updated. Cart instance hash: -1883155065, Current cart items count: 2
2025-04-14T00:44:45.981+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik
2025-04-14T00:44:45.981+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:45.981+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:45.981+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : --- viewCart START --- Cart instance hash: -1883155065
2025-04-14T00:44:45.981+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Cart items before display: {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=5, taxRatePercent=0.21}, P2-S-D4-G5-RC1=CartItem{cartItemId='P2-S-D4-G5-RC1', productId=2, quantity=1, taxRatePercent=0.21}}
2025-04-14T00:44:45.981+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Displaying cart page. Cart has 2 items.
2025-04-14T00:44:45.981+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Current currency set to: CZK
2025-04-14T00:44:45.981+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Cart subtotal (CZK): 37440.00
2025-04-14T00:44:45.981+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Validated coupon: None, Discount amount (CZK): 0
2025-04-14T00:44:45.981+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Total VAT (CZK): 7862.40
2025-04-14T00:44:45.981+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : VAT Breakdown (CZK): {0.21=7862.40}
2025-04-14T00:44:45.981+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Total Price Before Shipping (CZK): 45302.40
2025-04-14T00:44:45.981+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Total Price Without Tax After Discount (CZK): 37440.00
2025-04-14T00:44:45.981+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : --- viewCart END --- Model attributes set for cart.
2025-04-14T00:44:46.089+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T00:44:46.091+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:46.091+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:46.091+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T00:44:46.091+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:46.091+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:46.091+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:44:46.097+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T00:44:46.097+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T00:44:46.103+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T00:44:46.161+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:44:46.161+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:46.161+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:46.161+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:44:47.945+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:44:47.945+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:47.945+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:47.950+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:44:47.951+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:44:47.951+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:44:47.951+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:44:47.951+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:44:47.955+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=7862.40, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:44:47.955+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:44:48.341+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:44:48.341+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:44:48.341+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:44:48.341+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:45:09.374+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:45:09.374+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:45:09.374+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:45:09.379+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:45:09.380+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:45:09.381+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:45:09.448+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:45:09.448+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=46302.33, finalTotalVat=8035.94
2025-04-14T00:48:20.903+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:48:20.904+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:48:20.904+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:48:20.908+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:48:20.908+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:48:20.908+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:48:20.908+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:48:20.909+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:48:20.909+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=7862.40, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:48:20.909+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:48:21.450+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:48:21.451+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:48:21.451+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:48:21.451+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:48:36.452+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:48:36.452+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:48:36.452+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:48:36.457+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:48:36.459+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:48:36.459+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:48:36.673+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:48:36.673+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=46302.33, finalTotalVat=8035.94
2025-04-14T00:54:35.796+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:54:35.797+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:54:35.797+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:54:35.801+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:54:35.801+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:54:35.801+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:54:35.801+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:54:35.803+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:54:35.803+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=7862.40, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:54:35.803+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:54:36.373+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:54:36.374+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:54:36.374+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:54:36.374+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:54:47.755+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:54:47.756+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:54:47.756+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:54:47.761+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:54:47.764+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:54:47.764+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:54:47.932+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:54:47.932+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=46302.33, finalTotalVat=8035.94
2025-04-14T00:59:20.483+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T00:59:20.483+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:59:20.484+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:59:20.486+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T00:59:20.487+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T00:59:20.487+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T00:59:20.487+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T00:59:20.487+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T00:59:20.488+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=7862.40, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T00:59:20.488+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T00:59:21.196+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T00:59:21.197+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:59:21.197+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:59:21.197+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T00:59:28.321+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T00:59:28.321+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T00:59:28.321+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T00:59:28.323+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T00:59:28.325+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T00:59:28.325+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T00:59:28.505+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T00:59:28.505+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=46302.33, finalTotalVat=8035.94
2025-04-14T01:00:54.223+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:00:54.223+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:00:54.223+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:00:54.228+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T01:00:54.228+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T01:00:54.228+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:00:54.228+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:00:54.229+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T01:00:54.229+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=7862.40, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T01:00:54.229+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T01:00:54.728+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T01:00:54.729+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:00:54.729+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:00:54.729+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T01:00:59.315+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T01:00:59.315+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:00:59.317+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:00:59.317+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T01:00:59.578+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T01:00:59.578+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:00:59.578+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:00:59.578+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T01:01:00.938+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.service.CustomUserDetailsService   : Attempting to load user by email: admin@example.com
2025-04-14T01:01:00.955+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.service.CustomUserDetailsService   : User found: admin@example.com, Enabled: true, Roles: [ROLE_USER, ROLE_ADMIN]
2025-04-14T01:01:01.311+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T01:01:01.311+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:01:01.311+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:01:01.311+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T01:01:01.562+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2025-04-14T01:01:02.717+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik
2025-04-14T01:01:02.717+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:01:02.717+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:01:02.718+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : --- viewCart START --- Cart instance hash: -1883155065
2025-04-14T01:01:02.718+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Cart items before display: {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=5, taxRatePercent=0.21}, P2-S-D4-G5-RC1=CartItem{cartItemId='P2-S-D4-G5-RC1', productId=2, quantity=1, taxRatePercent=0.21}}
2025-04-14T01:01:02.718+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Displaying cart page. Cart has 2 items.
2025-04-14T01:01:02.720+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Current currency set to: CZK
2025-04-14T01:01:02.720+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Cart subtotal (CZK): 37440.00
2025-04-14T01:01:02.720+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Validated coupon: None, Discount amount (CZK): 0
2025-04-14T01:01:02.720+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Total VAT (CZK): 7862.40
2025-04-14T01:01:02.720+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : VAT Breakdown (CZK): {0.21=7862.40}
2025-04-14T01:01:02.722+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Total Price Before Shipping (CZK): 45302.40
2025-04-14T01:01:02.722+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : Total Price Without Tax After Discount (CZK): 37440.00
2025-04-14T01:01:02.722+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CartController      : --- viewCart END --- Model attributes set for cart.
2025-04-14T01:01:02.899+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T01:01:02.900+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:01:02.900+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:01:02.909+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T01:01:02.920+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T01:01:02.941+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T01:01:02.941+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:01:02.941+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:01:02.945+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T01:01:02.951+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T01:01:04.800+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:01:04.800+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:01:04.800+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:01:04.802+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T01:01:04.810+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:01:04.811+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:01:04.811+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:01:04.811+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:01:05.040+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:01:05.040+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:01:05.040+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=46522.09, roundedTotalPrice=46522, roundingDifference=0.09
2025-04-14T01:01:05.040+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=46522.09, roundingDiff=0.09, finalRoundedTotal=46522, totalVatWithShip=8074.08, shippingError='null'
2025-04-14T01:01:05.042+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T01:01:07.408+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:01:07.408+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:01:07.408+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:01:07.413+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T01:01:07.413+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:01:07.413+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:01:07.475+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:01:07.475+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1008.01, origTax=211.68, shipDiscount=0, finalCost=1008.01, finalTax=211.68, finalTotal=46522.09, finalTotalVat=8074.08
2025-04-14T01:01:17.618+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /nastavit-menu
2025-04-14T01:01:17.620+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:01:17.620+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:01:17.622+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CurrencyController  : Request received to set currency to: EUR
2025-04-14T01:01:17.624+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.CurrencyService  : Session currency changed to: EUR
2025-04-14T01:01:17.626+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CurrencyController  : Redirecting back to referrer: http://localhost:8080/pokladna
2025-04-14T01:01:17.660+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:01:17.660+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: EUR
2025-04-14T01:01:17.660+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: EUR
2025-04-14T01:01:17.662+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: EUR
2025-04-14T01:01:17.672+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:01:17.672+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:01:17.672+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency EUR
2025-04-14T01:01:17.673+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:01:17.731+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 40.32 EUR (Distance: 33.9 km)
2025-04-14T01:01:17.731+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: EUR
2025-04-14T01:01:17.732+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=1936.39, roundedTotalPrice=1936, roundingDifference=0.39
2025-04-14T01:01:17.732+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=1560.00, itemDiscount=0, itemVat=327.60, origShipCost=40.32, shipDiscount=0, finalShipCost=40.32, finalShipTax=8.47, originalTotal=1936.39, roundingDiff=0.39, finalRoundedTotal=1936, totalVatWithShip=336.07, shippingError='null'
2025-04-14T01:01:17.732+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: EUR
2025-04-14T01:01:19.834+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:01:19.834+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: EUR
2025-04-14T01:01:19.835+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: EUR
2025-04-14T01:01:19.838+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency EUR
2025-04-14T01:01:19.839+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency EUR
2025-04-14T01:01:19.839+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:01:19.892+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 40.32 EUR (Distance: 33.9 km)
2025-04-14T01:01:19.892+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=40.32, origTax=8.47, shipDiscount=0, finalCost=40.32, finalTax=8.47, finalTotal=1936.39, finalTotalVat=336.07
2025-04-14T01:01:25.578+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /nastavit-menu
2025-04-14T01:01:25.578+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: EUR
2025-04-14T01:01:25.578+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: EUR
2025-04-14T01:01:25.578+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CurrencyController  : Request received to set currency to: CZK
2025-04-14T01:01:25.578+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.CurrencyService  : Session currency changed to: CZK
2025-04-14T01:01:25.578+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CurrencyController  : Redirecting back to referrer: http://localhost:8080/pokladna
2025-04-14T01:01:25.603+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:01:25.603+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:01:25.603+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:01:25.608+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T01:01:25.612+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:01:25.614+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:01:25.614+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:01:25.614+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:01:25.658+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:01:25.658+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:01:25.658+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=46522.09, roundedTotalPrice=46522, roundingDifference=0.09
2025-04-14T01:01:25.658+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=46522.09, roundingDiff=0.09, finalRoundedTotal=46522, totalVatWithShip=8074.08, shippingError='null'
2025-04-14T01:01:25.658+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T01:01:28.064+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:01:28.064+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:01:28.064+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:01:28.070+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T01:01:28.072+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:01:28.072+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:01:28.126+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:01:28.128+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1008.01, origTax=211.68, shipDiscount=0, finalCost=1008.01, finalTax=211.68, finalTotal=46522.09, finalTotalVat=8074.08
2025-04-14T01:08:42.810+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:08:42.811+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:08:42.812+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:08:42.815+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T01:08:42.826+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:08:42.826+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:08:42.826+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:08:42.827+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:08:43.029+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:08:43.029+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:08:43.030+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=46522.09, roundedTotalPrice=46522, roundingDifference=0.09
2025-04-14T01:08:43.030+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=46522.09, roundingDiff=0.09, finalRoundedTotal=46522, totalVatWithShip=8074.08, shippingError='null'
2025-04-14T01:08:43.030+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T01:08:47.953+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:08:47.953+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:08:47.953+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:08:47.958+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T01:08:47.958+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:08:47.958+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:08:48.016+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:08:48.016+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1008.01, origTax=211.68, shipDiscount=0, finalCost=1008.01, finalTax=211.68, finalTotal=46522.09, finalTotalVat=8074.08
2025-04-14T01:10:43.286+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:10:43.286+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:10:43.286+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:10:43.290+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T01:10:43.304+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:10:43.304+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:10:43.304+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:10:43.304+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:10:43.476+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:10:43.476+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:10:43.477+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=46522.09, roundedTotalPrice=46522, roundingDifference=0.09
2025-04-14T01:10:43.477+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=46522.09, roundingDiff=0.09, finalRoundedTotal=46522, totalVatWithShip=8074.08, shippingError='null'
2025-04-14T01:10:43.478+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T01:10:45.920+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:10:45.921+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:10:45.921+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:10:45.924+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T01:10:45.924+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:10:45.924+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:10:45.966+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:10:45.967+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1008.01, origTax=211.68, shipDiscount=0, finalCost=1008.01, finalTax=211.68, finalTotal=46522.09, finalTotalVat=8074.08
2025-04-14T01:15:16.387+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:15:16.387+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:15:16.387+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:15:16.388+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T01:15:16.401+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:15:16.401+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:15:16.401+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:15:16.401+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:15:16.589+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:15:16.589+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:15:16.589+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=46522.09, roundedTotalPrice=46522, roundingDifference=0.09
2025-04-14T01:15:16.589+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=46522.09, roundingDiff=0.09, finalRoundedTotal=46522, totalVatWithShip=8074.08, shippingError='null'
2025-04-14T01:15:16.589+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T01:15:21.397+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:15:21.397+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:15:21.397+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:15:21.402+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T01:15:21.402+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:15:21.402+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:15:21.461+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:15:21.462+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1008.01, origTax=211.68, shipDiscount=0, finalCost=1008.01, finalTax=211.68, finalTotal=46522.09, finalTotalVat=8074.08
2025-04-14T01:17:00.396+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:17:00.396+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:17:00.396+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:17:00.396+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T01:17:00.405+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:17:00.405+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:17:00.405+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:17:00.405+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:17:00.592+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:17:00.592+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:17:00.592+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=46522.09, roundedTotalPrice=46522, roundingDifference=0.09
2025-04-14T01:17:00.592+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=46522.09, roundingDiff=0.09, finalRoundedTotal=46522, totalVatWithShip=8074.08, shippingError='null'
2025-04-14T01:17:00.601+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T01:17:05.371+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:17:05.371+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:17:05.371+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:17:05.371+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T01:17:05.371+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:17:05.371+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:17:05.422+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:17:05.422+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1008.01, origTax=211.68, shipDiscount=0, finalCost=1008.01, finalTax=211.68, finalTotal=46522.09, finalTotalVat=8074.08
2025-04-14T01:18:31.405+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:18:31.409+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:18:31.409+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:18:31.410+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T01:18:31.418+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:18:31.418+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:18:31.418+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:18:31.418+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:18:31.625+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:18:31.628+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:18:31.628+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=46522.09, roundedTotalPrice=46522, roundingDifference=0.09
2025-04-14T01:18:31.628+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=46522.09, roundingDiff=0.09, finalRoundedTotal=46522, totalVatWithShip=8074.08, shippingError='null'
2025-04-14T01:18:31.628+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T01:18:34.360+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:18:34.360+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:18:34.360+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:18:34.363+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T01:18:34.363+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:18:34.363+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:18:34.423+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:18:34.423+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1008.01, origTax=211.68, shipDiscount=0, finalCost=1008.01, finalTax=211.68, finalTotal=46522.09, finalTotalVat=8074.08
2025-04-14T01:19:23.819+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:19:23.820+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:19:23.820+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:19:23.820+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T01:19:23.830+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:19:23.830+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:19:23.830+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:19:23.830+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:19:23.901+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:19:23.901+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:19:23.901+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=46522.09, roundedTotalPrice=46522, roundingDifference=0.09
2025-04-14T01:19:23.901+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=46522.09, roundingDiff=0.09, finalRoundedTotal=46522, totalVatWithShip=8074.08, shippingError='null'
2025-04-14T01:19:23.901+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T01:19:28.973+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:19:28.973+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:19:28.973+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:19:28.976+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T01:19:28.979+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:19:28.979+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:19:29.038+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:19:29.038+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1008.01, origTax=211.68, shipDiscount=0, finalCost=1008.01, finalTax=211.68, finalTotal=46522.09, finalTotalVat=8074.08
2025-04-14T01:20:43.130+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:20:43.130+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:20:43.130+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:20:43.131+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T01:20:43.150+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:20:43.150+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:20:43.150+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:20:43.150+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:20:43.324+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:20:43.324+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:20:43.324+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=46522.09, roundedTotalPrice=46522, roundingDifference=0.09
2025-04-14T01:20:43.324+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=46522.09, roundingDiff=0.09, finalRoundedTotal=46522, totalVatWithShip=8074.08, shippingError='null'
2025-04-14T01:20:43.324+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T01:20:47.877+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:20:47.877+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:20:47.877+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:20:47.881+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T01:20:47.881+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:20:47.881+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:20:47.927+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:20:47.927+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1008.01, origTax=211.68, shipDiscount=0, finalCost=1008.01, finalTax=211.68, finalTotal=46522.09, finalTotalVat=8074.08
2025-04-14T01:22:25.938+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:22:25.939+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:22:25.939+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:22:25.941+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T01:22:25.952+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:22:25.952+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:22:25.952+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:22:25.952+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:22:26.188+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:22:26.188+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:22:26.188+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=46522.09, roundedTotalPrice=46522, roundingDifference=0.09
2025-04-14T01:22:26.189+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=46522.09, roundingDiff=0.09, finalRoundedTotal=46522, totalVatWithShip=8074.08, shippingError='null'
2025-04-14T01:22:26.189+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T01:22:30.139+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:22:30.139+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:22:30.139+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:22:30.145+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T01:22:30.146+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:22:30.147+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:22:30.191+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:22:30.191+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1008.01, origTax=211.68, shipDiscount=0, finalCost=1008.01, finalTax=211.68, finalTotal=46522.09, finalTotalVat=8074.08
2025-04-14T01:23:21.535+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:23:21.535+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:23:21.535+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:23:21.538+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T01:23:21.545+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:23:21.545+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:23:21.545+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:23:21.545+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:23:21.617+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:23:21.617+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:23:21.617+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=46522.09, roundedTotalPrice=46522, roundingDifference=0.09
2025-04-14T01:23:21.625+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=46522.09, roundingDiff=0.09, finalRoundedTotal=46522, totalVatWithShip=8074.08, shippingError='null'
2025-04-14T01:23:21.625+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T01:23:25.684+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:23:25.684+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:23:25.684+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:23:25.684+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T01:23:25.684+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:23:25.684+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:23:25.752+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:23:25.752+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1008.01, origTax=211.68, shipDiscount=0, finalCost=1008.01, finalTax=211.68, finalTotal=46522.09, finalTotalVat=8074.08
2025-04-14T01:23:49.589+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:23:49.589+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:23:49.589+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:23:49.589+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T01:23:49.599+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:23:49.599+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:23:49.599+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:23:49.599+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:23:49.652+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:23:49.652+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:23:49.652+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=46522.09, roundedTotalPrice=46522, roundingDifference=0.09
2025-04-14T01:23:49.652+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=46522.09, roundingDiff=0.09, finalRoundedTotal=46522, totalVatWithShip=8074.08, shippingError='null'
2025-04-14T01:23:49.652+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T01:23:50.487+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2025-04-14T01:23:54.480+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:23:54.481+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:23:54.481+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:23:54.487+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T01:23:54.489+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:23:54.489+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:23:54.590+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:23:54.590+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1008.01, origTax=211.68, shipDiscount=0, finalCost=1008.01, finalTax=211.68, finalTotal=46522.09, finalTotalVat=8074.08
2025-04-14T01:26:37.537+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T01:26:37.537+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:26:37.537+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:26:37.554+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T01:26:37.560+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T01:26:37.560+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T01:26:37.560+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:26:37.560+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:26:37.710+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:26:37.710+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T01:26:37.710+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=46522.09, roundedTotalPrice=46522, roundingDifference=0.09
2025-04-14T01:26:37.710+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=37440.00, itemDiscount=0, itemVat=7862.40, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=46522.09, roundingDiff=0.09, finalRoundedTotal=46522, totalVatWithShip=8074.08, shippingError='null'
2025-04-14T01:26:37.710+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T01:26:39.982+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T01:26:39.982+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:26:39.982+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:26:39.990+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Hlavní Město, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T01:26:39.990+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T01:26:39.990+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T01:26:40.037+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T01:26:40.037+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1008.01, origTax=211.68, shipDiscount=0, finalCost=1008.01, finalTax=211.68, finalTotal=46522.09, finalTotalVat=8074.08
2025-04-14T01:26:50.124+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T01:26:50.124+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:26:50.124+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:26:50.124+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T01:26:51.492+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik
2025-04-14T01:26:51.492+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:26:51.492+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:26:51.492+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : --- viewCart START --- Cart instance hash: -1883155065
2025-04-14T01:26:51.492+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Cart items before display: {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=5, taxRatePercent=0.21}, P2-S-D4-G5-RC1=CartItem{cartItemId='P2-S-D4-G5-RC1', productId=2, quantity=1, taxRatePercent=0.21}}
2025-04-14T01:26:51.495+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Displaying cart page. Cart has 2 items.
2025-04-14T01:26:51.495+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Current currency set to: CZK
2025-04-14T01:26:51.495+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Cart subtotal (CZK): 37440.00
2025-04-14T01:26:51.495+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Validated coupon: None, Discount amount (CZK): 0
2025-04-14T01:26:51.495+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Total VAT (CZK): 7862.40
2025-04-14T01:26:51.495+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : VAT Breakdown (CZK): {0.21=7862.40}
2025-04-14T01:26:51.495+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Total Price Before Shipping (CZK): 45302.40
2025-04-14T01:26:51.495+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Total Price Without Tax After Discount (CZK): 37440.00
2025-04-14T01:26:51.495+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : --- viewCart END --- Model attributes set for cart.
2025-04-14T01:26:51.649+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T01:26:51.649+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:26:51.649+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:26:51.657+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T01:26:51.657+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:26:51.657+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:26:51.655+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T01:26:51.663+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T01:26:51.661+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T01:26:51.669+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T01:26:53.962+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik/pouzit-kupon
2025-04-14T01:26:53.962+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:26:53.962+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:26:53.968+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : --- applyCoupon START --- Cart instance hash: -1883155065
2025-04-14T01:26:53.970+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : Attempting to apply coupon code: test10
2025-04-14T01:26:53.972+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-10] o.example.eshop.service.CouponService    : Finding coupon by code (case-insensitive): 'TEST10'
2025-04-14T01:26:53.998+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.CartController      : Coupon code 'test10' not found.
2025-04-14T01:26:54.016+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik
2025-04-14T01:26:54.020+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:26:54.020+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:26:54.020+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CartController      : --- viewCart START --- Cart instance hash: -1883155065
2025-04-14T01:26:54.020+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CartController      : Cart items before display: {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=5, taxRatePercent=0.21}, P2-S-D4-G5-RC1=CartItem{cartItemId='P2-S-D4-G5-RC1', productId=2, quantity=1, taxRatePercent=0.21}}
2025-04-14T01:26:54.020+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CartController      : Displaying cart page. Cart has 2 items.
2025-04-14T01:26:54.020+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CartController      : Current currency set to: CZK
2025-04-14T01:26:54.020+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CartController      : Cart subtotal (CZK): 37440.00
2025-04-14T01:26:54.020+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CartController      : Validated coupon: None, Discount amount (CZK): 0
2025-04-14T01:26:54.020+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CartController      : Total VAT (CZK): 7862.40
2025-04-14T01:26:54.020+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CartController      : VAT Breakdown (CZK): {0.21=7862.40}
2025-04-14T01:26:54.020+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CartController      : Total Price Before Shipping (CZK): 45302.40
2025-04-14T01:26:54.020+02:00 DEBUG 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CartController      : Total Price Without Tax After Discount (CZK): 37440.00
2025-04-14T01:26:54.020+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CartController      : --- viewCart END --- Model attributes set for cart.
2025-04-14T01:26:54.135+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T01:26:54.135+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:26:54.135+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:26:54.140+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T01:26:54.145+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T01:26:54.145+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T01:26:54.145+02:00  INFO 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T01:26:54.145+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T01:26:54.145+02:00 ERROR 18304 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T01:26:54.154+02:00  WARN 18304 --- [Eshop] [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T01:27:09.113+02:00  INFO 18304 --- [Eshop] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-04-14T01:27:09.126+02:00  INFO 18304 --- [Eshop] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-04-14T01:27:09.142+02:00  INFO 18304 --- [Eshop] [SpringApplicationShutdownHook] o.e.e.service.GoogleMapsShippingService  : Shutting down Google Maps API context.
2025-04-14T01:27:09.147+02:00  INFO 18304 --- [Eshop] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T01:27:10.603+02:00  INFO 18304 --- [Eshop] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-14T01:27:10.618+02:00  INFO 18304 --- [Eshop] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-14T14:17:07.497+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Starting EshopApplication using Java 21.0.6 with PID 13356 (C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop\target\classes started by mirsv in C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop)
2025-04-14T14:17:07.501+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Running with Spring Boot v3.4.4, Spring v6.2.5
2025-04-14T14:17:07.507+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : No active profile set, falling back to 1 default profile: "default"
2025-04-14T14:17:08.632+02:00  INFO 13356 --- [Eshop] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-14T14:17:08.634+02:00  INFO 13356 --- [Eshop] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-14T14:17:13.175+02:00  INFO 13356 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-14T14:17:13.651+02:00  INFO 13356 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 415 ms. Found 14 JPA repository interfaces.
2025-04-14T14:17:17.245+02:00  INFO 13356 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-04-14T14:17:17.285+02:00  INFO 13356 --- [Eshop] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-04-14T14:17:17.285+02:00  INFO 13356 --- [Eshop] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-04-14T14:17:17.491+02:00  INFO 13356 --- [Eshop] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-04-14T14:17:17.495+02:00  INFO 13356 --- [Eshop] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 8860 ms
2025-04-14T14:17:18.909+02:00  INFO 13356 --- [Eshop] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-14T14:17:19.117+02:00  INFO 13356 --- [Eshop] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-04-14T14:17:19.239+02:00  INFO 13356 --- [Eshop] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-14T14:17:20.362+02:00  INFO 13356 --- [Eshop] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-14T14:17:20.466+02:00  INFO 13356 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-14T14:17:20.892+02:00  INFO 13356 --- [Eshop] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.mariadb.jdbc.Connection@66ba269b
2025-04-14T14:17:20.896+02:00  INFO 13356 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-14T14:17:21.139+02:00  INFO 13356 --- [Eshop] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 11.7.2
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-04-14T14:17:26.089+02:00  INFO 13356 --- [Eshop] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-14T14:17:29.170+02:00  INFO 13356 --- [Eshop] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T14:17:29.960+02:00  INFO 13356 --- [Eshop] [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-14T14:17:30.770+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Initializing Google Maps API context...
2025-04-14T14:17:31.364+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Google Maps API context initialized successfully.
2025-04-14T14:17:31.364+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Origin coordinates set to: 50.03500389,15.49180022
2025-04-14T14:17:31.401+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Initializing order code counter...
2025-04-14T14:17:31.794+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : No existing numeric-like order codes found in database.
2025-04-14T14:17:31.795+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Order code counter initialized to: 205
2025-04-14T14:17:32.853+02:00  WARN 13356 --- [Eshop] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-14T14:17:33.877+02:00  INFO 13356 --- [Eshop] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-04-14T14:17:34.115+02:00  INFO 13356 --- [Eshop] [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-04-14T14:17:35.352+02:00  INFO 13356 --- [Eshop] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-04-14T14:17:38.044+02:00  INFO 13356 --- [Eshop] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-04-14T14:17:38.293+02:00  INFO 13356 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-04-14T14:17:38.336+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Started EshopApplication in 32.828 seconds (process running for 36.379)
2025-04-14T14:17:38.392+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Initializing test data...
2025-04-14T14:17:39.059+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Tax Rates...
2025-04-14T14:17:39.175+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Order States...
2025-04-14T14:17:39.220+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Email Template Configs...
2025-04-14T14:17:39.494+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik
2025-04-14T14:17:39.504+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik Plus
2025-04-14T14:17:39.521+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Simple
2025-04-14T14:17:39.526+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Box
2025-04-14T14:17:39.547+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Ořech
2025-04-14T14:17:39.567+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Palisandr
2025-04-14T14:17:39.580+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Bezbarvý lak
2025-04-14T14:17:39.586+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Šedá lazura
2025-04-14T14:17:39.597+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Antracit
2025-04-14T14:17:39.606+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak
2025-04-14T14:17:39.615+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak Premium
2025-04-14T14:17:39.626+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Antracit
2025-04-14T14:17:39.636+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Červená
2025-04-14T14:17:39.646+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Zelená
2025-04-14T14:17:39.656+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná
2025-04-14T14:17:39.671+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná metalická
2025-04-14T14:17:39.679+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Polička navíc
2025-04-14T14:17:39.696+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Držák na nářadí
2025-04-14T14:17:39.709+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Starý doplněk
2025-04-14T14:17:39.744+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Klasik
2025-04-14T14:17:39.860+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Modern
2025-04-14T14:17:39.866+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník na míru
2025-04-14T14:17:39.875+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating new configurator for product ID: 3
2025-04-14T14:17:39.875+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Updating existing configurator for product ID: 3
2025-04-14T14:17:40.307+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating admin user: admin@example.com
2025-04-14T14:17:40.331+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating test orders...
2025-04-14T14:17:40.331+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T14:17:40.331+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T14:17:40.331+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T14:17:40.357+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T14:17:40.357+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T14:17:40.357+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T14:17:40.357+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T14:17:40.357+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T14:17:40.357+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T14:17:40.357+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 1
2025-04-14T14:17:40.357+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 1
2025-04-14T14:17:40.382+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T14:17:40.385+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 1)
2025-04-14T14:17:40.388+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Klasik | Lazura: Ořech | Střecha: Antracit
2025-04-14T14:17:40.388+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 5990.00
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 5990.00
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 5990.00
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 1257.90
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 7247.90
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=5990.00, TotalTaxAmount=1257.90, TotalPriceWithTax=7247.90
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=5990.00, TaxAmount=1257.90
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 5990.00, Running Item Tax: 1257.90
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 5990.00, Final Item Tax: 1257.90
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=6490.00, TotalTax=1362.90, OriginalTotalWithTax=7852.90, RoundedTotalToSave=7852
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T14:17:40.406+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T14:17:40.411+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T14:17:40.411+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T14:17:40.411+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 206
2025-04-14T14:17:40.411+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 206
2025-04-14T14:17:40.411+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T14:17:40.430+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 206 created successfully. Total: 7852 CZK
2025-04-14T14:17:40.430+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 206...
2025-04-14T14:17:40.436+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 206 (Total: 7852 CZK)
2025-04-14T14:17:40.437+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in EUR
2025-04-14T14:17:40.437+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: EUR
2025-04-14T14:17:40.437+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: EUR
2025-04-14T14:17:40.447+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: EUR
2025-04-14T14:17:40.447+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T14:17:40.447+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T14:17:40.447+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T14:17:40.447+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T14:17:40.447+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: EUR
2025-04-14T14:17:40.447+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 3
2025-04-14T14:17:40.447+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 3
2025-04-14T14:17:40.454+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T14:17:40.454+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 3)
2025-04-14T14:17:40.454+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Na míru|Rozměry (DxHxV): 350x120x210 cm|Příčka: Ano
2025-04-14T14:17:40.455+02:00  INFO 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: EUR
2025-04-14T14:17:40.455+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (EUR): 1623.60
2025-04-14T14:17:40.455+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (EUR): 0.00
2025-04-14T14:17:40.455+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for divider (EUR): 62.40
2025-04-14T14:17:40.455+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (EUR, fixed): 0.00
2025-04-14T14:17:40.455+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (EUR, fixed): 0.00
2025-04-14T14:17:40.455+02:00  INFO 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: EUR. Vypočtená cena: 1686.00
2025-04-14T14:17:40.455+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 1686.00
2025-04-14T14:17:40.469+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 1686.00
2025-04-14T14:17:40.469+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing addons for OrderItem (Product ID: 3), Currency: EUR
2025-04-14T14:17:40.476+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Requested addon IDs: [1, 2]
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Found addons from DB: [1, 2]
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Allowed addon IDs for this product: [1, 2]
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=1, Name=Polička navíc
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (EUR): 15.00
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (EUR): 30.00
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=2, Name=Držák na nářadí
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (EUR): 20.00
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (EUR): 20.00
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished processing addons. Total addon price (EUR): 50.00
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 50.00
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 1736.00
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 364.56
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 2100.56
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=1736.00, TotalTaxAmount=364.56, TotalPriceWithTax=2100.56
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=1736.00, TaxAmount=364.56
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 1736.00, Running Item Tax: 364.56
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 1736.00, Final Item Tax: 364.56
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: EUR
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 25.00, Tax: 5.25, Estimated Rate: 0.2100
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: EUR
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=1761.00, TotalTax=369.81, OriginalTotalWithTax=2130.81, RoundedTotalToSave=2130
2025-04-14T14:17:40.505+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: EUR
2025-04-14T14:17:40.510+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null contains custom product. Calculating potential deposit.
2025-04-14T14:17:40.510+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 2130 is 1065.00
2025-04-14T14:17:40.510+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 1000
2025-04-14T14:17:40.510+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 1000.00
2025-04-14T14:17:40.510+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Deposit required for order null. Status set to AWAITING_DEPOSIT.
2025-04-14T14:17:40.510+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 2130 is 1065.00
2025-04-14T14:17:40.510+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 1000
2025-04-14T14:17:40.510+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 1000.00
2025-04-14T14:17:40.510+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Deposit amount 1000.00 EUR calculated for custom order (new).
2025-04-14T14:17:40.510+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: AWAITING_DEPOSIT, Deposit Amount: 1000.00
2025-04-14T14:17:40.510+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 207
2025-04-14T14:17:40.510+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 207
2025-04-14T14:17:40.512+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T14:17:40.529+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 207 created successfully. Total: 2130 EUR
2025-04-14T14:17:40.529+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 207...
2025-04-14T14:17:40.529+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 11] Triggering proforma invoice generation for order 207. Currency: EUR
2025-04-14T14:17:40.556+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Non-critical error generating proforma invoice for order 207: Order not found: 2. Order creation continues.

jakarta.persistence.EntityNotFoundException: Order not found: 2
	at org.example.eshop.service.SuperFakturaInvoiceService.lambda$reloadOrder$2(SuperFakturaInvoiceService.java:289) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.reloadOrder(SuperFakturaInvoiceService.java:289) ~[classes/:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.generateProformaInvoice(SuperFakturaInvoiceService.java:76) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$1.generateProformaInvoice(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$0.generateProformaInvoice(<generated>) ~[classes/:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:348) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:191) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T14:17:40.577+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 207 (Total: 2130 EUR)
2025-04-14T14:17:40.578+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer admin@example.com with 1 items in CZK
2025-04-14T14:17:40.579+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 2 with explicit currency: CZK
2025-04-14T14:17:40.579+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T14:17:40.598+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T14:17:40.598+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 2 to order.
2025-04-14T14:17:40.600+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Admin Eshopu
2025-04-14T14:17:40.600+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T14:17:40.600+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T14:17:40.600+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T14:17:40.600+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 2
2025-04-14T14:17:40.600+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 2
2025-04-14T14:17:40.604+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 500.00
2025-04-14T14:17:40.604+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 2)
2025-04-14T14:17:40.606+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Modern Simple | Lazura: Teak Premium | Střecha: Stříbrná metalická
2025-04-14T14:17:40.606+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 7490.00
2025-04-14T14:17:40.611+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 7490.00
2025-04-14T14:17:40.616+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T14:17:40.617+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 7990.00
2025-04-14T14:17:40.617+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 1677.90
2025-04-14T14:17:40.617+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 9667.90
2025-04-14T14:17:40.617+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=15980.00, TotalTaxAmount=3355.80, TotalPriceWithTax=19335.80
2025-04-14T14:17:40.617+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=15980.00, TaxAmount=3355.80
2025-04-14T14:17:40.617+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 15980.00, Running Item Tax: 3355.80
2025-04-14T14:17:40.618+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 15980.00, Final Item Tax: 3355.80
2025-04-14T14:17:40.618+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T14:17:40.618+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T14:17:40.619+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T14:17:40.619+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=16480.00, TotalTax=3460.80, OriginalTotalWithTax=19940.80, RoundedTotalToSave=19940
2025-04-14T14:17:40.619+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T14:17:40.619+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T14:17:40.619+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T14:17:40.619+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T14:17:40.619+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T14:17:40.619+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 208
2025-04-14T14:17:40.619+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 208
2025-04-14T14:17:40.619+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T14:17:40.628+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 208 created successfully. Total: 19940 CZK
2025-04-14T14:17:40.628+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 208...
2025-04-14T14:17:40.630+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 208 (Total: 19940 CZK)
2025-04-14T14:17:40.630+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updating order 208 to PAID and state PROCESSING (SF API calls might be triggered if active)
2025-04-14T14:17:40.638+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updated order 208 to PAID and state PROCESSING (bypassed SF calls)
2025-04-14T14:17:40.638+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T14:17:40.638+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T14:17:40.640+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T14:17:40.662+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T14:17:40.662+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T14:17:40.662+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T14:17:40.662+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T14:17:40.664+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T14:17:40.664+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T14:17:40.665+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 3
2025-04-14T14:17:40.665+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 3
2025-04-14T14:17:40.666+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T14:17:40.667+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 3)
2025-04-14T14:17:40.667+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Na míru|Rozměry (DxHxV): 280x90x195 cm|Okap: Ano
2025-04-14T14:17:40.667+02:00  INFO 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: CZK
2025-04-14T14:17:40.667+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (CZK): 32700.00
2025-04-14T14:17:40.667+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (CZK): 0.00
2025-04-14T14:17:40.667+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for divider (CZK): 0.00
2025-04-14T14:17:40.667+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (CZK, fixed): 1000.00
2025-04-14T14:17:40.667+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (CZK, fixed): 0.00
2025-04-14T14:17:40.667+02:00  INFO 13356 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: CZK. Vypočtená cena: 33700.00
2025-04-14T14:17:40.667+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 33700.00
2025-04-14T14:17:40.676+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 33700.00
2025-04-14T14:17:40.676+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing addons for OrderItem (Product ID: 3), Currency: CZK
2025-04-14T14:17:40.676+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Requested addon IDs: [1]
2025-04-14T14:17:40.685+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Found addons from DB: [1]
2025-04-14T14:17:40.685+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Allowed addon IDs for this product: [1, 2]
2025-04-14T14:17:40.685+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=1, Name=Polička navíc
2025-04-14T14:17:40.685+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (CZK): 350.00
2025-04-14T14:17:40.685+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (CZK): 350.00
2025-04-14T14:17:40.685+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished processing addons. Total addon price (CZK): 350.00
2025-04-14T14:17:40.685+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 350.00
2025-04-14T14:17:40.685+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 34050.00
2025-04-14T14:17:40.685+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 7150.50
2025-04-14T14:17:40.685+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 41200.50
2025-04-14T14:17:40.685+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=34050.00, TotalTaxAmount=7150.50, TotalPriceWithTax=41200.50
2025-04-14T14:17:40.685+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=34050.00, TaxAmount=7150.50
2025-04-14T14:17:40.688+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 34050.00, Running Item Tax: 7150.50
2025-04-14T14:17:40.688+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 34050.00, Final Item Tax: 7150.50
2025-04-14T14:17:40.688+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T14:17:40.688+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T14:17:40.688+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T14:17:40.688+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=34550.00, TotalTax=7255.50, OriginalTotalWithTax=41805.50, RoundedTotalToSave=41805
2025-04-14T14:17:40.688+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T14:17:40.690+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null contains custom product. Calculating potential deposit.
2025-04-14T14:17:40.691+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 41805 is 20902.50
2025-04-14T14:17:40.691+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 20000
2025-04-14T14:17:40.691+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 20000.00
2025-04-14T14:17:40.691+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Deposit required for order null. Status set to AWAITING_DEPOSIT.
2025-04-14T14:17:40.691+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 41805 is 20902.50
2025-04-14T14:17:40.691+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 20000
2025-04-14T14:17:40.691+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 20000.00
2025-04-14T14:17:40.691+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Deposit amount 20000.00 CZK calculated for custom order (new).
2025-04-14T14:17:40.691+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: AWAITING_DEPOSIT, Deposit Amount: 20000.00
2025-04-14T14:17:40.693+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 209
2025-04-14T14:17:40.693+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 209
2025-04-14T14:17:40.693+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T14:17:40.706+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 209 created successfully. Total: 41805 CZK
2025-04-14T14:17:40.708+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 209...
2025-04-14T14:17:40.710+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 11] Triggering proforma invoice generation for order 209. Currency: CZK
2025-04-14T14:17:40.715+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Non-critical error generating proforma invoice for order 209: Order not found: 4. Order creation continues.

jakarta.persistence.EntityNotFoundException: Order not found: 4
	at org.example.eshop.service.SuperFakturaInvoiceService.lambda$reloadOrder$2(SuperFakturaInvoiceService.java:289) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.reloadOrder(SuperFakturaInvoiceService.java:289) ~[classes/:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.generateProformaInvoice(SuperFakturaInvoiceService.java:76) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$1.generateProformaInvoice(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$0.generateProformaInvoice(<generated>) ~[classes/:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:348) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:236) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T14:17:40.722+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 209 (Total: 41805 CZK)
2025-04-14T14:17:40.722+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updating order 209 to DEPOSIT_PAID and state IN_PRODUCTION (SF API calls might be triggered if active)
2025-04-14T14:17:40.724+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updated order 209 to DEPOSIT_PAID and state IN_PRODUCTION (bypassed SF calls)
2025-04-14T14:17:40.725+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Test data initialization finished successfully.
2025-04-14T14:17:41.059+02:00 ERROR 13356 --- [Eshop] [task-1] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-1] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:17:41.059+02:00 ERROR 13356 --- [Eshop] [task-3] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-3] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:17:41.059+02:00 ERROR 13356 --- [Eshop] [task-2] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-2] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:17:41.059+02:00 ERROR 13356 --- [Eshop] [task-4] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-4] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:17:41.067+02:00 ERROR 13356 --- [Eshop] [task-1] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 206: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:17:41.067+02:00 ERROR 13356 --- [Eshop] [task-3] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 208: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:17:41.069+02:00 ERROR 13356 --- [Eshop] [task-2] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 207: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:17:41.070+02:00 ERROR 13356 --- [Eshop] [task-4] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 209: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:17:41.475+02:00  INFO 13356 --- [Eshop] [RMI TCP Connection(2)-192.168.1.157] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-14T14:17:41.478+02:00  INFO 13356 --- [Eshop] [RMI TCP Connection(2)-192.168.1.157] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-04-14T14:17:41.487+02:00  INFO 13356 --- [Eshop] [RMI TCP Connection(2)-192.168.1.157] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2025-04-14T14:18:54.001+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T14:18:54.037+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:18:54.037+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:18:54.041+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T14:18:57.169+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T14:18:57.170+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:18:57.171+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:18:57.171+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T14:18:58.809+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkty
2025-04-14T14:18:58.809+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:18:58.809+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:18:58.820+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do listProducts. Pageable: Page request [number: 0, size 9, sort: name: ASC]
2025-04-14T14:18:58.820+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProducts(Pageable: Page request [number: 0, size 9, sort: name: ASC]) <<<
2025-04-14T14:18:58.866+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : [ProductService] getActiveProducts(Pageable): Načtena stránka s 3 aktivními produkty.
2025-04-14T14:18:58.866+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProducts(Pageable) <<<
2025-04-14T14:18:58.866+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : [ProductController] ProductService.getActiveProducts vrátil stránku: TotalElements=3, TotalPages=1, Number=0, Size=9
2025-04-14T14:18:58.882+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : [ProductController] Hibernate.initialize(images) dokončeno pro 3 produktů na stránce.
2025-04-14T14:18:58.882+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím listProducts. Obsah modelu před vrácením 'produkty': {currentGlobalCurrency=CZK, productPage=Page 1 of 1 containing org.example.eshop.model.Product instances}
2025-04-14T14:18:59.137+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T14:18:59.137+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/placeholder-custom.png
2025-04-14T14:18:59.137+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T14:18:59.137+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:18:59.137+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:18:59.137+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:18:59.137+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:18:59.137+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:18:59.137+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:18:59.215+02:00 ERROR 13356 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "placeholder-custom.png"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:18:59.215+02:00 ERROR 13356 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:18:59.215+02:00 ERROR 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:18:59.265+02:00  WARN 13356 --- [Eshop] [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T14:18:59.265+02:00  WARN 13356 --- [Eshop] [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T14:18:59.265+02:00  WARN 13356 --- [Eshop] [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]]
2025-04-14T14:18:59.441+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T14:18:59.442+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:18:59.442+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:18:59.442+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T14:19:00.981+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkt/klasik
2025-04-14T14:19:00.981+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:19:00.981+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:19:00.990+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do productDetail. Slug: klasik
2025-04-14T14:19:00.990+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProductBySlug. Slug: klasik
2025-04-14T14:19:00.998+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] getActiveProductBySlug: Aktivní produkt se slugem 'klasik' nalezen.
2025-04-14T14:19:00.998+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProductBySlug (Slug: klasik) <<<
2025-04-14T14:19:00.998+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Produkt ID 1 nalezen pro slug 'klasik'.
2025-04-14T14:19:00.998+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Inicializovány obrázky pro produkt ID 1
2025-04-14T14:19:00.998+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Zpracovávám detail pro STANDARD produkt ID 1
2025-04-14T14:19:01.006+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Inicializovány designy, lazury a barvy střech pro standardní produkt ID 1
2025-04-14T14:19:01.006+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím productDetail. Obsah modelu před vrácením 'produkt-detail-standard': {currentGlobalCurrency=CZK, product=org.example.eshop.model.Product@516863cc, basePriceCZK=5990.00, basePriceEUR=250.00, availableDesigns=[org.example.eshop.model.Design@20, org.example.eshop.model.Design@21], availableGlazes=[org.example.eshop.model.Glaze@becc65, org.example.eshop.model.Glaze@becc65, org.example.eshop.model.Glaze@becc65], availableRoofColors=[org.example.eshop.model.RoofColor@5c7c528e, org.example.eshop.model.RoofColor@5c7c528e, org.example.eshop.model.RoofColor@5c7c528e], cartItemDto=org.example.eshop.dto.CartItemDto@1fc95c42}
2025-04-14T14:19:01.169+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T14:19:01.169+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:19:01.169+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:19:01.173+02:00 ERROR 13356 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:19:01.177+02:00  WARN 13356 --- [Eshop] [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T14:19:01.265+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T14:19:01.265+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:19:01.265+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:19:01.265+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T14:19:02.501+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik/pridat
2025-04-14T14:19:02.501+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:19:02.507+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:19:02.560+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CartController      : --- addToCart START (Attribute Select Version) --- Cart instance hash: -166239835
2025-04-14T14:19:02.560+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 1
2025-04-14T14:19:02.563+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 1 nalezen.
2025-04-14T14:19:02.563+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 1) <<<
2025-04-14T14:19:02.566+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CartController      : Processing addToCart request for product ID: 1
2025-04-14T14:19:02.567+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CartController      : CartItemDto details: isCustom=false, quantity=1
2025-04-14T14:19:02.567+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CartController      : Selected IDs: Design=1, Glaze=3, RoofColor=1
2025-04-14T14:19:02.567+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 1
2025-04-14T14:19:02.567+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 1 nalezen.
2025-04-14T14:19:02.567+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 1) <<<
2025-04-14T14:19:02.575+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CartController      : Applied Tax Rate 21.00% for product ID 1
2025-04-14T14:19:02.575+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CartController      : Calculated attribute surcharges: CZK=0, EUR=0
2025-04-14T14:19:02.575+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CartController      : Using base price for standard product: CZK=5990.00, EUR=250.00
2025-04-14T14:19:02.575+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CartController      : Final unit prices calculated (incl. attribute surcharges and addons): CZK=5990.00, EUR=250.00
2025-04-14T14:19:02.575+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CartController      : Built variant info string for CartItem (ProductID: 1): 'Rozměry (DxHxV): 200x80x180 cm | Design: Klasik | Lazura: Bezbarvý lak | Střecha: Antracit'
2025-04-14T14:19:02.575+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CartController      : Generated Cart Item ID: P1-S-D1-G3-RC1
2025-04-14T14:19:02.583+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-8] org.example.eshop.service.Cart           : addItem called for cart hash: 385628689. Item ID: P1-S-D1-G3-RC1, Product ID: 1
2025-04-14T14:19:02.583+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-8] org.example.eshop.service.Cart           : Added new cart item ID: P1-S-D1-G3-RC1. Cart hash: 385628689
2025-04-14T14:19:02.583+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-8] org.example.eshop.service.Cart           : Cart items map after addItem (hash: 385628689): {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=1, taxRatePercent=0.21}}
2025-04-14T14:19:02.583+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CartController      : --- addToCart END --- Item added/updated. Cart instance hash: -166239835, Current cart items count: 1
2025-04-14T14:19:02.608+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik
2025-04-14T14:19:02.608+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:19:02.608+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:19:02.609+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : --- viewCart START --- Cart instance hash: -166239835
2025-04-14T14:19:02.609+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Cart items before display: {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=1, taxRatePercent=0.21}}
2025-04-14T14:19:02.609+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Displaying cart page. Cart has 1 items.
2025-04-14T14:19:02.609+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Current currency set to: CZK
2025-04-14T14:19:02.609+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Cart subtotal (CZK): 5990.00
2025-04-14T14:19:02.609+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Validated coupon: None, Discount amount (CZK): 0
2025-04-14T14:19:02.609+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Total VAT (CZK): 1257.90
2025-04-14T14:19:02.609+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : VAT Breakdown (CZK): {0.21=1257.90}
2025-04-14T14:19:02.609+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Total Price Before Shipping (CZK): 7247.90
2025-04-14T14:19:02.609+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Total Price Without Tax After Discount (CZK): 5990.00
2025-04-14T14:19:02.609+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : --- viewCart END --- Model attributes set for cart.
2025-04-14T14:19:02.724+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T14:19:02.724+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:19:02.724+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:19:02.728+02:00 ERROR 13356 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:19:02.734+02:00  WARN 13356 --- [Eshop] [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T14:19:02.832+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T14:19:02.832+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:19:02.832+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:19:02.832+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T14:19:04.317+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T14:19:04.317+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:19:04.317+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:19:04.321+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T14:19:04.321+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T14:19:04.321+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T14:19:04.321+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T14:19:04.323+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T14:19:04.323+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=5990.00, itemDiscount=0, itemVat=1257.90, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=1257.90, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T14:19:04.323+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T14:19:04.540+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T14:19:04.540+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:19:04.540+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:19:04.540+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T14:19:15.321+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T14:19:15.321+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:19:15.321+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:19:15.372+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T14:19:15.375+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T14:19:15.375+02:00 DEBUG 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T14:19:15.809+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T14:19:15.809+02:00  INFO 13356 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=8247.83, finalTotalVat=1431.44
2025-04-14T14:29:48.370+02:00  INFO 13356 --- [Eshop] [File Watcher] rtingClassPathChangeChangedEventListener : Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2025-04-14T14:29:48.381+02:00  INFO 13356 --- [Eshop] [Thread-6] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-04-14T14:29:48.402+02:00  INFO 13356 --- [Eshop] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-04-14T14:29:48.417+02:00  INFO 13356 --- [Eshop] [Thread-6] o.e.e.service.GoogleMapsShippingService  : Shutting down Google Maps API context.
2025-04-14T14:29:48.422+02:00  INFO 13356 --- [Eshop] [Thread-6] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T14:29:50.056+02:00  INFO 13356 --- [Eshop] [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-14T14:29:50.072+02:00  INFO 13356 --- [Eshop] [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-14T14:29:50.455+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Starting EshopApplication using Java 21.0.6 with PID 13356 (C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop\target\classes started by mirsv in C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop)
2025-04-14T14:29:50.457+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Running with Spring Boot v3.4.4, Spring v6.2.5
2025-04-14T14:29:50.457+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : No active profile set, falling back to 1 default profile: "default"
2025-04-14T14:29:52.420+02:00  INFO 13356 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-14T14:29:52.508+02:00  WARN 13356 --- [Eshop] [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: java.lang.TypeNotPresentException: Type org.example.eshop.model.Order not present
2025-04-14T14:29:52.535+02:00  INFO 13356 --- [Eshop] [restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-14T14:29:52.602+02:00 ERROR 13356 --- [Eshop] [restartedMain] o.s.boot.SpringApplication               : Application run failed

java.lang.TypeNotPresentException: Type org.example.eshop.model.Order not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117) ~[na:na]
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125) ~[na:na]
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49) ~[na:na]
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68) ~[na:na]
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138) ~[na:na]
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49) ~[na:na]
	at java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117) ~[na:na]
	at java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95) ~[na:na]
	at java.base/java.lang.Class.getGenericInterfaces(Class.java:1296) ~[na:na]
	at org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:553) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.ResolvableType.as(ResolvableType.java:501) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.util.TypeDiscoverer.getSuperTypeInformation(TypeDiscoverer.java:263) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.util.ClassTypeInformation.getSuperTypeInformation(ClassTypeInformation.java:37) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.util.TypeInformation.getRequiredSuperTypeInformation(TypeInformation.java:327) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.DefaultRepositoryMetadata.<init>(DefaultRepositoryMetadata.java:55) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.AbstractRepositoryMetadata.getMetadata(AbstractRepositoryMetadata.java:79) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:93) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:168) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62) ~[spring-boot-autoconfigure-3.4.4.jar:3.4.4]
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:397) ~[spring-context-6.2.5.jar:6.2.5]
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986) ~[na:na]
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:396) ~[spring-context-6.2.5.jar:6.2.5]
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:149) ~[spring-context-6.2.5.jar:6.2.5]
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:121) ~[spring-context-6.2.5.jar:6.2.5]
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:430) ~[spring-context-6.2.5.jar:6.2.5]
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:290) ~[spring-context-6.2.5.jar:6.2.5]
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349) ~[spring-context-6.2.5.jar:6.2.5]
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118) ~[spring-context-6.2.5.jar:6.2.5]
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791) ~[spring-context-6.2.5.jar:6.2.5]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609) ~[spring-context-6.2.5.jar:6.2.5]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]
Caused by: java.lang.ClassNotFoundException: org.example.eshop.model.Order
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526) ~[na:na]
	at java.base/java.lang.Class.forName0(Native Method) ~[na:na]
	at java.base/java.lang.Class.forName(Class.java:534) ~[na:na]
	at java.base/java.lang.Class.forName(Class.java:513) ~[na:na]
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121) ~[spring-boot-devtools-3.4.4.jar:3.4.4]
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526) ~[na:na]
	at java.base/java.lang.Class.forName0(Native Method) ~[na:na]
	at java.base/java.lang.Class.forName(Class.java:534) ~[na:na]
	at java.base/java.lang.Class.forName(Class.java:513) ~[na:na]
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114) ~[na:na]
	... 39 common frames omitted

2025-04-14T14:29:56.914+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Starting EshopApplication using Java 21.0.6 with PID 13356 (C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop\target\classes started by mirsv in C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop)
2025-04-14T14:29:56.915+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Running with Spring Boot v3.4.4, Spring v6.2.5
2025-04-14T14:29:56.915+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : No active profile set, falling back to 1 default profile: "default"
2025-04-14T14:29:59.213+02:00  INFO 13356 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-14T14:29:59.427+02:00  INFO 13356 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 210 ms. Found 14 JPA repository interfaces.
2025-04-14T14:30:00.368+02:00  INFO 13356 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-04-14T14:30:00.710+02:00  INFO 13356 --- [Eshop] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3784 ms
2025-04-14T14:30:01.384+02:00  INFO 13356 --- [Eshop] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-14T14:30:01.401+02:00  INFO 13356 --- [Eshop] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-14T14:30:01.467+02:00  INFO 13356 --- [Eshop] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-14T14:30:01.471+02:00  INFO 13356 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-04-14T14:30:01.486+02:00  INFO 13356 --- [Eshop] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection org.mariadb.jdbc.Connection@40439f5a
2025-04-14T14:30:01.486+02:00  INFO 13356 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-04-14T14:30:01.491+02:00  INFO 13356 --- [Eshop] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 11.7.2
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-04-14T14:30:03.941+02:00  INFO 13356 --- [Eshop] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-14T14:30:07.802+02:00  INFO 13356 --- [Eshop] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T14:30:09.141+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Initializing Google Maps API context...
2025-04-14T14:30:09.145+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Google Maps API context initialized successfully.
2025-04-14T14:30:09.146+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Origin coordinates set to: 50.03500389,15.49180022
2025-04-14T14:30:09.165+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Initializing order code counter...
2025-04-14T14:30:09.416+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : No existing numeric-like order codes found in database.
2025-04-14T14:30:09.417+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Order code counter initialized to: 205
2025-04-14T14:30:10.140+02:00  WARN 13356 --- [Eshop] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-14T14:30:11.624+02:00  INFO 13356 --- [Eshop] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-04-14T14:30:11.727+02:00  INFO 13356 --- [Eshop] [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-04-14T14:30:12.891+02:00  INFO 13356 --- [Eshop] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-04-14T14:30:14.789+02:00  INFO 13356 --- [Eshop] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-04-14T14:30:15.080+02:00  INFO 13356 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-04-14T14:30:15.118+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Started EshopApplication in 18.439 seconds (process running for 793.159)
2025-04-14T14:30:15.120+02:00  INFO 13356 --- [Eshop] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-04-14T14:30:15.125+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Initializing test data...
2025-04-14T14:30:15.137+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Tax Rates...
2025-04-14T14:30:15.146+02:00  INFO 13356 --- [Eshop] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-04-14T14:30:15.159+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Order States...
2025-04-14T14:30:15.161+02:00  INFO 13356 --- [Eshop] [SpringApplicationShutdownHook] o.e.e.service.GoogleMapsShippingService  : Shutting down Google Maps API context.
2025-04-14T14:30:15.166+02:00  INFO 13356 --- [Eshop] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T14:30:15.240+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Email Template Configs...
2025-04-14T14:30:15.474+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik
2025-04-14T14:30:15.493+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik Plus
2025-04-14T14:30:15.524+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Simple
2025-04-14T14:30:15.561+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Box
2025-04-14T14:30:15.582+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Ořech
2025-04-14T14:30:15.596+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Palisandr
2025-04-14T14:30:15.606+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Bezbarvý lak
2025-04-14T14:30:15.616+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Šedá lazura
2025-04-14T14:30:15.749+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Antracit
2025-04-14T14:30:15.759+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak
2025-04-14T14:30:15.768+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak Premium
2025-04-14T14:30:15.780+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Antracit
2025-04-14T14:30:15.791+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Červená
2025-04-14T14:30:15.800+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Zelená
2025-04-14T14:30:15.811+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná
2025-04-14T14:30:15.820+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná metalická
2025-04-14T14:30:15.834+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Polička navíc
2025-04-14T14:30:15.845+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Držák na nářadí
2025-04-14T14:30:15.862+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Starý doplněk
2025-04-14T14:30:15.885+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Klasik
2025-04-14T14:30:15.912+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Modern
2025-04-14T14:30:15.929+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník na míru
2025-04-14T14:30:15.934+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating new configurator for product ID: 3
2025-04-14T14:30:15.935+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Updating existing configurator for product ID: 3
2025-04-14T14:30:16.482+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating admin user: admin@example.com
2025-04-14T14:30:16.496+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating test orders...
2025-04-14T14:30:16.496+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T14:30:16.497+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T14:30:16.497+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T14:30:16.507+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T14:30:16.507+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T14:30:16.507+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T14:30:16.508+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T14:30:16.508+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T14:30:16.508+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T14:30:16.508+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 1
2025-04-14T14:30:16.508+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 1
2025-04-14T14:30:16.517+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T14:30:16.517+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 1)
2025-04-14T14:30:16.518+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Klasik | Lazura: Ořech | Střecha: Antracit
2025-04-14T14:30:16.518+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 5990.00
2025-04-14T14:30:16.528+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 5990.00
2025-04-14T14:30:16.528+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T14:30:16.528+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 5990.00
2025-04-14T14:30:16.528+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 1257.90
2025-04-14T14:30:16.528+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 7247.90
2025-04-14T14:30:16.528+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=5990.00, TotalTaxAmount=1257.90, TotalPriceWithTax=7247.90
2025-04-14T14:30:16.529+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=5990.00, TaxAmount=1257.90
2025-04-14T14:30:16.529+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 5990.00, Running Item Tax: 1257.90
2025-04-14T14:30:16.529+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 5990.00, Final Item Tax: 1257.90
2025-04-14T14:30:16.529+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T14:30:16.529+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T14:30:16.529+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T14:30:16.529+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=6490.00, TotalTax=1362.90, OriginalTotalWithTax=7852.90, RoundedTotalToSave=7852
2025-04-14T14:30:16.529+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T14:30:16.529+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T14:30:16.529+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T14:30:16.530+02:00  INFO 13356 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T14:30:16.530+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T14:30:16.530+02:00 DEBUG 13356 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 206
2025-04-14T14:30:16.530+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 206
2025-04-14T14:30:16.530+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T14:30:16.539+02:00  WARN 13356 --- [Eshop] [restartedMain] o.m.jdbc.message.server.ErrorPacket      : Error: 1213-40001: Deadlock found when trying to get lock; try restarting transaction
2025-04-14T14:30:16.543+02:00  WARN 13356 --- [Eshop] [restartedMain] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1213, SQLState: 40001
2025-04-14T14:30:16.543+02:00 ERROR 13356 --- [Eshop] [restartedMain] o.h.engine.jdbc.spi.SqlExceptionHelper   : (conn=13) Deadlock found when trying to get lock; try restarting transaction
2025-04-14T14:30:16.559+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : !!! CRITICAL ERROR during order save for potential order code 206: could not execute statement [(conn=13) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]

org.springframework.dao.CannotAcquireLockException: could not execute statement [(conn=13) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:283) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy241.save(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:317) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:173) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]
Caused by: org.hibernate.exception.LockAcquisitionException: could not execute statement [(conn=13) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1260) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320) ~[spring-orm-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy237.persist(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:636) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:731) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	... 52 common frames omitted
Caused by: java.sql.SQLTransactionRollbackException: (conn=13) Deadlock found when trying to get lock; try restarting transaction
	at org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:303) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:378) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:189) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:1235) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:1174) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:1093) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.execute(StandardClient.java:1017) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:101) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:313) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:290) ~[mariadb-java-client-3.4.1.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	... 98 common frames omitted

2025-04-14T14:30:16.569+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : !!! ORDER CREATION FAILED for customer ID 1 / Order Code 206. Error message: Failed to save order: could not execute statement [(conn=13) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)] !!!
2025-04-14T14:30:16.569+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order Creation Exception Stack Trace:

java.lang.RuntimeException: Failed to save order: could not execute statement [(conn=13) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:322) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:173) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]
Caused by: org.springframework.dao.CannotAcquireLockException: could not execute statement [(conn=13) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:283) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy241.save(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:317) ~[classes/:na]
	... 46 common frames omitted
Caused by: org.hibernate.exception.LockAcquisitionException: could not execute statement [(conn=13) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1260) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320) ~[spring-orm-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy237.persist(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:636) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:731) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	... 52 common frames omitted
Caused by: java.sql.SQLTransactionRollbackException: (conn=13) Deadlock found when trying to get lock; try restarting transaction
	at org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:303) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:378) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:189) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:1235) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:1174) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:1093) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.execute(StandardClient.java:1017) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:101) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:313) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:290) ~[mariadb-java-client-3.4.1.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	... 98 common frames omitted

2025-04-14T14:30:16.578+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Failed to create test order via OrderService for customer test@example.com (Items: [1]): Failed to save order: could not execute statement [(conn=13) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]

java.lang.RuntimeException: Failed to save order: could not execute statement [(conn=13) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:322) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:173) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]
Caused by: org.springframework.dao.CannotAcquireLockException: could not execute statement [(conn=13) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:283) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy241.save(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:317) ~[classes/:na]
	... 46 common frames omitted
Caused by: org.hibernate.exception.LockAcquisitionException: could not execute statement [(conn=13) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1260) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320) ~[spring-orm-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy237.persist(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:636) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:731) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	... 52 common frames omitted
Caused by: java.sql.SQLTransactionRollbackException: (conn=13) Deadlock found when trying to get lock; try restarting transaction
	at org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:303) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:378) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:189) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:1235) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:1174) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:1093) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.execute(StandardClient.java:1017) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:101) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:313) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:290) ~[mariadb-java-client-3.4.1.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	... 98 common frames omitted

2025-04-14T14:30:16.584+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in EUR
2025-04-14T14:30:16.586+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: EUR
2025-04-14T14:30:16.586+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: EUR
2025-04-14T14:30:16.598+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
2025-04-14T14:30:16.600+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : !!! ORDER CREATION FAILED for customer ID 1 / Order Code (new). Error message: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs) !!!
2025-04-14T14:30:16.600+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order Creation Exception Stack Trace:

org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:86) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:182) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:141) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:269) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:90) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1379) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:145) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy243.findByCodeIgnoreCase(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:84) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:191) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T14:30:16.604+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Failed to create test order via OrderService for customer test@example.com (Items: [3]): null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)

org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:86) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:182) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:141) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:269) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:90) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1379) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:145) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy243.findByCodeIgnoreCase(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:84) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:191) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T14:30:16.606+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer admin@example.com with 1 items in CZK
2025-04-14T14:30:16.607+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 2 with explicit currency: CZK
2025-04-14T14:30:16.607+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T14:30:16.610+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
2025-04-14T14:30:16.611+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : !!! ORDER CREATION FAILED for customer ID 2 / Order Code (new). Error message: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs) !!!
2025-04-14T14:30:16.611+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order Creation Exception Stack Trace:

org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:86) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:182) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:141) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:269) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:90) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1379) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:145) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy243.findByCodeIgnoreCase(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:84) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:202) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T14:30:16.616+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Failed to create test order via OrderService for customer admin@example.com (Items: [2]): null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)

org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:86) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:182) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:141) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:269) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:90) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1379) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:145) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy243.findByCodeIgnoreCase(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:84) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:202) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T14:30:16.619+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T14:30:16.619+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T14:30:16.619+02:00 DEBUG 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T14:30:16.623+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
2025-04-14T14:30:16.623+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : !!! ORDER CREATION FAILED for customer ID 1 / Order Code (new). Error message: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs) !!!
2025-04-14T14:30:16.623+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order Creation Exception Stack Trace:

org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:86) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:182) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:141) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:269) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:90) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1379) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:145) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy243.findByCodeIgnoreCase(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:84) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:236) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T14:30:16.626+02:00 ERROR 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Failed to create test order via OrderService for customer test@example.com (Items: [3]): null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)

org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:86) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:182) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:141) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:269) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:90) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1379) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:145) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy243.findByCodeIgnoreCase(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:84) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:236) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T14:30:16.629+02:00  INFO 13356 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Test data initialization finished successfully.
2025-04-14T14:30:16.635+02:00  INFO 13356 --- [Eshop] [restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-14T14:30:16.640+02:00 ERROR 13356 --- [Eshop] [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.transaction.UnexpectedRollbackException: Transaction silently rolled back because it has been marked as rollback-only
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:804) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:698) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:416) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T14:30:17.957+02:00  INFO 13356 --- [Eshop] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-04-14T14:30:17.962+02:00  INFO 13356 --- [Eshop] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-04-14T14:36:46.863+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Starting EshopApplication using Java 21.0.6 with PID 29156 (C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop\target\classes started by mirsv in C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop)
2025-04-14T14:36:46.867+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Running with Spring Boot v3.4.4, Spring v6.2.5
2025-04-14T14:36:46.869+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : No active profile set, falling back to 1 default profile: "default"
2025-04-14T14:36:47.452+02:00  INFO 29156 --- [Eshop] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-14T14:36:47.453+02:00  INFO 29156 --- [Eshop] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-14T14:36:50.170+02:00  INFO 29156 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-14T14:36:50.359+02:00  INFO 29156 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 168 ms. Found 14 JPA repository interfaces.
2025-04-14T14:36:51.829+02:00  INFO 29156 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-04-14T14:36:51.849+02:00  INFO 29156 --- [Eshop] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-04-14T14:36:51.849+02:00  INFO 29156 --- [Eshop] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-04-14T14:36:51.922+02:00  INFO 29156 --- [Eshop] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-04-14T14:36:51.922+02:00  INFO 29156 --- [Eshop] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4468 ms
2025-04-14T14:36:52.730+02:00  INFO 29156 --- [Eshop] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-14T14:36:52.919+02:00  INFO 29156 --- [Eshop] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-04-14T14:36:53.040+02:00  INFO 29156 --- [Eshop] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-14T14:36:53.885+02:00  INFO 29156 --- [Eshop] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-14T14:36:53.995+02:00  INFO 29156 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-14T14:36:54.260+02:00  INFO 29156 --- [Eshop] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.mariadb.jdbc.Connection@25a4b4d7
2025-04-14T14:36:54.267+02:00  INFO 29156 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-14T14:36:54.478+02:00  INFO 29156 --- [Eshop] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 11.7.2
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-04-14T14:36:59.410+02:00  INFO 29156 --- [Eshop] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-14T14:37:02.685+02:00  INFO 29156 --- [Eshop] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T14:37:04.000+02:00  INFO 29156 --- [Eshop] [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-14T14:37:05.004+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Initializing Google Maps API context...
2025-04-14T14:37:05.554+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Google Maps API context initialized successfully.
2025-04-14T14:37:05.554+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Origin coordinates set to: 50.03500389,15.49180022
2025-04-14T14:37:05.600+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Initializing order code counter...
2025-04-14T14:37:05.995+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : No existing numeric-like order codes found in database.
2025-04-14T14:37:05.995+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Order code counter initialized to: 205
2025-04-14T14:37:06.864+02:00  WARN 29156 --- [Eshop] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-14T14:37:07.854+02:00  INFO 29156 --- [Eshop] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-04-14T14:37:08.063+02:00  INFO 29156 --- [Eshop] [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-04-14T14:37:09.446+02:00  INFO 29156 --- [Eshop] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-04-14T14:37:11.630+02:00  INFO 29156 --- [Eshop] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-04-14T14:37:11.775+02:00  INFO 29156 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-04-14T14:37:11.800+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Started EshopApplication in 26.162 seconds (process running for 27.477)
2025-04-14T14:37:11.824+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Initializing test data...
2025-04-14T14:37:12.440+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Tax Rates...
2025-04-14T14:37:12.516+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Order States...
2025-04-14T14:37:12.560+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Email Template Configs...
2025-04-14T14:37:12.786+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik
2025-04-14T14:37:12.794+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik Plus
2025-04-14T14:37:12.811+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Simple
2025-04-14T14:37:12.820+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Box
2025-04-14T14:37:12.839+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Ořech
2025-04-14T14:37:12.844+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Palisandr
2025-04-14T14:37:12.850+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Bezbarvý lak
2025-04-14T14:37:12.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Šedá lazura
2025-04-14T14:37:12.876+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Antracit
2025-04-14T14:37:12.884+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak
2025-04-14T14:37:12.893+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak Premium
2025-04-14T14:37:12.900+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Antracit
2025-04-14T14:37:12.910+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Červená
2025-04-14T14:37:12.925+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Zelená
2025-04-14T14:37:12.936+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná
2025-04-14T14:37:12.966+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná metalická
2025-04-14T14:37:12.983+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Polička navíc
2025-04-14T14:37:12.994+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Držák na nářadí
2025-04-14T14:37:13.008+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Starý doplněk
2025-04-14T14:37:13.041+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Klasik
2025-04-14T14:37:13.140+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Modern
2025-04-14T14:37:13.153+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník na míru
2025-04-14T14:37:13.153+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating new configurator for product ID: 3
2025-04-14T14:37:13.153+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Updating existing configurator for product ID: 3
2025-04-14T14:37:13.590+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating admin user: admin@example.com
2025-04-14T14:37:13.605+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating test orders...
2025-04-14T14:37:13.605+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T14:37:13.610+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T14:37:13.610+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T14:37:13.635+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T14:37:13.637+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T14:37:13.638+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T14:37:13.638+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T14:37:13.638+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T14:37:13.638+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T14:37:13.640+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 1
2025-04-14T14:37:13.640+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 1
2025-04-14T14:37:13.646+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T14:37:13.646+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 1)
2025-04-14T14:37:13.650+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Klasik | Lazura: Ořech | Střecha: Antracit
2025-04-14T14:37:13.650+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 5990.00
2025-04-14T14:37:13.668+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 5990.00
2025-04-14T14:37:13.668+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T14:37:13.668+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 5990.00
2025-04-14T14:37:13.670+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 1257.90
2025-04-14T14:37:13.670+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 7247.90
2025-04-14T14:37:13.670+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=5990.00, TotalTaxAmount=1257.90, TotalPriceWithTax=7247.90
2025-04-14T14:37:13.670+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=5990.00, TaxAmount=1257.90
2025-04-14T14:37:13.670+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 5990.00, Running Item Tax: 1257.90
2025-04-14T14:37:13.670+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 5990.00, Final Item Tax: 1257.90
2025-04-14T14:37:13.670+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T14:37:13.670+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T14:37:13.670+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T14:37:13.674+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=6490.00, TotalTax=1362.90, OriginalTotalWithTax=7852.90, RoundedTotalToSave=7852
2025-04-14T14:37:13.674+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=6490.00, TotalTax=1362.90, OriginalTotalWithTax=7852.90, RoundedTotalToSave=7852
2025-04-14T14:37:13.674+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T14:37:13.674+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T14:37:13.674+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T14:37:13.676+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T14:37:13.676+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T14:37:13.676+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 206
2025-04-14T14:37:13.676+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 206
2025-04-14T14:37:13.676+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T14:37:13.696+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 206 created successfully. Total: 7852 CZK
2025-04-14T14:37:13.696+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 206...
2025-04-14T14:37:13.700+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 206 (Total: 7852 CZK)
2025-04-14T14:37:13.704+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in EUR
2025-04-14T14:37:13.705+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: EUR
2025-04-14T14:37:13.706+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: EUR
2025-04-14T14:37:13.715+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: EUR
2025-04-14T14:37:13.715+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T14:37:13.715+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T14:37:13.715+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T14:37:13.715+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T14:37:13.715+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: EUR
2025-04-14T14:37:13.715+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 3
2025-04-14T14:37:13.715+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 3
2025-04-14T14:37:13.715+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T14:37:13.720+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 3)
2025-04-14T14:37:13.720+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Na míru|Rozměry (DxHxV): 350x120x210 cm|Příčka: Ano
2025-04-14T14:37:13.726+02:00  INFO 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: EUR
2025-04-14T14:37:13.726+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (EUR): 1623.60
2025-04-14T14:37:13.726+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (EUR): 0.00
2025-04-14T14:37:13.726+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for divider (EUR): 62.40
2025-04-14T14:37:13.726+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (EUR, fixed): 0.00
2025-04-14T14:37:13.726+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (EUR, fixed): 0.00
2025-04-14T14:37:13.730+02:00  INFO 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: EUR. Vypočtená cena: 1686.00
2025-04-14T14:37:13.730+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 1686.00
2025-04-14T14:37:13.745+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 1686.00
2025-04-14T14:37:13.745+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing addons for OrderItem (Product ID: 3), Currency: EUR
2025-04-14T14:37:13.747+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Requested addon IDs: [1, 2]
2025-04-14T14:37:13.771+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Found addons from DB: [1, 2]
2025-04-14T14:37:13.772+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Allowed addon IDs for this product: [1, 2]
2025-04-14T14:37:13.774+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=1, Name=Polička navíc
2025-04-14T14:37:13.774+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (EUR): 15.00
2025-04-14T14:37:13.774+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (EUR): 30.00
2025-04-14T14:37:13.774+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=2, Name=Držák na nářadí
2025-04-14T14:37:13.776+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (EUR): 20.00
2025-04-14T14:37:13.776+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (EUR): 20.00
2025-04-14T14:37:13.776+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished processing addons. Total addon price (EUR): 50.00
2025-04-14T14:37:13.776+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 50.00
2025-04-14T14:37:13.776+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 1736.00
2025-04-14T14:37:13.776+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 364.56
2025-04-14T14:37:13.777+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 2100.56
2025-04-14T14:37:13.777+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=1736.00, TotalTaxAmount=364.56, TotalPriceWithTax=2100.56
2025-04-14T14:37:13.777+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=1736.00, TaxAmount=364.56
2025-04-14T14:37:13.777+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 1736.00, Running Item Tax: 364.56
2025-04-14T14:37:13.778+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 1736.00, Final Item Tax: 364.56
2025-04-14T14:37:13.778+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: EUR
2025-04-14T14:37:13.778+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 25.00, Tax: 5.25, Estimated Rate: 0.2100
2025-04-14T14:37:13.778+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: EUR
2025-04-14T14:37:13.778+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=1761.00, TotalTax=369.81, OriginalTotalWithTax=2130.81, RoundedTotalToSave=2130
2025-04-14T14:37:13.778+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=1761.00, TotalTax=369.81, OriginalTotalWithTax=2130.81, RoundedTotalToSave=2130
2025-04-14T14:37:13.778+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: EUR
2025-04-14T14:37:13.778+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null contains custom product. Calculating potential deposit.
2025-04-14T14:37:13.778+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 2130 is 1065.00
2025-04-14T14:37:13.778+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 1000
2025-04-14T14:37:13.778+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 1000.00
2025-04-14T14:37:13.778+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Deposit required for order null. Status set to AWAITING_DEPOSIT.
2025-04-14T14:37:13.778+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 2130 is 1065.00
2025-04-14T14:37:13.778+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 1000
2025-04-14T14:37:13.778+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 1000.00
2025-04-14T14:37:13.780+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Deposit amount 1000.00 EUR calculated for custom order (new).
2025-04-14T14:37:13.780+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: AWAITING_DEPOSIT, Deposit Amount: 1000.00
2025-04-14T14:37:13.781+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 207
2025-04-14T14:37:13.781+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 207
2025-04-14T14:37:13.781+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T14:37:13.793+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 207 created successfully. Total: 2130 EUR
2025-04-14T14:37:13.793+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 207...
2025-04-14T14:37:13.800+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 11] Triggering proforma invoice generation for order 207. Currency: EUR
2025-04-14T14:37:13.817+02:00 ERROR 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Non-critical error generating proforma invoice for order 207: Order not found: 2. Order creation continues.

jakarta.persistence.EntityNotFoundException: Order not found: 2
	at org.example.eshop.service.SuperFakturaInvoiceService.lambda$reloadOrder$2(SuperFakturaInvoiceService.java:351) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.reloadOrder(SuperFakturaInvoiceService.java:351) ~[classes/:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.generateProformaInvoice(SuperFakturaInvoiceService.java:76) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$1.generateProformaInvoice(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$0.generateProformaInvoice(<generated>) ~[classes/:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:362) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:191) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T14:37:13.835+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 207 (Total: 2130 EUR)
2025-04-14T14:37:13.835+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer admin@example.com with 1 items in CZK
2025-04-14T14:37:13.835+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 2 with explicit currency: CZK
2025-04-14T14:37:13.835+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T14:37:13.840+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T14:37:13.840+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 2 to order.
2025-04-14T14:37:13.840+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Admin Eshopu
2025-04-14T14:37:13.840+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T14:37:13.840+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T14:37:13.840+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T14:37:13.840+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 2
2025-04-14T14:37:13.840+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 2
2025-04-14T14:37:13.849+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 500.00
2025-04-14T14:37:13.849+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 2)
2025-04-14T14:37:13.850+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Modern Simple | Lazura: Teak Premium | Střecha: Stříbrná metalická
2025-04-14T14:37:13.850+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 7490.00
2025-04-14T14:37:13.857+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 7490.00
2025-04-14T14:37:13.857+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T14:37:13.857+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 7990.00
2025-04-14T14:37:13.857+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 1677.90
2025-04-14T14:37:13.857+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 9667.90
2025-04-14T14:37:13.857+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=15980.00, TotalTaxAmount=3355.80, TotalPriceWithTax=19335.80
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=15980.00, TaxAmount=3355.80
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 15980.00, Running Item Tax: 3355.80
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 15980.00, Final Item Tax: 3355.80
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=16480.00, TotalTax=3460.80, OriginalTotalWithTax=19940.80, RoundedTotalToSave=19940
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=16480.00, TotalTax=3460.80, OriginalTotalWithTax=19940.80, RoundedTotalToSave=19940
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T14:37:13.860+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 208
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 208
2025-04-14T14:37:13.860+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T14:37:13.870+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 208 created successfully. Total: 19940 CZK
2025-04-14T14:37:13.870+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 208...
2025-04-14T14:37:13.870+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 208 (Total: 19940 CZK)
2025-04-14T14:37:13.873+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updating order 208 to PAID and state PROCESSING (SF API calls might be triggered if active)
2025-04-14T14:37:13.873+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updated order 208 to PAID and state PROCESSING (bypassed SF calls)
2025-04-14T14:37:13.873+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T14:37:13.873+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T14:37:13.873+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T14:37:13.890+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T14:37:13.890+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T14:37:13.890+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T14:37:13.890+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T14:37:13.890+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T14:37:13.890+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T14:37:13.890+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 3
2025-04-14T14:37:13.890+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 3
2025-04-14T14:37:13.890+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T14:37:13.890+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 3)
2025-04-14T14:37:13.890+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Na míru|Rozměry (DxHxV): 280x90x195 cm|Okap: Ano
2025-04-14T14:37:13.890+02:00  INFO 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: CZK
2025-04-14T14:37:13.890+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (CZK): 32700.00
2025-04-14T14:37:13.897+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (CZK): 0.00
2025-04-14T14:37:13.897+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for divider (CZK): 0.00
2025-04-14T14:37:13.897+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (CZK, fixed): 1000.00
2025-04-14T14:37:13.897+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (CZK, fixed): 0.00
2025-04-14T14:37:13.897+02:00  INFO 29156 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: CZK. Vypočtená cena: 33700.00
2025-04-14T14:37:13.898+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 33700.00
2025-04-14T14:37:13.904+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 33700.00
2025-04-14T14:37:13.906+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing addons for OrderItem (Product ID: 3), Currency: CZK
2025-04-14T14:37:13.906+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Requested addon IDs: [1]
2025-04-14T14:37:13.916+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Found addons from DB: [1]
2025-04-14T14:37:13.916+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Allowed addon IDs for this product: [1, 2]
2025-04-14T14:37:13.916+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=1, Name=Polička navíc
2025-04-14T14:37:13.919+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (CZK): 350.00
2025-04-14T14:37:13.919+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (CZK): 350.00
2025-04-14T14:37:13.919+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished processing addons. Total addon price (CZK): 350.00
2025-04-14T14:37:13.919+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 350.00
2025-04-14T14:37:13.919+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 34050.00
2025-04-14T14:37:13.921+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 7150.50
2025-04-14T14:37:13.921+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 41200.50
2025-04-14T14:37:13.921+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=34050.00, TotalTaxAmount=7150.50, TotalPriceWithTax=41200.50
2025-04-14T14:37:13.921+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=34050.00, TaxAmount=7150.50
2025-04-14T14:37:13.921+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 34050.00, Running Item Tax: 7150.50
2025-04-14T14:37:13.921+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 34050.00, Final Item Tax: 7150.50
2025-04-14T14:37:13.921+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T14:37:13.922+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T14:37:13.922+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T14:37:13.930+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=34550.00, TotalTax=7255.50, OriginalTotalWithTax=41805.50, RoundedTotalToSave=41805
2025-04-14T14:37:13.932+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=34550.00, TotalTax=7255.50, OriginalTotalWithTax=41805.50, RoundedTotalToSave=41805
2025-04-14T14:37:13.932+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T14:37:13.932+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null contains custom product. Calculating potential deposit.
2025-04-14T14:37:13.932+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 41805 is 20902.50
2025-04-14T14:37:13.932+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 20000
2025-04-14T14:37:13.932+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 20000.00
2025-04-14T14:37:13.932+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Deposit required for order null. Status set to AWAITING_DEPOSIT.
2025-04-14T14:37:13.932+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 41805 is 20902.50
2025-04-14T14:37:13.932+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 20000
2025-04-14T14:37:13.932+02:00  INFO 29156 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 20000.00
2025-04-14T14:37:13.932+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Deposit amount 20000.00 CZK calculated for custom order (new).
2025-04-14T14:37:13.932+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: AWAITING_DEPOSIT, Deposit Amount: 20000.00
2025-04-14T14:37:13.932+02:00 DEBUG 29156 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 209
2025-04-14T14:37:13.932+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 209
2025-04-14T14:37:13.932+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T14:37:13.940+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 209 created successfully. Total: 41805 CZK
2025-04-14T14:37:13.944+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 209...
2025-04-14T14:37:13.944+02:00 DEBUG 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 11] Triggering proforma invoice generation for order 209. Currency: CZK
2025-04-14T14:37:13.950+02:00 ERROR 29156 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Non-critical error generating proforma invoice for order 209: Order not found: 4. Order creation continues.

jakarta.persistence.EntityNotFoundException: Order not found: 4
	at org.example.eshop.service.SuperFakturaInvoiceService.lambda$reloadOrder$2(SuperFakturaInvoiceService.java:351) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.reloadOrder(SuperFakturaInvoiceService.java:351) ~[classes/:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.generateProformaInvoice(SuperFakturaInvoiceService.java:76) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$1.generateProformaInvoice(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$0.generateProformaInvoice(<generated>) ~[classes/:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:362) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:236) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T14:37:13.955+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 209 (Total: 41805 CZK)
2025-04-14T14:37:13.955+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updating order 209 to DEPOSIT_PAID and state IN_PRODUCTION (SF API calls might be triggered if active)
2025-04-14T14:37:13.960+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updated order 209 to DEPOSIT_PAID and state IN_PRODUCTION (bypassed SF calls)
2025-04-14T14:37:13.960+02:00  INFO 29156 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Test data initialization finished successfully.
2025-04-14T14:37:14.301+02:00 ERROR 29156 --- [Eshop] [task-2] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-2] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:37:14.301+02:00 ERROR 29156 --- [Eshop] [task-4] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-4] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:37:14.301+02:00 ERROR 29156 --- [Eshop] [task-3] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-3] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:37:14.301+02:00 ERROR 29156 --- [Eshop] [task-1] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-1] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:37:14.309+02:00 ERROR 29156 --- [Eshop] [task-2] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 207: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:37:14.309+02:00 ERROR 29156 --- [Eshop] [task-4] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 209: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:37:14.311+02:00 ERROR 29156 --- [Eshop] [task-1] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 206: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:37:14.311+02:00 ERROR 29156 --- [Eshop] [task-3] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 208: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:37:14.474+02:00  INFO 29156 --- [Eshop] [RMI TCP Connection(2)-192.168.1.157] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-14T14:37:14.477+02:00  INFO 29156 --- [Eshop] [RMI TCP Connection(2)-192.168.1.157] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-04-14T14:37:14.480+02:00  INFO 29156 --- [Eshop] [RMI TCP Connection(2)-192.168.1.157] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-04-14T14:37:49.590+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T14:37:49.590+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:37:49.590+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:37:49.605+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: GUEST in currency: CZK
2025-04-14T14:37:49.605+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO with defaults for guest.
2025-04-14T14:37:49.605+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T14:37:49.605+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T14:37:49.613+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T14:37:49.613+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=5990.00, itemDiscount=0, itemVat=1257.90, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=1257.90, shippingError='Vyplňte adresu pro výpočet dopravy.'
2025-04-14T14:37:49.613+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for GUEST. Currency: CZK
2025-04-14T14:37:52.922+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T14:37:52.923+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:37:52.924+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:37:52.924+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T14:38:04.967+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T14:38:04.967+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:04.967+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:05.060+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T14:38:05.060+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T14:38:05.060+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T14:38:05.495+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T14:38:05.496+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=8247.83, finalTotalVat=1431.44
2025-04-14T14:38:09.458+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/odeslat
2025-04-14T14:38:09.458+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:09.458+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:09.493+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Processing checkout submission for guest: mirsvobo@gmail.com in currency: CZK
2025-04-14T14:38:09.509+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Guest validation invoked. Errors after guest validation: true
2025-04-14T14:38:09.509+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Checkout form validation failed for mirsvobo@gmail.com: [Field error in object 'checkoutForm' on field 'phone': rejected value []; codes [NotBlank.checkoutForm.phone,NotBlank.phone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [checkoutForm.phone,phone]; arguments []; default message [phone]]; default message [Telefonní číslo je povinné.]]
2025-04-14T14:38:09.509+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Preparing model for rendering checkout page after form error. Currency: CZK
2025-04-14T14:38:09.511+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T14:38:09.511+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Rounding calculation skipped because shipping is invalid.
2025-04-14T14:38:09.511+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=5990.00, itemDiscount=0, itemVat=1257.90, origShipCost=null, shipDiscount=0, finalShipCost=0, finalShipTax=0, originalTotal=null, roundingDiff=0, finalRoundedTotal=null, totalVatWithShip=1257.90, shippingError='Zkontrolujte chyby ve formuláři a znovu vypočítejte dopravu.'
2025-04-14T14:38:09.511+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : Model prepared for error view. Shipping error state indicated.
2025-04-14T14:38:09.777+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T14:38:09.777+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:09.777+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:09.777+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T14:38:17.382+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T14:38:17.382+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:17.383+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:17.384+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Heřmanského 732, city=Heřmanův Městec, zipCode=53803, country=Česká republika) in currency CZK
2025-04-14T14:38:17.384+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T14:38:17.384+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Heřmanského 732, Heřmanův Městec, 53803, Česká republika'
2025-04-14T14:38:17.480+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 826.39 CZK (Distance: 21.8 km)
2025-04-14T14:38:17.480+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=826.39, origTax=173.54, shipDiscount=0, finalCost=826.39, finalTax=173.54, finalTotal=8247.83, finalTotalVat=1431.44
2025-04-14T14:38:19.239+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/odeslat
2025-04-14T14:38:19.239+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:19.239+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:19.244+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Processing checkout submission for guest: mirsvobo@gmail.com in currency: CZK
2025-04-14T14:38:19.246+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Guest validation invoked. Errors after guest validation: false
2025-04-14T14:38:19.246+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Getting or creating guest customer.
2025-04-14T14:38:19.246+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.CustomerService  : Attempting to get or create guest customer for email: mirsvobo@gmail.com
2025-04-14T14:38:19.248+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.CustomerService  : Creating new guest customer record for email: mirsvobo@gmail.com
2025-04-14T14:38:19.248+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.CustomerService  : Setting invoice name/lastname to null for customer ID (new) due to company name.
2025-04-14T14:38:19.252+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.CustomerService  : Guest customer created successfully with ID: 3
2025-04-14T14:38:19.256+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Using valid shipping costs from form: NoTax=826.39, Tax=173.54
2025-04-14T14:38:19.256+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Calculating final order totals for saving: originalTotal=8247.83, roundedTotal=8247
2025-04-14T14:38:19.256+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Attempting to create order with request: CreateOrderRequest(customerId=3, useCustomerAddresses=true, paymentMethod=BANK_TRANSFER, currency=CZK, customerNote=, couponCode=null, items=[org.example.eshop.dto.CartItemDto@4a9f6fed], shippingCostNoTax=826.39, shippingTax=173.54)
2025-04-14T14:38:19.256+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 3 with explicit currency: CZK
2025-04-14T14:38:19.256+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T14:38:19.271+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T14:38:19.272+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 3 to order.
2025-04-14T14:38:19.272+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Invoice recipient is company: 46996009
2025-04-14T14:38:19.273+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T14:38:19.273+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T14:38:19.273+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T14:38:19.273+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Processing item with Product ID: 1
2025-04-14T14:38:19.273+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 1
2025-04-14T14:38:19.297+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T14:38:19.297+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 1)
2025-04-14T14:38:19.297+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Klasik | Lazura: Bezbarvý lak | Střecha: Antracit
2025-04-14T14:38:19.297+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 5990.00
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Unit Price After Discount: 5990.00
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 5990.00
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Unit Tax Amount: 1257.90
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Unit Price With Tax: 7247.90
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=5990.00, TotalTaxAmount=1257.90, TotalPriceWithTax=7247.90
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=5990.00, TaxAmount=1257.90
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 5990.00, Running Item Tax: 1257.90
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 5990.00, Final Item Tax: 1257.90
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 826.39, Tax: 173.54, Estimated Rate: 0.2100
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=6816.39, TotalTax=1431.44, OriginalTotalWithTax=8247.83, RoundedTotalToSave=8247
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=6816.39, TotalTax=1431.44, OriginalTotalWithTax=8247.83, RoundedTotalToSave=8247
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T14:38:19.303+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 210
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Generated Order Code: 210
2025-04-14T14:38:19.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T14:38:19.305+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Order 210 created successfully. Total: 8247 CZK
2025-04-14T14:38:19.305+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 210...
2025-04-14T14:38:19.305+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Order 210 successfully created with currency CZK for guest: mirsvobo@gmail.com
2025-04-14T14:38:19.305+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.Cart           : clearCart called for cart hash: 1417332352. Clearing items and coupon.
2025-04-14T14:38:19.305+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Session cart cleared for mirsvobo@gmail.com
2025-04-14T14:38:19.305+02:00 ERROR 29156 --- [Eshop] [task-5] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-5] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:38:19.314+02:00 ERROR 29156 --- [Eshop] [task-5] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 210: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:38:19.389+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T14:38:19.389+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:19.389+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:19.389+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T14:38:19.573+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /prihlaseni
2025-04-14T14:38:19.573+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:19.573+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:19.573+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.AuthController      : Displaying login page
2025-04-14T14:38:21.095+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.CustomUserDetailsService   : Attempting to load user by email: admin@example.com
2025-04-14T14:38:21.111+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.CustomUserDetailsService   : User found: admin@example.com, Enabled: true, Roles: [ROLE_USER, ROLE_ADMIN]
2025-04-14T14:38:21.358+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T14:38:21.358+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:21.358+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:21.360+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T14:38:21.518+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2025-04-14T14:38:29.200+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders
2025-04-14T14:38:29.200+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:29.200+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:29.209+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Requesting admin order list view. Filters: stateId=null, paymentStatus=, customerEmail=, dateFrom=null, dateTo=null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:38:29.209+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : OrderService.findOrders called with filters - Email: 'N/A', StateID: null, PaymentStatus: 'N/A', From: null, To: null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:38:29.237+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Found 5 orders matching criteria using specifications.
2025-04-14T14:38:29.237+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:38:29.246+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : [AdminOrderController.listOrders] Service returned page: Number=0, Elements=5, TotalElements=5
2025-04-14T14:38:32.919+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/3
2025-04-14T14:38:32.919+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:32.919+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:32.922+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 3
2025-04-14T14:38:32.922+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.OrderService   : Finding order by ID: 3
2025-04-14T14:38:32.936+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:38:32.943+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 3
2025-04-14T14:38:35.789+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders
2025-04-14T14:38:35.789+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:35.789+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:35.791+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.controller.AdminOrderController  : Requesting admin order list view. Filters: stateId=null, paymentStatus=, customerEmail=, dateFrom=null, dateTo=null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:38:35.793+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-7] org.example.eshop.service.OrderService   : OrderService.findOrders called with filters - Email: 'N/A', StateID: null, PaymentStatus: 'N/A', From: null, To: null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:38:35.799+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] org.example.eshop.service.OrderService   : Found 5 orders matching criteria using specifications.
2025-04-14T14:38:35.800+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:38:35.805+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.controller.AdminOrderController  : [AdminOrderController.listOrders] Service returned page: Number=0, Elements=5, TotalElements=5
2025-04-14T14:38:40.285+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5
2025-04-14T14:38:40.285+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:40.285+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:40.287+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 5
2025-04-14T14:38:40.287+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] org.example.eshop.service.OrderService   : Finding order by ID: 5
2025-04-14T14:38:40.300+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:38:40.303+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 5
2025-04-14T14:38:50.594+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5/update-state
2025-04-14T14:38:50.594+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:50.594+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:50.594+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Attempting to update state for order ID: 5 to state ID: 3
2025-04-14T14:38:50.607+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.OrderService   : Updating order 210 state from 'Nová' to 'Čeká na platbu'
2025-04-14T14:38:50.624+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Successfully updated state for order ID: 5
2025-04-14T14:38:50.628+02:00 DEBUG 29156 --- [Eshop] [task-6] org.example.eshop.service.EmailService   : Loading email config for state 'AWAITING_PAYMENT' from database.
2025-04-14T14:38:50.640+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5
2025-04-14T14:38:50.645+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:50.645+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:50.647+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 5
2025-04-14T14:38:50.648+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Finding order by ID: 5
2025-04-14T14:38:50.660+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:38:50.665+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 5
2025-04-14T14:38:50.740+02:00 DEBUG 29156 --- [Eshop] [task-6] org.example.eshop.service.EmailService   : Loaded and cached email config for state 'AWAITING_PAYMENT'. SendEmail: true
2025-04-14T14:38:50.747+02:00 ERROR 29156 --- [Eshop] [task-6] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-6] Exception processing template "emails/order-status-awaiting-payment": Error resolving template [emails/order-status-awaiting-payment], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-awaiting-payment], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:38:50.750+02:00 ERROR 29156 --- [Eshop] [task-6] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'emails/order-status-awaiting-payment' for status update order 210: Error resolving template [emails/order-status-awaiting-payment], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-awaiting-payment], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:38:54.976+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5/update-state
2025-04-14T14:38:54.977+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:54.977+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:54.978+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.controller.AdminOrderController  : Attempting to update state for order ID: 5 to state ID: 5
2025-04-14T14:38:54.985+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] org.example.eshop.service.OrderService   : Updating order 210 state from 'Čeká na platbu' to 'Zaplaceno'
2025-04-14T14:38:54.989+02:00 DEBUG 29156 --- [Eshop] [task-7] org.example.eshop.service.EmailService   : Loading email config for state 'PAID' from database.
2025-04-14T14:38:54.994+02:00 DEBUG 29156 --- [Eshop] [task-7] org.example.eshop.service.EmailService   : Loaded and cached email config for state 'PAID'. SendEmail: true
2025-04-14T14:38:54.995+02:00 ERROR 29156 --- [Eshop] [task-7] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-7] Exception processing template "emails/order-status-paid": Error resolving template [emails/order-status-paid], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-paid], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:38:54.996+02:00 ERROR 29156 --- [Eshop] [task-7] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'emails/order-status-paid' for status update order 210: Error resolving template [emails/order-status-paid], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-paid], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:38:55.000+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.controller.AdminOrderController  : Successfully updated state for order ID: 5
2025-04-14T14:38:55.018+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5
2025-04-14T14:38:55.018+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:55.018+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:55.018+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 5
2025-04-14T14:38:55.020+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] org.example.eshop.service.OrderService   : Finding order by ID: 5
2025-04-14T14:38:55.025+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:38:55.034+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 5
2025-04-14T14:38:57.273+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5/update-state
2025-04-14T14:38:57.273+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:57.273+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:57.273+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.a.controller.AdminOrderController  : Attempting to update state for order ID: 5 to state ID: 5
2025-04-14T14:38:57.279+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] org.example.eshop.service.OrderService   : Order 210 is already in state 'Zaplaceno'. No change needed.
2025-04-14T14:38:57.279+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.a.controller.AdminOrderController  : Successfully updated state for order ID: 5
2025-04-14T14:38:57.295+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5
2025-04-14T14:38:57.295+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:38:57.295+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:38:57.295+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 5
2025-04-14T14:38:57.295+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] org.example.eshop.service.OrderService   : Finding order by ID: 5
2025-04-14T14:38:57.316+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:38:57.320+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 5
2025-04-14T14:39:01.045+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5/update-state
2025-04-14T14:39:01.045+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:39:01.045+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:39:01.047+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Attempting to update state for order ID: 5 to state ID: 7
2025-04-14T14:39:01.049+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Updating order 210 state from 'Zaplaceno' to 'Ve výrobě'
2025-04-14T14:39:01.056+02:00 DEBUG 29156 --- [Eshop] [task-8] org.example.eshop.service.EmailService   : Loading email config for state 'IN_PRODUCTION' from database.
2025-04-14T14:39:01.062+02:00 DEBUG 29156 --- [Eshop] [task-8] org.example.eshop.service.EmailService   : Loaded and cached email config for state 'IN_PRODUCTION'. SendEmail: true
2025-04-14T14:39:01.062+02:00 ERROR 29156 --- [Eshop] [task-8] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-8] Exception processing template "emails/order-status-in-production": Error resolving template [emails/order-status-in-production], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-in-production], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:39:01.063+02:00 ERROR 29156 --- [Eshop] [task-8] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'emails/order-status-in-production' for status update order 210: Error resolving template [emails/order-status-in-production], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-in-production], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:39:01.068+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Successfully updated state for order ID: 5
2025-04-14T14:39:01.080+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5
2025-04-14T14:39:01.080+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:39:01.080+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:39:01.080+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 5
2025-04-14T14:39:01.080+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.OrderService   : Finding order by ID: 5
2025-04-14T14:39:01.088+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:39:01.088+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 5
2025-04-14T14:39:04.572+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5/update-state
2025-04-14T14:39:04.572+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:39:04.572+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:39:04.572+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.controller.AdminOrderController  : Attempting to update state for order ID: 5 to state ID: 8
2025-04-14T14:39:04.577+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] org.example.eshop.service.OrderService   : Updating order 210 state from 'Ve výrobě' to 'V zinkovně'
2025-04-14T14:39:04.583+02:00 DEBUG 29156 --- [Eshop] [task-9] org.example.eshop.service.EmailService   : Loading email config for state 'AT_ZINC_PLATING' from database.
2025-04-14T14:39:04.583+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.controller.AdminOrderController  : Successfully updated state for order ID: 5
2025-04-14T14:39:04.587+02:00  WARN 29156 --- [Eshop] [task-9] org.example.eshop.service.EmailService   : No specific email template config found in DB for order state code 'AT_ZINC_PLATING'. Using default (sending disabled).
2025-04-14T14:39:04.587+02:00 DEBUG 29156 --- [Eshop] [task-9] org.example.eshop.service.EmailService   : Loaded and cached email config for state 'AT_ZINC_PLATING'. SendEmail: false
2025-04-14T14:39:04.587+02:00  INFO 29156 --- [Eshop] [task-9] org.example.eshop.service.EmailService   : Email notification is disabled for order state 'AT_ZINC_PLATING'. No email sent for order 210.
2025-04-14T14:39:04.591+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5
2025-04-14T14:39:04.591+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:39:04.591+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:39:04.600+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 5
2025-04-14T14:39:04.600+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] org.example.eshop.service.OrderService   : Finding order by ID: 5
2025-04-14T14:39:04.611+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:39:04.614+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 5
2025-04-14T14:39:05.972+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5/mark-fully-paid
2025-04-14T14:39:05.972+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:39:05.972+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:39:05.972+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Admin action: Attempting to mark order as fully paid for order ID: 5
2025-04-14T14:39:05.981+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.OrderService   : Calculating full amount for order 210: 8247.00
2025-04-14T14:39:05.981+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.OrderService   : Marking order 210 fully paid on 2025-04-14
2025-04-14T14:39:05.982+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.OrderService   : Cannot mark payment in SuperFaktura for order 210: Final Invoice SF ID is missing.
2025-04-14T14:39:06.000+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Admin action: Order marked as fully paid for order ID: 5
2025-04-14T14:39:06.007+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5
2025-04-14T14:39:06.007+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:39:06.007+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:39:06.013+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 5
2025-04-14T14:39:06.013+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Finding order by ID: 5
2025-04-14T14:39:06.021+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:39:06.030+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 5
2025-04-14T14:39:07.248+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5/generate-final
2025-04-14T14:39:07.248+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:39:07.248+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:39:07.249+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.controller.AdminOrderController  : Admin action: Trigger SuperFaktura FINAL invoice for order ID: 5
2025-04-14T14:39:07.250+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] org.example.eshop.service.OrderService   : Finding order by ID: 5
2025-04-14T14:39:07.255+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.s.SuperFakturaInvoiceService       : Attempting to generate SuperFaktura FINAL invoice for order: 210. Order currency: CZK
2025-04-14T14:39:07.255+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.s.SuperFakturaInvoiceService       : Calculating rounding difference for order 210: Original=8247.83, Rounded=8247.00, Difference=0.83
2025-04-14T14:39:07.255+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.s.SuperFakturaInvoiceService       : Added rounding item to SF payload for order 210: Amount=-0.83
2025-04-14T14:39:07.255+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.s.SuperFakturaInvoiceService       : Setting 'already_paid' to total rounded price (8247.00) and 'paid_date' for final invoice 210 (no deposit scenario)
2025-04-14T14:39:07.262+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.s.SuperFakturaInvoiceService       : SF API Request Payload (Final Invoice - Order 210):
{
  "Invoice" : {
    "order_no" : "210",
    "date" : "2025-04-14",
    "note" : "",
    "due_date" : "2025-04-28",
    "rounding" : "item",
    "language" : "cze",
    "specific" : "5",
    "type" : "regular",
    "payment_type" : "transfer",
    "delivery_date" : "2025-04-14",
    "variable" : "210",
    "currency" : "CZK",
    "already_paid" : 8247.00,
    "paid_date" : "2025-04-14"
  },
  "InvoiceItem" : [ {
    "unit" : "ks",
    "quantity" : 1,
    "name" : "Dřevník Klasik (Design: Klasik | Lazura: Bezbarvý lak | Střecha: Antracit)",
    "description" : "Lazura: Bezbarvý lak | Střecha: Antracit | Design: Klasik | Přesah: Standardní",
    "tax" : 21.00,
    "currency" : "CZK",
    "unit_price" : 5990.00,
    "sku" : "klasik"
  }, {
    "unit" : "ks",
    "quantity" : 1,
    "name" : "Doprava",
    "tax" : 21.00,
    "currency" : "CZK",
    "unit_price" : 826.39
  }, {
    "unit" : "",
    "quantity" : 1,
    "name" : "Zaokrouhlení",
    "tax" : 0.00,
    "currency" : "CZK",
    "unit_price" : -0.83
  } ],
  "Client" : {
    "zip" : "53803",
    "country" : "Česká republika",
    "delivery_country" : "Česká republika",
    "delivery_address" : "Heřmanského 732",
    "address" : "Heřmanského 732",
    "city" : "Heřmanův Městec",
    "delivery_name" : "46996009",
    "phone" : "704756313",
    "name" : "46996009",
    "currency" : "CZK",
    "delivery_city" : "Heřmanův Městec",
    "delivery_zip" : "53803",
    "email" : "mirsvobo@gmail.com",
    "delivery_phone" : "704756313"
  }
}
2025-04-14T14:39:07.263+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.s.SuperFakturaInvoiceService       : Sending Final Invoice request to SF API: URL=https://moje.superfaktura.cz/invoices/create.json, Method=POST
2025-04-14T14:39:07.947+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.s.SuperFakturaInvoiceService       : Raw SF API Response Body for Final Invoice (Order 210): START
{"error":0,"error_message":"Invoice created","data":{"Invoice":{"id":"7669493","user_id":"39487","user_profile_id":"36761","client_id":"3508622","parent_id":null,"proforma_id":null,"estimate_id":null,"sequence_id":"305624","import_type":null,"import_id":null,"import_parent_id":null,"type":"regular","template":null,"tax_document":null,"name":"Faktura 000009\/2025","lang":null,"client_data":"{\"Client\":{\"user_id\":\"39487\",\"user_profile_id\":\"36761\",\"uuid\":null,\"country_id\":\"57\",\"name\":\"46996009\",\"ico\":null,\"dic\":null,\"ic_dph\":null,\"iban\":null,\"swift\":null,\"bank_account_prefix\":null,\"bank_account\":null,\"bank_code\":null,\"account\":null,\"email\":\"mirsvobo@gmail.com\",\"address\":\"He\\u0159mansk\\u00e9ho 732\",\"city\":\"He\\u0159man\\u016fv M\\u011bstec\",\"zip\":\"53803\",\"state\":null,\"country\":\"\\u010cesk\\u00e1 republika\",\"delivery_name\":\"46996009\",\"delivery_address\":\"He\\u0159mansk\\u00e9ho 732\",\"delivery_city\":\"He\\u0159man\\u016fv M\\u011bstec\",\"delivery_zip\":\"53803\",\"delivery_state\":null,\"delivery_country\":\"\\u010cesk\\u00e1 republika\",\"delivery_country_id\":57,\"phone\":\"704756313\",\"delivery_phone\":\"704756313\",\"fax\":null,\"due_date\":null,\"default_variable\":null,\"discount\":null,\"currency\":\"CZK\",\"bank_account_id\":null,\"comment\":null,\"tags\":null,\"distance\":null,\"dont_travel\":null,\"notices\":\"1\",\"id\":3508622}}","my_data":"{\"MyData\":{\"id\":\"36761\",\"user_id\":\"39451\",\"country_id\":\"57\",\"company_name\":\"Truhl\\u00e1\\u0159stv\\u00ed Kol\\u00e1\\u0159\",\"ico\":\"73589292\",\"dic\":\"\",\"ic_dph\":\"CZ8204183086\",\"business_register\":\"\",\"address\":\"Dru\\u017estevn\\u00ed 304\",\"city\":\"\\u0158e\\u010dany nad Labem\",\"zip\":\"53313\",\"tax_payer\":\"1\",\"BankAccount\":[{\"id\":\"29020\",\"user_id\":\"39451\",\"user_profile_id\":\"36761\",\"currency\":\"CZK\",\"default\":true,\"show\":true,\"country_id\":\"57\",\"bank_name\":\"Fio banka a.s.\",\"bank_code\":\"2010\",\"account\":\"2601817728\",\"iban\":\"CZ0420100000002601817728\",\"swift\":\"FIOBCZPPXXX\",\"created\":\"2021-09-30 09:01:03\",\"modified\":\"2022-03-15 08:14:09\",\"show_account\":true}],\"Logo\":[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}],\"Signature\":{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}}}","items_data":"D\u0159evn\u00edk Klasik (Design: Klasik | Lazura: Bezbarv\u00fd lak | St\u0159echa: Antracit) Lazura: Bezbarv\u00fd lak | St\u0159echa: Antracit | Design: Klasik | P\u0159esah: Standardn\u00ed, Doprava , Zaokrouhlen\u00ed , ","invoice_no":"9","order_no":"210","invoice_no_formatted":"000009\/2025","invoice_no_formatted_raw":"92025","invoice_no_formatted_length":"11","mask":"YYYYNNN","variable":"210","variable_raw":"210","constant":"","specific":"5","payment_type":"transfer","status":"3","home_currency":"CZK","invoice_currency":"CZK","exchange_rate":1,"country_exchange_rate":"1.00000000000000","amount":"6815.56","vat":"1431.44","discount":"0","items_name":null,"issued_by":"mirsvobo","issued_by_phone":"704756313","issued_by_email":"mirsvobo@gmail.com","paid":"8247.00","amount_paid":"8247.00","deposit":"0.00","header_comment":"","comment":"","internal_comment":null,"created":"2025-04-14 00:00:00","modified":"2025-04-14 14:39:12","recurring":null,"paydate":"2025-04-14 00:00:00","delivery":"2025-04-14 00:00:00","taxdate":null,"accounting_date":"2025-04-14","delivery_type":"haulage","due":"2025-04-21","demo":"0","token":"b24e14cb","tags":"","rounding":"item","vat_transfer":null,"special_vat_scheme":null,"issued_by_web":null,"summary_invoice":null,"total_amount":"8247.00","show_items_with_dph":true,"show_special_vat":false,"flag":"fully-paid"},"Client":{"id":"3508622","user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"46996009","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"mirsvobo@gmail.com","address":"He\u0159mansk\u00e9ho 732","city":"He\u0159man\u016fv M\u011bstec","zip":"53803","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":"46996009","delivery_address":"He\u0159mansk\u00e9ho 732","delivery_city":"He\u0159man\u016fv M\u011bstec","delivery_zip":"53803","delivery_state":null,"delivery_country":"\u010cesk\u00e1 republika","delivery_country_id":"57","phone":"704756313","delivery_phone":"704756313","fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":"CZK","bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"created":"2025-04-14 14:39:12","modified":"2025-04-14 14:39:12","notices":true},"0":{"to_pay":"0.000000","to_pay_in_invoice_currency":"0.00","total":"8247.00"},"InvoiceEmail":[],"PostStamp":[],"InvoiceSetting":{"signature":true,"bysquare":true,"payment_info":true,"language":"cze","online_payment":false,"summary_bg_color":"#d4eef6","force_iban":true},"InvoicePayment":[{"id":"4939896","invoice_id":"7669493","import_payment_id":null,"user_id":"39487","user_profile_id":"36761","payment_type":"transfer","amount":"6815.56","home_currency":"CZK","payment_currency":"CZK","country_exchange_rate":"1.00000000000000","exchange_rate":"1.00000000000000","vat":"1431.44","document_no":null,"created":"2025-04-14 00:00:00"}],"Tag":[],"ClientData":{"user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"46996009","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"mirsvobo@gmail.com","address":"He\u0159mansk\u00e9ho 732","city":"He\u0159man\u016fv M\u011bstec","zip":"53803","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":"46996009","delivery_address":"He\u0159mansk\u00e9ho 732","delivery_city":"He\u0159man\u016fv M\u011bstec","delivery_zip":"53803","delivery_state":null,"delivery_country":"\u010cesk\u00e1 republika","delivery_country_id":57,"phone":"704756313","delivery_phone":"704756313","fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":"CZK","bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"notices":"1","id":3508622,"Country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true},"DeliveryCountry":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true}},"MyData":{"id":"36761","user_id":"39451","country_id":"57","company_name":"Truhl\u00e1\u0159stv\u00ed Kol\u00e1\u0159","ico":"73589292","dic":"","ic_dph":"CZ8204183086","business_register":"","address":"Dru\u017estevn\u00ed 304","city":"\u0158e\u010dany nad Labem","zip":"53313","tax_payer":"1","BankAccount":[{"id":"29020","user_id":"39451","user_profile_id":"36761","currency":"CZK","default":true,"show":true,"country_id":"57","bank_name":"Fio banka a.s.","bank_code":"2010","account":"2601817728","iban":"CZ0420100000002601817728","swift":"FIOBCZPPXXX","created":"2021-09-30 09:01:03","modified":"2022-03-15 08:14:09","show_account":true}],"Logo":"[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"mobile_path\":\"imagecache\\\/media\\\/transfer\\\/img\\\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}]","Signature":"{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}","country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true},"SignatureRaw":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"LogoRaw":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}]},"Logo":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}],"Signature":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"InvoiceItem":[{"id":"24636638","invoice_id":"7669493","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"D\u0159evn\u00edk Klasik (Design: Klasik | Lazura: Bezbarv\u00fd lak | St\u0159echa: Antracit)","description":"Lazura: Bezbarv\u00fd lak | St\u0159echa: Antracit | Design: Klasik | P\u0159esah: Standardn\u00ed","sku":"klasik","quantity":"1.00000","unit":"ks","unit_price":5990,"tax":21,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"0","hide_in_autocomplete":null,"unit_price_discount":5990,"item_price":5990,"item_price_no_discount":5990,"discount_no_vat":-0,"discount_with_vat":-0,"discount_with_vat_total":-0,"discount_no_vat_total":-0,"unit_price_vat":7247.9,"unit_price_vat_no_discount":7247.9,"item_price_vat":7247.9,"item_price_vat_no_discount":7247.9,"item_price_vat_check":7247.9},{"id":"24636639","invoice_id":"7669493","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"Doprava","description":"","sku":null,"quantity":"1.00000","unit":"ks","unit_price":826.39,"tax":21,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"1","hide_in_autocomplete":null,"unit_price_discount":826.39,"item_price":826.39,"item_price_no_discount":826.39,"discount_no_vat":-0,"discount_with_vat":-0,"discount_with_vat_total":-0,"discount_no_vat_total":-0,"unit_price_vat":999.9319,"unit_price_vat_no_discount":999.9319,"item_price_vat":999.93,"item_price_vat_no_discount":999.93,"item_price_vat_check":999.93},{"id":"24636640","invoice_id":"7669493","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"Zaokrouhlen\u00ed","description":"","sku":null,"quantity":"1.00000","unit":"","unit_price":-0.83,"tax":0,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"2","hide_in_autocomplete":null,"unit_price_discount":-0.83,"item_price":-0.83,"item_price_no_discount":-0.83,"discount_no_vat":0,"discount_with_vat":0,"discount_with_vat_total":0,"discount_no_vat_total":0,"unit_price_vat":-0.83,"unit_price_vat_no_discount":-0.83,"item_price_vat":-0.83,"item_price_vat_no_discount":-0.83,"item_price_vat_check":-0.83}],"Summary":{"vat_base_separate":{"21":6816.39,"0":-0.83},"vat_base_total":6815.56,"vat_separate":{"21":1431.44,"0":-0},"vat_total":1431.44,"invoice_total":8247,"discount":0},"SummaryInvoice":{"vat_base_separate_positive":{"21":6816.39,"0":-0.83},"vat_base_separate_negative":{"21":0,"0":0},"vat_separate_positive":{"21":1431.44,"0":-0},"vat_separate_negative":{"21":0,"0":0}},"UnitCount":{"ks":2},"Paypal":false,"RelatedItems":[],"Qr":{"qr":"","qr_type":"","qr_url":""},"PaymentLink":""}}
END_RESPONSE
2025-04-14T14:39:07.971+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.s.SuperFakturaInvoiceService       : Final Invoice API call successful for order 210.
2025-04-14T14:39:07.971+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.s.SuperFakturaInvoiceService       : Constructed PDF download URL with token: https://moje.superfaktura.cz/invoices/pdf/7669493/token:b24e14cb
2025-04-14T14:39:07.973+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.s.SuperFakturaInvoiceService       : Parsed Final Invoice response for order 210: ID=7669493, Number=000009/2025, PDF URL=https://moje.superfaktura.cz/invoices/pdf/7669493/token:b24e14cb
2025-04-14T14:39:07.973+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.s.SuperFakturaInvoiceService       : Order 210 updated with Final Invoice details.
2025-04-14T14:39:07.996+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5
2025-04-14T14:39:07.996+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:39:07.996+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:39:07.996+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 5
2025-04-14T14:39:07.996+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] org.example.eshop.service.OrderService   : Finding order by ID: 5
2025-04-14T14:39:08.004+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:39:08.013+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 5
2025-04-14T14:42:13.272+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5
2025-04-14T14:42:13.273+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:42:13.274+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:42:13.279+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 5
2025-04-14T14:42:13.279+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Finding order by ID: 5
2025-04-14T14:42:13.302+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:42:13.309+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 5
2025-04-14T14:42:21.027+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin.]
2025-04-14T14:42:22.463+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/5
2025-04-14T14:42:22.463+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:42:22.463+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:42:22.466+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 5
2025-04-14T14:42:22.466+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.OrderService   : Finding order by ID: 5
2025-04-14T14:42:22.476+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:42:22.476+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 5
2025-04-14T14:42:23.937+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders
2025-04-14T14:42:23.937+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:42:23.937+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:42:23.940+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.controller.AdminOrderController  : Requesting admin order list view. Filters: stateId=null, paymentStatus=, customerEmail=, dateFrom=null, dateTo=null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:42:23.941+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] org.example.eshop.service.OrderService   : OrderService.findOrders called with filters - Email: 'N/A', StateID: null, PaymentStatus: 'N/A', From: null, To: null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:42:23.951+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] org.example.eshop.service.OrderService   : Found 5 orders matching criteria using specifications.
2025-04-14T14:42:23.951+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:42:23.959+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.controller.AdminOrderController  : [AdminOrderController.listOrders] Service returned page: Number=0, Elements=5, TotalElements=5
2025-04-14T14:42:25.287+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/4
2025-04-14T14:42:25.287+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:42:25.287+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:42:25.290+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 4
2025-04-14T14:42:25.290+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-10] org.example.eshop.service.OrderService   : Finding order by ID: 4
2025-04-14T14:42:25.296+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:42:25.304+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 4
2025-04-14T14:42:32.234+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/4/generate-proforma
2025-04-14T14:42:32.234+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:42:32.238+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:42:32.238+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.controller.AdminOrderController  : Admin action: Trigger SuperFaktura PROFORMA for order ID: 4
2025-04-14T14:42:32.238+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] org.example.eshop.service.OrderService   : Finding order by ID: 4
2025-04-14T14:42:32.247+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : Attempting to generate SuperFaktura PROFORMA invoice for order: 209. Order currency: CZK
2025-04-14T14:42:32.251+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : SF API Request Payload (Proforma Invoice - Order 209):
{
  "Invoice" : {
    "order_no" : "209",
    "date" : "2025-04-14",
    "note" : "Záloha za objednané zboží dle obj. č. 209\nPoznámka: Malý na míru s okapem.",
    "payment_type" : "transfer",
    "variable" : "209",
    "due_date" : "2025-04-21",
    "rounding" : "item",
    "currency" : "CZK",
    "language" : "cze",
    "specific" : "4",
    "type" : "proforma"
  },
  "InvoiceItem" : [ {
    "unit" : "ks",
    "quantity" : 1,
    "name" : "Záloha na dřevník dle obj. č. 209",
    "description" : "Záloha 50% z 41805.00 CZK",
    "tax" : 21.00,
    "currency" : "CZK",
    "unit_price" : 16528.93
  } ],
  "Client" : {
    "zip" : "12345",
    "country" : "Česká republika",
    "address" : "Testovací 123",
    "phone" : "123456789",
    "city" : "Testov",
    "name" : "Test Uživatel",
    "currency" : "CZK",
    "email" : "test@example.com"
  }
}
2025-04-14T14:42:32.251+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : Sending Proforma Invoice request to SF API: URL=https://moje.superfaktura.cz/invoices/create.json, Method=POST
2025-04-14T14:42:32.474+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : Raw SF API Response Body for Proforma Invoice (Order 209): START
{"error":0,"error_message":"Invoice created","data":{"Invoice":{"id":"7669507","user_id":"39487","user_profile_id":"36761","client_id":"3494334","parent_id":null,"proforma_id":null,"estimate_id":null,"sequence_id":"305625","import_type":null,"import_id":null,"import_parent_id":null,"type":"proforma","template":null,"tax_document":null,"name":"Z\u00e1lohov\u00e1 faktura 000005\/2025","lang":null,"client_data":"{\"Client\":{\"user_id\":\"39487\",\"user_profile_id\":\"36761\",\"uuid\":null,\"country_id\":\"57\",\"name\":\"Test U\\u017eivatel\",\"ico\":null,\"dic\":null,\"ic_dph\":null,\"iban\":null,\"swift\":null,\"bank_account_prefix\":null,\"bank_account\":null,\"bank_code\":null,\"account\":null,\"email\":\"test@example.com\",\"address\":\"Testovac\\u00ed 123\",\"city\":\"Testov\",\"zip\":\"12345\",\"state\":null,\"country\":\"\\u010cesk\\u00e1 republika\",\"delivery_name\":null,\"delivery_address\":null,\"delivery_city\":null,\"delivery_zip\":null,\"delivery_state\":null,\"delivery_country\":null,\"delivery_country_id\":null,\"phone\":\"123456789\",\"delivery_phone\":null,\"fax\":null,\"due_date\":null,\"default_variable\":null,\"discount\":null,\"currency\":\"CZK\",\"bank_account_id\":null,\"comment\":null,\"tags\":null,\"distance\":null,\"dont_travel\":null,\"notices\":\"1\",\"id\":3494334}}","my_data":"{\"MyData\":{\"id\":\"36761\",\"user_id\":\"39451\",\"country_id\":\"57\",\"company_name\":\"Truhl\\u00e1\\u0159stv\\u00ed Kol\\u00e1\\u0159\",\"ico\":\"73589292\",\"dic\":\"\",\"ic_dph\":\"CZ8204183086\",\"business_register\":\"\",\"address\":\"Dru\\u017estevn\\u00ed 304\",\"city\":\"\\u0158e\\u010dany nad Labem\",\"zip\":\"53313\",\"tax_payer\":\"1\",\"BankAccount\":[{\"id\":\"29020\",\"user_id\":\"39451\",\"user_profile_id\":\"36761\",\"currency\":\"CZK\",\"default\":true,\"show\":true,\"country_id\":\"57\",\"bank_name\":\"Fio banka a.s.\",\"bank_code\":\"2010\",\"account\":\"2601817728\",\"iban\":\"CZ0420100000002601817728\",\"swift\":\"FIOBCZPPXXX\",\"created\":\"2021-09-30 09:01:03\",\"modified\":\"2022-03-15 08:14:09\",\"show_account\":true}],\"Logo\":[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}],\"Signature\":{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}}}","items_data":"Z\u00e1loha na d\u0159evn\u00edk dle obj. \u010d. 209 Z\u00e1loha 50% z 41805.00 CZK, ","invoice_no":"5","order_no":"209","invoice_no_formatted":"000005\/2025","invoice_no_formatted_raw":"52025","invoice_no_formatted_length":"11","mask":"YYYYNNN","variable":"209","variable_raw":"209","constant":"","specific":"4","payment_type":"transfer","status":"1","home_currency":"CZK","invoice_currency":"CZK","exchange_rate":1,"country_exchange_rate":"1.00000000000000","amount":"16528.93","vat":"3471.08","discount":"0","items_name":null,"issued_by":"mirsvobo","issued_by_phone":"704756313","issued_by_email":"mirsvobo@gmail.com","paid":"0.00","amount_paid":"0.00","deposit":"0.00","header_comment":"","comment":"","internal_comment":null,"created":"2025-04-14 00:00:00","modified":"2025-04-14 14:42:37","recurring":null,"paydate":null,"delivery":null,"taxdate":null,"accounting_date":"2025-04-14","delivery_type":"haulage","due":"2025-04-21","demo":"0","token":"f3762353","tags":null,"rounding":"item","vat_transfer":null,"special_vat_scheme":null,"issued_by_web":null,"summary_invoice":null,"total_amount":"20000.01","show_items_with_dph":true,"show_special_vat":false,"flag":"issued"},"Client":{"id":"3494334","user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Test U\u017eivatel","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"test@example.com","address":"Testovac\u00ed 123","city":"Testov","zip":"12345","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"123456789","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":null,"bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"created":"2025-04-05 16:36:22","modified":"2025-04-05 16:36:22","notices":true},"0":{"to_pay":"20000.010000","to_pay_in_invoice_currency":"20000.01","total":"20000.01"},"InvoiceEmail":[],"PostStamp":[],"InvoiceSetting":{"signature":true,"bysquare":true,"payment_info":true,"language":"cze","online_payment":false,"summary_bg_color":"#d4eef6","force_iban":true},"InvoicePayment":[],"Tag":[],"ClientData":{"user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Test U\u017eivatel","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"test@example.com","address":"Testovac\u00ed 123","city":"Testov","zip":"12345","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"123456789","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":"CZK","bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"notices":"1","id":3494334,"Country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true}},"MyData":{"id":"36761","user_id":"39451","country_id":"57","company_name":"Truhl\u00e1\u0159stv\u00ed Kol\u00e1\u0159","ico":"73589292","dic":"","ic_dph":"CZ8204183086","business_register":"","address":"Dru\u017estevn\u00ed 304","city":"\u0158e\u010dany nad Labem","zip":"53313","tax_payer":"1","BankAccount":[{"id":"29020","user_id":"39451","user_profile_id":"36761","currency":"CZK","default":true,"show":true,"country_id":"57","bank_name":"Fio banka a.s.","bank_code":"2010","account":"2601817728","iban":"CZ0420100000002601817728","swift":"FIOBCZPPXXX","created":"2021-09-30 09:01:03","modified":"2022-03-15 08:14:09","show_account":true}],"Logo":"[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"mobile_path\":\"imagecache\\\/media\\\/transfer\\\/img\\\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}]","Signature":"{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}","country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true},"SignatureRaw":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"LogoRaw":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}]},"Logo":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}],"Signature":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"InvoiceItem":[{"id":"24636690","invoice_id":"7669507","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"Z\u00e1loha na d\u0159evn\u00edk dle obj. \u010d. 209","description":"Z\u00e1loha 50% z 41805.00 CZK","sku":null,"quantity":"1.00000","unit":"ks","unit_price":16528.93,"tax":21,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"0","hide_in_autocomplete":null,"unit_price_discount":16528.93,"item_price":16528.93,"item_price_no_discount":16528.93,"discount_no_vat":-0,"discount_with_vat":-0,"discount_with_vat_total":-0,"discount_no_vat_total":-0,"unit_price_vat":20000.0053,"unit_price_vat_no_discount":20000.0053,"item_price_vat":20000.01,"item_price_vat_no_discount":20000.01,"item_price_vat_check":20000.01}],"Summary":{"vat_base_separate":{"21":16528.93},"vat_base_total":16528.93,"vat_separate":{"21":3471.08},"vat_total":3471.08,"invoice_total":20000.01,"discount":0},"SummaryInvoice":{"vat_base_separate_positive":{"21":16528.93},"vat_base_separate_negative":{"21":0},"vat_separate_positive":{"21":3471.08},"vat_separate_negative":{"21":0}},"UnitCount":{"ks":1},"Paypal":false,"RelatedItems":[],"Qr":{"qr":"SPD*1.0*ACC:CZ0420100000002601817728+FIOBCZPPXXX*AM:20000.01*CC:CZK*MSG:000005%252F2025%2B-%2BTEST%2BUZIVATEL*X-VS:209*X-SS:4","qr_type":"QrPlatba","qr_url":"https:\/\/moje.superfaktura.cz\/tools\/qrCoder?key=f067e1d3bc1fac9a33ec40205b53cf1b&text=SPD%2A1.0%2AACC%3ACZ0420100000002601817728%2BFIOBCZPPXXX%2AAM%3A20000.01%2ACC%3ACZK%2AMSG%3A000005%25252F2025%252B-%252BTEST%252BUZIVATEL%2AX-VS%3A209%2AX-SS%3A4&size=150"},"PaymentLink":""}}
END_RESPONSE
2025-04-14T14:42:32.474+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : Proforma Invoice API call successful for order 209.
2025-04-14T14:42:32.474+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : Constructed PDF download URL with token: https://moje.superfaktura.cz/invoices/pdf/7669507/token:f3762353
2025-04-14T14:42:32.474+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : Parsed Proforma Invoice response for order 209: ID=7669507, Number=000005/2025, PDF URL=https://moje.superfaktura.cz/invoices/pdf/7669507/token:f3762353
2025-04-14T14:42:32.481+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : Order 209 updated with Proforma Invoice details.
2025-04-14T14:42:32.507+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/4
2025-04-14T14:42:32.507+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:42:32.507+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:42:32.507+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 4
2025-04-14T14:42:32.507+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Finding order by ID: 4
2025-04-14T14:42:32.523+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:42:32.523+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 4
2025-04-14T14:42:35.880+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/4/generate-tax-doc
2025-04-14T14:42:35.885+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:42:35.885+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:42:35.885+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.a.controller.AdminOrderController  : Admin action: Trigger SuperFaktura TAX DOC for order ID: 4
2025-04-14T14:42:35.885+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] org.example.eshop.service.OrderService   : Finding order by ID: 4
2025-04-14T14:42:35.891+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.s.SuperFakturaInvoiceService       : Attempting to generate SuperFaktura TAX DOCUMENT for paid deposit for order: 209. Order currency: CZK
2025-04-14T14:42:35.896+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.s.SuperFakturaInvoiceService       : SF API Request Payload (Tax Document (Deposit) - Order 209):
{
  "Invoice" : {
    "order_no" : "209",
    "date" : "2025-04-11",
    "note" : "Daňový doklad k záloze zaplacené dne 11.4.2025 k obj. č. 209.\nVztahuje se k zálohové faktuře č. 000005/2025.",
    "due_date" : "2025-04-11",
    "rounding" : "item",
    "language" : "cze",
    "specific" : "4",
    "type" : "regular",
    "payment_type" : "transfer",
    "delivery_date" : "2025-04-11",
    "variable" : "209",
    "sequence_id" : 342836,
    "currency" : "CZK",
    "already_paid" : 20000.00,
    "paid_date" : "2025-04-11"
  },
  "InvoiceItem" : [ {
    "unit" : "ks",
    "quantity" : 1,
    "name" : "Přijatá záloha k obj. č. 209",
    "tax" : 21.00,
    "currency" : "CZK",
    "unit_price" : 16528.93
  } ],
  "Client" : {
    "zip" : "12345",
    "country" : "Česká republika",
    "address" : "Testovací 123",
    "phone" : "123456789",
    "city" : "Testov",
    "name" : "Test Uživatel",
    "currency" : "CZK",
    "email" : "test@example.com"
  }
}
2025-04-14T14:42:35.896+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.s.SuperFakturaInvoiceService       : Sending Tax Document (Deposit) request to SF API: URL=https://moje.superfaktura.cz/invoices/create.json, Method=POST
2025-04-14T14:42:36.079+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.s.SuperFakturaInvoiceService       : Raw SF API Response Body for Tax Document (Deposit) (Order 209): START
{"error":0,"error_message":"Invoice created","data":{"Invoice":{"id":"7669508","user_id":"39487","user_profile_id":"36761","client_id":"3494334","parent_id":null,"proforma_id":null,"estimate_id":null,"sequence_id":"342836","import_type":null,"import_id":null,"import_parent_id":null,"type":"regular","template":null,"tax_document":null,"name":"Z\u00e1lohov\u00e1 faktura 0005\/2025","lang":null,"client_data":"{\"Client\":{\"user_id\":\"39487\",\"user_profile_id\":\"36761\",\"uuid\":null,\"country_id\":\"57\",\"name\":\"Test U\\u017eivatel\",\"ico\":null,\"dic\":null,\"ic_dph\":null,\"iban\":null,\"swift\":null,\"bank_account_prefix\":null,\"bank_account\":null,\"bank_code\":null,\"account\":null,\"email\":\"test@example.com\",\"address\":\"Testovac\\u00ed 123\",\"city\":\"Testov\",\"zip\":\"12345\",\"state\":null,\"country\":\"\\u010cesk\\u00e1 republika\",\"delivery_name\":null,\"delivery_address\":null,\"delivery_city\":null,\"delivery_zip\":null,\"delivery_state\":null,\"delivery_country\":null,\"delivery_country_id\":null,\"phone\":\"123456789\",\"delivery_phone\":null,\"fax\":null,\"due_date\":null,\"default_variable\":null,\"discount\":null,\"currency\":\"CZK\",\"bank_account_id\":null,\"comment\":null,\"tags\":null,\"distance\":null,\"dont_travel\":null,\"notices\":\"1\",\"id\":3494334}}","my_data":"{\"MyData\":{\"id\":\"36761\",\"user_id\":\"39451\",\"country_id\":\"57\",\"company_name\":\"Truhl\\u00e1\\u0159stv\\u00ed Kol\\u00e1\\u0159\",\"ico\":\"73589292\",\"dic\":\"\",\"ic_dph\":\"CZ8204183086\",\"business_register\":\"\",\"address\":\"Dru\\u017estevn\\u00ed 304\",\"city\":\"\\u0158e\\u010dany nad Labem\",\"zip\":\"53313\",\"tax_payer\":\"1\",\"BankAccount\":[{\"id\":\"29020\",\"user_id\":\"39451\",\"user_profile_id\":\"36761\",\"currency\":\"CZK\",\"default\":true,\"show\":true,\"country_id\":\"57\",\"bank_name\":\"Fio banka a.s.\",\"bank_code\":\"2010\",\"account\":\"2601817728\",\"iban\":\"CZ0420100000002601817728\",\"swift\":\"FIOBCZPPXXX\",\"created\":\"2021-09-30 09:01:03\",\"modified\":\"2022-03-15 08:14:09\",\"show_account\":true}],\"Logo\":[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}],\"Signature\":{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}}}","items_data":"P\u0159ijat\u00e1 z\u00e1loha k obj. \u010d. 209 , ","invoice_no":"5","order_no":"209","invoice_no_formatted":"0005\/2025","invoice_no_formatted_raw":"52025","invoice_no_formatted_length":"9","mask":"YYYYNNN","variable":"209","variable_raw":"209","constant":"","specific":"4","payment_type":"transfer","status":"3","home_currency":"CZK","invoice_currency":"CZK","exchange_rate":1,"country_exchange_rate":"1.00000000000000","amount":"16528.93","vat":"3471.08","discount":"0","items_name":null,"issued_by":"mirsvobo","issued_by_phone":"704756313","issued_by_email":"mirsvobo@gmail.com","paid":"20000.01","amount_paid":"20000.01","deposit":"0.00","header_comment":"","comment":"","internal_comment":null,"created":"2025-04-14 00:00:00","modified":"2025-04-14 14:42:40","recurring":null,"paydate":"2025-04-14 00:00:00","delivery":"2025-04-14 00:00:00","taxdate":null,"accounting_date":"2025-04-14","delivery_type":"haulage","due":"2025-04-21","demo":"0","token":"eee3802a","tags":"","rounding":"item","vat_transfer":null,"special_vat_scheme":null,"issued_by_web":null,"summary_invoice":null,"total_amount":"20000.01","show_items_with_dph":true,"show_special_vat":false,"flag":"fully-paid"},"Client":{"id":"3494334","user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Test U\u017eivatel","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"test@example.com","address":"Testovac\u00ed 123","city":"Testov","zip":"12345","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"123456789","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":null,"bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"created":"2025-04-05 16:36:22","modified":"2025-04-05 16:36:22","notices":true},"0":{"to_pay":"0.000000","to_pay_in_invoice_currency":"0.00","total":"20000.01"},"InvoiceEmail":[],"PostStamp":[],"InvoiceSetting":{"signature":true,"bysquare":true,"payment_info":true,"language":"cze","online_payment":false,"summary_bg_color":"#d4eef6","force_iban":true},"InvoicePayment":[{"id":"4939915","invoice_id":"7669508","import_payment_id":null,"user_id":"39487","user_profile_id":"36761","payment_type":"transfer","amount":"16528.93","home_currency":"CZK","payment_currency":"CZK","country_exchange_rate":"1.00000000000000","exchange_rate":"1.00000000000000","vat":"3471.08","document_no":null,"created":"2025-04-14 00:00:00"}],"Tag":[],"ClientData":{"user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Test U\u017eivatel","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"test@example.com","address":"Testovac\u00ed 123","city":"Testov","zip":"12345","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"123456789","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":"CZK","bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"notices":"1","id":3494334,"Country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true}},"MyData":{"id":"36761","user_id":"39451","country_id":"57","company_name":"Truhl\u00e1\u0159stv\u00ed Kol\u00e1\u0159","ico":"73589292","dic":"","ic_dph":"CZ8204183086","business_register":"","address":"Dru\u017estevn\u00ed 304","city":"\u0158e\u010dany nad Labem","zip":"53313","tax_payer":"1","BankAccount":[{"id":"29020","user_id":"39451","user_profile_id":"36761","currency":"CZK","default":true,"show":true,"country_id":"57","bank_name":"Fio banka a.s.","bank_code":"2010","account":"2601817728","iban":"CZ0420100000002601817728","swift":"FIOBCZPPXXX","created":"2021-09-30 09:01:03","modified":"2022-03-15 08:14:09","show_account":true}],"Logo":"[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"mobile_path\":\"imagecache\\\/media\\\/transfer\\\/img\\\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}]","Signature":"{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}","country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true},"SignatureRaw":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"LogoRaw":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}]},"Logo":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}],"Signature":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"InvoiceItem":[{"id":"24636691","invoice_id":"7669508","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"P\u0159ijat\u00e1 z\u00e1loha k obj. \u010d. 209","description":"","sku":null,"quantity":"1.00000","unit":"ks","unit_price":16528.93,"tax":21,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"0","hide_in_autocomplete":null,"unit_price_discount":16528.93,"item_price":16528.93,"item_price_no_discount":16528.93,"discount_no_vat":-0,"discount_with_vat":-0,"discount_with_vat_total":-0,"discount_no_vat_total":-0,"unit_price_vat":20000.0053,"unit_price_vat_no_discount":20000.0053,"item_price_vat":20000.01,"item_price_vat_no_discount":20000.01,"item_price_vat_check":20000.01}],"Summary":{"vat_base_separate":{"21":16528.93},"vat_base_total":16528.93,"vat_separate":{"21":3471.08},"vat_total":3471.08,"invoice_total":20000.01,"discount":0},"SummaryInvoice":{"vat_base_separate_positive":{"21":16528.93},"vat_base_separate_negative":{"21":0},"vat_separate_positive":{"21":3471.08},"vat_separate_negative":{"21":0}},"UnitCount":{"ks":1},"Paypal":false,"RelatedItems":[],"Qr":{"qr":"","qr_type":"","qr_url":""},"PaymentLink":""}}
END_RESPONSE
2025-04-14T14:42:36.081+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.s.SuperFakturaInvoiceService       : Tax Document (Deposit) API call successful for order 209.
2025-04-14T14:42:36.081+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.s.SuperFakturaInvoiceService       : Constructed PDF download URL with token: https://moje.superfaktura.cz/invoices/pdf/7669508/token:eee3802a
2025-04-14T14:42:36.081+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.s.SuperFakturaInvoiceService       : Parsed Tax Document response for order 209: ID=7669508, Number=0005/2025, PDF URL=https://moje.superfaktura.cz/invoices/pdf/7669508/token:eee3802a
2025-04-14T14:42:36.085+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.s.SuperFakturaInvoiceService       : Order 209 updated with Tax Document details.
2025-04-14T14:42:36.110+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/4
2025-04-14T14:42:36.110+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:42:36.110+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:42:36.110+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 4
2025-04-14T14:42:36.110+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.OrderService   : Finding order by ID: 4
2025-04-14T14:42:36.126+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:42:36.126+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 4
2025-04-14T14:42:37.091+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/4/generate-final
2025-04-14T14:42:37.091+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:42:37.091+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:42:37.093+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Admin action: Trigger SuperFaktura FINAL invoice for order ID: 4
2025-04-14T14:42:37.093+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Finding order by ID: 4
2025-04-14T14:42:37.100+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.s.SuperFakturaInvoiceService       : Attempting to generate SuperFaktura FINAL invoice for order: 209. Order currency: CZK
2025-04-14T14:42:37.100+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.s.SuperFakturaInvoiceService       : Linking final invoice for order 209 to Proforma ID: 7669507
2025-04-14T14:42:37.104+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.s.SuperFakturaInvoiceService       : Calculating rounding difference for order 209: Original=41805.50, Rounded=41805.00, Difference=0.50
2025-04-14T14:42:37.104+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.s.SuperFakturaInvoiceService       : Added rounding item to SF payload for order 209: Amount=-0.50
2025-04-14T14:42:37.104+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.s.SuperFakturaInvoiceService       : Not setting 'already_paid' for final invoice 209. Relying on SF deduction via linked proforma_id or payment status.
2025-04-14T14:42:37.105+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.s.SuperFakturaInvoiceService       : SF API Request Payload (Final Invoice - Order 209):
{
  "Invoice" : {
    "order_no" : "209",
    "date" : "2025-04-14",
    "note" : "Odpočet zálohy dle zálohové faktury č. 000005/2025.\nMalý na míru s okapem.",
    "due_date" : "2025-04-28",
    "rounding" : "item",
    "language" : "cze",
    "specific" : "4",
    "type" : "regular",
    "payment_type" : "transfer",
    "delivery_date" : "2025-04-14",
    "variable" : "209",
    "currency" : "CZK",
    "proforma_id" : 7669507
  },
  "InvoiceItem" : [ {
    "unit" : "ks",
    "quantity" : 1,
    "name" : "Dřevník na míru (Na míru|Rozměry (DxHxV): 280x90x195 cm|Okap: Ano)",
    "description" : "Rozměry (DxHxV): 280x90x195 cm | Okap\nDoplňky: Polička navíc",
    "tax" : 21.00,
    "currency" : "CZK",
    "unit_price" : 34050.00,
    "sku" : "CUSTOM-3"
  }, {
    "unit" : "ks",
    "quantity" : 1,
    "name" : "Doprava",
    "tax" : 21.00,
    "currency" : "CZK",
    "unit_price" : 500.00
  }, {
    "unit" : "",
    "quantity" : 1,
    "name" : "Zaokrouhlení",
    "tax" : 0.00,
    "currency" : "CZK",
    "unit_price" : -0.50
  } ],
  "Client" : {
    "zip" : "12345",
    "country" : "Česká republika",
    "address" : "Testovací 123",
    "phone" : "123456789",
    "city" : "Testov",
    "name" : "Test Uživatel",
    "currency" : "CZK",
    "email" : "test@example.com"
  }
}
2025-04-14T14:42:37.105+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.s.SuperFakturaInvoiceService       : Sending Final Invoice request to SF API: URL=https://moje.superfaktura.cz/invoices/create.json, Method=POST
2025-04-14T14:42:37.424+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.s.SuperFakturaInvoiceService       : Raw SF API Response Body for Final Invoice (Order 209): START
{"error":0,"error_message":"Invoice created","data":{"Invoice":{"id":"7669510","user_id":"39487","user_profile_id":"36761","client_id":"3494334","parent_id":null,"proforma_id":"7669507","estimate_id":null,"sequence_id":"305624","import_type":null,"import_id":null,"import_parent_id":null,"type":"regular","template":null,"tax_document":null,"name":"Faktura 000010\/2025","lang":null,"client_data":"{\"Client\":{\"user_id\":\"39487\",\"user_profile_id\":\"36761\",\"uuid\":null,\"country_id\":\"57\",\"name\":\"Test U\\u017eivatel\",\"ico\":null,\"dic\":null,\"ic_dph\":null,\"iban\":null,\"swift\":null,\"bank_account_prefix\":null,\"bank_account\":null,\"bank_code\":null,\"account\":null,\"email\":\"test@example.com\",\"address\":\"Testovac\\u00ed 123\",\"city\":\"Testov\",\"zip\":\"12345\",\"state\":null,\"country\":\"\\u010cesk\\u00e1 republika\",\"delivery_name\":null,\"delivery_address\":null,\"delivery_city\":null,\"delivery_zip\":null,\"delivery_state\":null,\"delivery_country\":null,\"delivery_country_id\":null,\"phone\":\"123456789\",\"delivery_phone\":null,\"fax\":null,\"due_date\":null,\"default_variable\":null,\"discount\":null,\"currency\":\"CZK\",\"bank_account_id\":null,\"comment\":null,\"tags\":null,\"distance\":null,\"dont_travel\":null,\"notices\":\"1\",\"id\":3494334}}","my_data":"{\"MyData\":{\"id\":\"36761\",\"user_id\":\"39451\",\"country_id\":\"57\",\"company_name\":\"Truhl\\u00e1\\u0159stv\\u00ed Kol\\u00e1\\u0159\",\"ico\":\"73589292\",\"dic\":\"\",\"ic_dph\":\"CZ8204183086\",\"business_register\":\"\",\"address\":\"Dru\\u017estevn\\u00ed 304\",\"city\":\"\\u0158e\\u010dany nad Labem\",\"zip\":\"53313\",\"tax_payer\":\"1\",\"BankAccount\":[{\"id\":\"29020\",\"user_id\":\"39451\",\"user_profile_id\":\"36761\",\"currency\":\"CZK\",\"default\":true,\"show\":true,\"country_id\":\"57\",\"bank_name\":\"Fio banka a.s.\",\"bank_code\":\"2010\",\"account\":\"2601817728\",\"iban\":\"CZ0420100000002601817728\",\"swift\":\"FIOBCZPPXXX\",\"created\":\"2021-09-30 09:01:03\",\"modified\":\"2022-03-15 08:14:09\",\"show_account\":true}],\"Logo\":[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}],\"Signature\":{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}}}","items_data":"D\u0159evn\u00edk na m\u00edru (Na m\u00edru|Rozm\u011bry (DxHxV): 280x90x195 cm|Okap: Ano) Rozm\u011bry (DxHxV): 280x90x195 cm | Okap\nDopl\u0148ky: Poli\u010dka nav\u00edc, Doprava , Zaokrouhlen\u00ed , ","invoice_no":"10","order_no":"209","invoice_no_formatted":"000010\/2025","invoice_no_formatted_raw":"102025","invoice_no_formatted_length":"11","mask":"YYYYNNN","variable":"209","variable_raw":"209","constant":"","specific":"4","payment_type":"transfer","status":"1","home_currency":"CZK","invoice_currency":"CZK","exchange_rate":1,"country_exchange_rate":"1.00000000000000","amount":"34549.50","vat":"7255.50","discount":"0","items_name":null,"issued_by":"mirsvobo","issued_by_phone":"704756313","issued_by_email":"mirsvobo@gmail.com","paid":"0.00","amount_paid":"0.00","deposit":"0.00","header_comment":"","comment":"","internal_comment":null,"created":"2025-04-14 00:00:00","modified":"2025-04-14 14:42:41","recurring":null,"paydate":null,"delivery":"2025-04-14 00:00:00","taxdate":null,"accounting_date":"2025-04-14","delivery_type":"haulage","due":"2025-04-21","demo":"0","token":"e1f158e0","tags":"","rounding":"item","vat_transfer":null,"special_vat_scheme":null,"issued_by_web":null,"summary_invoice":null,"total_amount":"41805.00","show_items_with_dph":true,"show_special_vat":false,"flag":"issued"},"Client":{"id":"3494334","user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Test U\u017eivatel","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"test@example.com","address":"Testovac\u00ed 123","city":"Testov","zip":"12345","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"123456789","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":null,"bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"created":"2025-04-05 16:36:22","modified":"2025-04-05 16:36:22","notices":true},"0":{"to_pay":"41805.000000","to_pay_in_invoice_currency":"41805.00","total":"41805.00"},"InvoiceEmail":[],"PostStamp":[],"InvoiceSetting":{"signature":true,"bysquare":true,"payment_info":true,"language":"cze","online_payment":false,"summary_bg_color":"#d4eef6","force_iban":true},"InvoicePayment":[],"Tag":[],"ClientData":{"user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Test U\u017eivatel","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"test@example.com","address":"Testovac\u00ed 123","city":"Testov","zip":"12345","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"123456789","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":"CZK","bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"notices":"1","id":3494334,"Country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true}},"MyData":{"id":"36761","user_id":"39451","country_id":"57","company_name":"Truhl\u00e1\u0159stv\u00ed Kol\u00e1\u0159","ico":"73589292","dic":"","ic_dph":"CZ8204183086","business_register":"","address":"Dru\u017estevn\u00ed 304","city":"\u0158e\u010dany nad Labem","zip":"53313","tax_payer":"1","BankAccount":[{"id":"29020","user_id":"39451","user_profile_id":"36761","currency":"CZK","default":true,"show":true,"country_id":"57","bank_name":"Fio banka a.s.","bank_code":"2010","account":"2601817728","iban":"CZ0420100000002601817728","swift":"FIOBCZPPXXX","created":"2021-09-30 09:01:03","modified":"2022-03-15 08:14:09","show_account":true}],"Logo":"[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"mobile_path\":\"imagecache\\\/media\\\/transfer\\\/img\\\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}]","Signature":"{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}","country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true},"SignatureRaw":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"LogoRaw":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}]},"Logo":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}],"Signature":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"InvoiceItem":[{"id":"24636713","invoice_id":"7669510","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"D\u0159evn\u00edk na m\u00edru (Na m\u00edru|Rozm\u011bry (DxHxV): 280x90x195 cm|Okap: Ano)","description":"Rozm\u011bry (DxHxV): 280x90x195 cm | Okap\nDopl\u0148ky: Poli\u010dka nav\u00edc","sku":"CUSTOM-3","quantity":"1.00000","unit":"ks","unit_price":34050,"tax":21,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"0","hide_in_autocomplete":null,"unit_price_discount":34050,"item_price":34050,"item_price_no_discount":34050,"discount_no_vat":-0,"discount_with_vat":-0,"discount_with_vat_total":-0,"discount_no_vat_total":-0,"unit_price_vat":41200.5,"unit_price_vat_no_discount":41200.5,"item_price_vat":41200.5,"item_price_vat_no_discount":41200.5,"item_price_vat_check":41200.5},{"id":"24636714","invoice_id":"7669510","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"Doprava","description":"","sku":null,"quantity":"1.00000","unit":"ks","unit_price":500,"tax":21,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"1","hide_in_autocomplete":null,"unit_price_discount":500,"item_price":500,"item_price_no_discount":500,"discount_no_vat":-0,"discount_with_vat":-0,"discount_with_vat_total":-0,"discount_no_vat_total":-0,"unit_price_vat":605,"unit_price_vat_no_discount":605,"item_price_vat":605,"item_price_vat_no_discount":605,"item_price_vat_check":605},{"id":"24636715","invoice_id":"7669510","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"Zaokrouhlen\u00ed","description":"","sku":null,"quantity":"1.00000","unit":"","unit_price":-0.5,"tax":0,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"2","hide_in_autocomplete":null,"unit_price_discount":-0.5,"item_price":-0.5,"item_price_no_discount":-0.5,"discount_no_vat":0,"discount_with_vat":0,"discount_with_vat_total":0,"discount_no_vat_total":0,"unit_price_vat":-0.5,"unit_price_vat_no_discount":-0.5,"item_price_vat":-0.5,"item_price_vat_no_discount":-0.5,"item_price_vat_check":-0.5}],"Summary":{"vat_base_separate":{"21":34550,"0":-0.5},"vat_base_total":34549.5,"vat_separate":{"21":7255.5,"0":-0},"vat_total":7255.5,"invoice_total":41805,"discount":0},"SummaryInvoice":{"vat_base_separate_positive":{"21":34550,"0":-0.5},"vat_base_separate_negative":{"21":0,"0":0},"vat_separate_positive":{"21":7255.5,"0":-0},"vat_separate_negative":{"21":0,"0":0}},"UnitCount":{"ks":2},"Paypal":false,"RelatedItems":[],"Qr":{"qr":"SPD*1.0*ACC:CZ0420100000002601817728+FIOBCZPPXXX*AM:41805*CC:CZK*MSG:000010%252F2025%2B-%2BTEST%2BUZIVATEL*X-VS:209*X-SS:4","qr_type":"QrPlatba","qr_url":"https:\/\/moje.superfaktura.cz\/tools\/qrCoder?key=247f5404127cca8a16c73dd4512902b9&text=SPD%2A1.0%2AACC%3ACZ0420100000002601817728%2BFIOBCZPPXXX%2AAM%3A41805%2ACC%3ACZK%2AMSG%3A000010%25252F2025%252B-%252BTEST%252BUZIVATEL%2AX-VS%3A209%2AX-SS%3A4&size=150"},"PaymentLink":""}}
END_RESPONSE
2025-04-14T14:42:37.424+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.s.SuperFakturaInvoiceService       : Final Invoice API call successful for order 209.
2025-04-14T14:42:37.424+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.s.SuperFakturaInvoiceService       : Constructed PDF download URL with token: https://moje.superfaktura.cz/invoices/pdf/7669510/token:e1f158e0
2025-04-14T14:42:37.424+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.s.SuperFakturaInvoiceService       : Parsed Final Invoice response for order 209: ID=7669510, Number=000010/2025, PDF URL=https://moje.superfaktura.cz/invoices/pdf/7669510/token:e1f158e0
2025-04-14T14:42:37.424+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.s.SuperFakturaInvoiceService       : Order 209 updated with Final Invoice details.
2025-04-14T14:42:37.449+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/4
2025-04-14T14:42:37.449+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:42:37.449+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:42:37.449+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 4
2025-04-14T14:42:37.449+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] org.example.eshop.service.OrderService   : Finding order by ID: 4
2025-04-14T14:42:37.459+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:42:37.461+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 4
2025-04-14T14:43:07.523+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/4/mark-fully-paid
2025-04-14T14:43:07.523+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:07.523+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:07.523+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.controller.AdminOrderController  : Admin action: Attempting to mark order as fully paid for order ID: 4
2025-04-14T14:43:07.523+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] org.example.eshop.service.OrderService   : Calculating remaining amount for order 209: Total(41805.00) - Deposit(20000.00) = 21805.00
2025-04-14T14:43:07.523+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] org.example.eshop.service.OrderService   : Marking order 209 fully paid on 2025-04-14
2025-04-14T14:43:07.523+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] org.example.eshop.service.OrderService   : Attempting to mark final invoice SF ID 7669510 as paid in SuperFaktura (Amount: 21805.00, Date: 2025-04-14, Type: transfer) for order 209
2025-04-14T14:43:07.531+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : Attempting to mark invoice SF ID 7669510 as paid for order 209 via API. Amount: 21805.00, Date: 2025-04-14, Type: transfer
2025-04-14T14:43:07.539+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : Found currency 'CZK' for invoice SF ID 7669510 from order 209
2025-04-14T14:43:07.539+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : SF API Request Payload (Mark Invoice Paid - Order 209):
{
  "InvoicePayment" : {
    "date" : "2025-04-14",
    "payment_type" : "transfer",
    "amount" : 21805.00,
    "invoice_id" : 7669510,
    "currency" : "CZK"
  }
}
2025-04-14T14:43:07.539+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : Sending Mark Invoice Paid request to SF API: URL=https://moje.superfaktura.cz/invoice_payments/add/invoice_id:7669510.json, Method=POST
2025-04-14T14:43:07.836+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : Raw SF API Response Body for Mark Invoice Paid (Order 209): START
{"payment_id":"4939919","error":0,"invoice_id":7669510,"status":2,"paid":21805,"to_pay":20000,"to_pay_home_cur":20000,"currency":"K\u010d","home_currency":"K\u010d","exchange_rate":1,"country_exchange_rate":1,"invoice_type":"regular","parent_id":null,"overdue":false,"created":"2025-04-14","invoice_currency":"K\u010d","flash_message":{"text":"Platba byla ulo\u017eena","type":"success"}}
END_RESPONSE
2025-04-14T14:43:07.836+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : SF API call successful (2xx) for Mark Invoice Paid (Order 209). Response has no 'data' key.
2025-04-14T14:43:07.836+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.s.SuperFakturaInvoiceService       : Successfully requested marking invoice SF ID 7669510 as paid for order 209
2025-04-14T14:43:07.838+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] org.example.eshop.service.OrderService   : Successfully requested marking final invoice SF ID 7669510 as paid in SuperFaktura.
2025-04-14T14:43:07.847+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.controller.AdminOrderController  : Admin action: Order marked as fully paid for order ID: 4
2025-04-14T14:43:07.862+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/4
2025-04-14T14:43:07.862+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:07.862+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:07.865+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 4
2025-04-14T14:43:07.865+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Finding order by ID: 4
2025-04-14T14:43:07.876+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:43:07.878+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 4
2025-04-14T14:43:51.330+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T14:43:51.330+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:51.330+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:51.330+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T14:43:52.745+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkty
2025-04-14T14:43:52.745+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:52.745+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:52.745+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do listProducts. Pageable: Page request [number: 0, size 9, sort: name: ASC]
2025-04-14T14:43:52.745+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProducts(Pageable: Page request [number: 0, size 9, sort: name: ASC]) <<<
2025-04-14T14:43:52.777+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : [ProductService] getActiveProducts(Pageable): Načtena stránka s 3 aktivními produkty.
2025-04-14T14:43:52.777+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProducts(Pageable) <<<
2025-04-14T14:43:52.777+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : [ProductController] ProductService.getActiveProducts vrátil stránku: TotalElements=3, TotalPages=1, Number=0, Size=9
2025-04-14T14:43:52.786+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : [ProductController] Hibernate.initialize(images) dokončeno pro 3 produktů na stránce.
2025-04-14T14:43:52.786+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím listProducts. Obsah modelu před vrácením 'produkty': {currentGlobalCurrency=CZK, productPage=Page 1 of 1 containing org.example.eshop.model.Product instances}
2025-04-14T14:43:52.931+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T14:43:52.932+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T14:43:52.932+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:52.932+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:52.932+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:52.932+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:52.933+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/placeholder-custom.png
2025-04-14T14:43:52.933+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:52.933+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:52.964+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:43:52.964+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:43:52.964+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "placeholder-custom.png"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:43:52.982+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T14:43:52.982+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T14:43:52.982+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]]
2025-04-14T14:43:54.854+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkt/na-miru
2025-04-14T14:43:54.854+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:54.854+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:54.859+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do productDetail. Slug: na-miru
2025-04-14T14:43:54.859+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProductBySlug. Slug: na-miru
2025-04-14T14:43:54.873+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] getActiveProductBySlug: Aktivní produkt se slugem 'na-miru' nalezen.
2025-04-14T14:43:54.873+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProductBySlug (Slug: na-miru) <<<
2025-04-14T14:43:54.874+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Produkt ID 3 nalezen pro slug 'na-miru'.
2025-04-14T14:43:54.874+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Inicializovány obrázky pro produkt ID 3
2025-04-14T14:43:54.874+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Zpracovávám detail pro CUSTOM produkt ID 3
2025-04-14T14:43:54.881+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Inicializován konfigurátor, addony a atributy pro custom produkt ID 3
2025-04-14T14:43:54.887+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Přidány atributy (Design: 2, Glaze: 3, RoofColor: 3) do modelu.
2025-04-14T14:43:54.887+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: CZK
2025-04-14T14:43:54.887+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (CZK): 13250.00
2025-04-14T14:43:54.887+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (CZK): 0.00
2025-04-14T14:43:54.887+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] Price for divider (CZK): 0.00
2025-04-14T14:43:54.887+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (CZK, fixed): 0.00
2025-04-14T14:43:54.887+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (CZK, fixed): 0.00
2025-04-14T14:43:54.887+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: CZK. Vypočtená cena: 13250.00
2025-04-14T14:43:54.887+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: EUR
2025-04-14T14:43:54.887+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (EUR): 530.00
2025-04-14T14:43:54.887+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (EUR): 0.00
2025-04-14T14:43:54.887+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] Price for divider (EUR): 0.00
2025-04-14T14:43:54.887+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (EUR, fixed): 0.00
2025-04-14T14:43:54.887+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (EUR, fixed): 0.00
2025-04-14T14:43:54.887+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: EUR. Vypočtená cena: 530.00
2025-04-14T14:43:54.887+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Výchozí JEDNOTKOVÉ ceny (bez atributů) pro custom produkt: CZK=13250.00, EUR=530.00
2025-04-14T14:43:54.887+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím productDetail. Obsah modelu před vrácením 'produkt-detail-custom': {currentGlobalCurrency=CZK, product=org.example.eshop.model.Product@2f9745fa, configurator=org.example.eshop.model.ProductConfigurator@4e6fa3c9, availableAddons=[org.example.eshop.model.Addon@5ae36d1b, org.example.eshop.model.Addon@2919c01a], availableDesigns=[org.example.eshop.model.Design@20, org.example.eshop.model.Design@22], availableGlazes=[org.example.eshop.model.Glaze@7e8318e8, org.example.eshop.model.Glaze@7e8318e8, org.example.eshop.model.Glaze@7e8318e8], availableRoofColors=[org.example.eshop.model.RoofColor@38d45770, org.example.eshop.model.RoofColor@38d45770, org.example.eshop.model.RoofColor@38d45770], initialCustomPriceCZK=13250.00, initialCustomPriceEUR=530.00, initialCustomPriceError=null, cartItemDto=org.example.eshop.dto.CartItemDto@48c93852}
2025-04-14T14:43:55.065+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-na-miru.jpg
2025-04-14T14:43:55.065+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:55.065+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:55.069+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-na-miru.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-na-miru.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:43:55.075+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-na-miru.jpg]]
2025-04-14T14:43:57.389+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-na-miru.jpg
2025-04-14T14:43:57.415+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:57.415+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:57.415+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-na-miru.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-na-miru.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:43:57.415+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-na-miru.jpg]]
2025-04-14T14:43:58.185+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik/pridat
2025-04-14T14:43:58.185+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:58.185+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:58.227+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : --- addToCart START (Attribute Select Version) --- Cart instance hash: -557472145
2025-04-14T14:43:58.227+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 3
2025-04-14T14:43:58.234+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 3 nalezen.
2025-04-14T14:43:58.234+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 3) <<<
2025-04-14T14:43:58.244+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Processing addToCart request for product ID: 3
2025-04-14T14:43:58.244+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : CartItemDto details: isCustom=true, quantity=1
2025-04-14T14:43:58.244+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Selected IDs: Design=1, Glaze=3, RoofColor=1
2025-04-14T14:43:58.244+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 3
2025-04-14T14:43:58.244+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 3 nalezen.
2025-04-14T14:43:58.244+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 3) <<<
2025-04-14T14:43:58.273+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Applied Tax Rate 21.00% for product ID 3
2025-04-14T14:43:58.275+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Calculated attribute surcharges: CZK=0, EUR=0
2025-04-14T14:43:58.277+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: CZK
2025-04-14T14:43:58.277+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (CZK): 13250.00
2025-04-14T14:43:58.277+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (CZK): 0.00
2025-04-14T14:43:58.277+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : [ProductService] Price for divider (CZK): 0.00
2025-04-14T14:43:58.277+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (CZK, fixed): 0.00
2025-04-14T14:43:58.277+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (CZK, fixed): 0.00
2025-04-14T14:43:58.277+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: CZK. Vypočtená cena: 13250.00
2025-04-14T14:43:58.277+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: EUR
2025-04-14T14:43:58.277+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (EUR): 530.00
2025-04-14T14:43:58.277+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (EUR): 0.00
2025-04-14T14:43:58.277+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : [ProductService] Price for divider (EUR): 0.00
2025-04-14T14:43:58.277+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (EUR, fixed): 0.00
2025-04-14T14:43:58.277+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (EUR, fixed): 0.00
2025-04-14T14:43:58.277+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: EUR. Vypočtená cena: 530.00
2025-04-14T14:43:58.277+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Calculated dynamic base price for custom product: CZK=13250.00, EUR=530.00
2025-04-14T14:43:58.284+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Final unit prices calculated (incl. attribute surcharges and addons): CZK=13250.00, EUR=530.00
2025-04-14T14:43:58.284+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Built variant info string for CartItem (ProductID: 3): 'Na míru|Rozměry (DxHxV): 100x50x150 cm|Design: Klasik|Lazura: Bezbarvý lak|Střecha: Antracit'
2025-04-14T14:43:58.284+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : Generated Cart Item ID: P3-C-DIMS[height=150;length=100;width=50;]
2025-04-14T14:43:58.284+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.Cart           : addItem called for cart hash: 1417332352. Item ID: P3-C-DIMS[height=150;length=100;width=50;], Product ID: 3
2025-04-14T14:43:58.284+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.Cart           : Added new cart item ID: P3-C-DIMS[height=150;length=100;width=50;]. Cart hash: 1417332352
2025-04-14T14:43:58.284+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.Cart           : Cart items map after addItem (hash: 1417332352): {P3-C-DIMS[height=150;length=100;width=50;]=CartItem{cartItemId='P3-C-DIMS[height=150;length=100;width=50;]', productId=3, quantity=1, taxRatePercent=0.21}}
2025-04-14T14:43:58.293+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CartController      : --- addToCart END --- Item added/updated. Cart instance hash: -557472145, Current cart items count: 1
2025-04-14T14:43:58.318+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik
2025-04-14T14:43:58.318+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:58.318+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:58.320+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : --- viewCart START --- Cart instance hash: -557472145
2025-04-14T14:43:58.320+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Cart items before display: {P3-C-DIMS[height=150;length=100;width=50;]=CartItem{cartItemId='P3-C-DIMS[height=150;length=100;width=50;]', productId=3, quantity=1, taxRatePercent=0.21}}
2025-04-14T14:43:58.320+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Displaying cart page. Cart has 1 items.
2025-04-14T14:43:58.320+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Current currency set to: CZK
2025-04-14T14:43:58.320+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Cart subtotal (CZK): 13250.00
2025-04-14T14:43:58.328+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Validated coupon: None, Discount amount (CZK): 0
2025-04-14T14:43:58.328+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Total VAT (CZK): 2782.50
2025-04-14T14:43:58.330+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : VAT Breakdown (CZK): {0.21=2782.50}
2025-04-14T14:43:58.330+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Total Price Before Shipping (CZK): 16032.50
2025-04-14T14:43:58.333+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : Total Price Without Tax After Discount (CZK): 13250.00
2025-04-14T14:43:58.334+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CartController      : --- viewCart END --- Model attributes set for cart.
2025-04-14T14:43:58.498+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-na-miru.jpg
2025-04-14T14:43:58.498+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:58.498+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:58.504+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-na-miru.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-na-miru.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:43:58.512+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-na-miru.jpg]]
2025-04-14T14:43:59.946+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T14:43:59.946+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:43:59.946+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:43:59.949+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T14:43:59.954+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T14:43:59.954+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T14:43:59.954+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T14:43:59.954+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Hlavní Město, 11000, Česká republika'
2025-04-14T14:44:00.187+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1008.01 CZK (Distance: 33.9 km)
2025-04-14T14:44:00.189+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T14:44:00.189+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=17252.19, roundedTotalPrice=17252, roundingDifference=0.19
2025-04-14T14:44:00.189+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=13250.00, itemDiscount=0, itemVat=2782.50, origShipCost=1008.01, shipDiscount=0, finalShipCost=1008.01, finalShipTax=211.68, originalTotal=17252.19, roundingDiff=0.19, finalRoundedTotal=17252, totalVatWithShip=2994.18, shippingError='null'
2025-04-14T14:44:00.189+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T14:44:11.679+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T14:44:11.679+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:11.679+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:11.683+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Praa, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T14:44:11.685+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T14:44:11.685+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Praa, 11000, Česká republika'
2025-04-14T14:44:11.934+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1870.61 CZK (Distance: 91.4 km)
2025-04-14T14:44:11.934+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=1870.61, origTax=392.83, shipDiscount=0, finalCost=1870.61, finalTax=392.83, finalTotal=18295.94, finalTotalVat=3175.33
2025-04-14T14:44:16.086+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/odeslat
2025-04-14T14:44:16.086+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:16.086+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:16.100+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Processing checkout submission for user: admin@example.com in currency: CZK
2025-04-14T14:44:16.100+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Set email in DTO from principal for logged-in user: admin@example.com
2025-04-14T14:44:16.100+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Getting logged-in customer: admin@example.com
2025-04-14T14:44:16.107+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Customer 2 address differs or useInvoice flag changed, updating from DTO.
2025-04-14T14:44:16.107+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.CustomerService  : Setting invoice name/lastname from main contact for customer ID 2.
2025-04-14T14:44:16.107+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.CustomerService  : Saving customer ID: 2
2025-04-14T14:44:16.109+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Updated address data saved for customer 2.
2025-04-14T14:44:16.109+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Using valid shipping costs from form: NoTax=1870.61, Tax=392.83
2025-04-14T14:44:16.109+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Calculating final order totals for saving: originalTotal=18295.94, roundedTotal=18295
2025-04-14T14:44:16.109+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Attempting to create order with request: CreateOrderRequest(customerId=2, useCustomerAddresses=true, paymentMethod=BANK_TRANSFER, currency=CZK, customerNote=, couponCode=null, items=[org.example.eshop.dto.CartItemDto@25e7067d], shippingCostNoTax=1870.61, shippingTax=392.83)
2025-04-14T14:44:16.109+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 2 with explicit currency: CZK
2025-04-14T14:44:16.109+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T14:44:16.111+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T14:44:16.111+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 2 to order.
2025-04-14T14:44:16.111+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Invoice recipient is person: Admin Eshopu
2025-04-14T14:44:16.111+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T14:44:16.111+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T14:44:16.111+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T14:44:16.111+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Processing item with Product ID: 3
2025-04-14T14:44:16.111+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 3
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 3)
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Na míru|Rozměry (DxHxV): 100x50x150 cm
2025-04-14T14:44:16.119+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: CZK
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (CZK): 13250.00
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (CZK): 0.00
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : [ProductService] Price for divider (CZK): 0.00
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (CZK, fixed): 0.00
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (CZK, fixed): 0.00
2025-04-14T14:44:16.119+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: CZK. Vypočtená cena: 13250.00
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 13250.00
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Unit Price After Discount: 13250.00
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Processing addons for OrderItem (Product ID: 3), Currency: CZK
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : No addons to process or product is not custom.
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 13250.00
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Unit Tax Amount: 2782.50
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Unit Price With Tax: 16032.50
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=13250.00, TotalTaxAmount=2782.50, TotalPriceWithTax=16032.50
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=13250.00, TaxAmount=2782.50
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 13250.00, Running Item Tax: 2782.50
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 13250.00, Final Item Tax: 2782.50
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 1870.61, Tax: 392.83, Estimated Rate: 0.2100
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=15120.61, TotalTax=3175.33, OriginalTotalWithTax=18295.94, RoundedTotalToSave=18295
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=15120.61, TotalTax=3175.33, OriginalTotalWithTax=18295.94, RoundedTotalToSave=18295
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null contains custom product. Calculating potential deposit.
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 18295 is 9147.50
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 9000
2025-04-14T14:44:16.119+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 9000.00
2025-04-14T14:44:16.119+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Deposit required for order null. Status set to AWAITING_DEPOSIT.
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 18295 is 9147.50
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 9000
2025-04-14T14:44:16.119+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 9000.00
2025-04-14T14:44:16.119+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Deposit amount 9000.00 CZK calculated for custom order (new).
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Final Payment status: AWAITING_DEPOSIT, Deposit Amount: 9000.00
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 211
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Generated Order Code: 211
2025-04-14T14:44:16.119+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T14:44:16.128+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Order 211 created successfully. Total: 18295 CZK
2025-04-14T14:44:16.128+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 211...
2025-04-14T14:44:16.128+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : [Order Creation - Step 11] Triggering proforma invoice generation for order 211. Currency: CZK
2025-04-14T14:44:16.128+02:00 ERROR 29156 --- [Eshop] [task-10] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-10] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:44:16.133+02:00 ERROR 29156 --- [Eshop] [task-10] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 211: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:44:16.133+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Non-critical error generating proforma invoice for order 211: Order not found: 6. Order creation continues.

jakarta.persistence.EntityNotFoundException: Order not found: 6
	at org.example.eshop.service.SuperFakturaInvoiceService.lambda$reloadOrder$2(SuperFakturaInvoiceService.java:351) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.reloadOrder(SuperFakturaInvoiceService.java:351) ~[classes/:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.generateProformaInvoice(SuperFakturaInvoiceService.java:76) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$1.generateProformaInvoice(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$0.generateProformaInvoice(<generated>) ~[classes/:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:362) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.controller.CheckoutController.processCheckout(CheckoutController.java:385) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.controller.CheckoutController$$SpringCGLIB$$0.processCheckout(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:44:16.136+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Order 211 successfully created with currency CZK for user: admin@example.com
2025-04-14T14:44:16.136+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.Cart           : clearCart called for cart hash: 1417332352. Clearing items and coupon.
2025-04-14T14:44:16.136+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.CheckoutController  : Session cart cleared for admin@example.com
2025-04-14T14:44:16.152+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /muj-ucet/objednavky
2025-04-14T14:44:16.152+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:16.152+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:16.160+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-10] org.example.eshop.service.OrderService   : Finding all orders for customer ID: 2
2025-04-14T14:44:30.325+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders
2025-04-14T14:44:30.325+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:30.325+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:30.329+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Requesting admin order list view. Filters: stateId=null, paymentStatus=, customerEmail=, dateFrom=null, dateTo=null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:44:30.329+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : OrderService.findOrders called with filters - Email: 'N/A', StateID: null, PaymentStatus: 'N/A', From: null, To: null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:44:30.337+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Found 6 orders matching criteria using specifications.
2025-04-14T14:44:30.339+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:44:30.342+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : [AdminOrderController.listOrders] Service returned page: Number=0, Elements=6, TotalElements=6
2025-04-14T14:44:32.604+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6
2025-04-14T14:44:32.604+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:32.604+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:32.606+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 6
2025-04-14T14:44:32.606+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-7] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:44:32.607+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:44:32.615+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 6
2025-04-14T14:44:36.492+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6/generate-proforma
2025-04-14T14:44:36.492+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:36.492+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:36.492+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Admin action: Trigger SuperFaktura PROFORMA for order ID: 6
2025-04-14T14:44:36.493+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:44:36.503+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Attempting to generate SuperFaktura PROFORMA invoice for order: 211. Order currency: CZK
2025-04-14T14:44:36.503+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : SF API Request Payload (Proforma Invoice - Order 211):
{
  "Invoice" : {
    "order_no" : "211",
    "date" : "2025-04-14",
    "note" : "Záloha za objednané zboží dle obj. č. 211",
    "payment_type" : "transfer",
    "variable" : "211",
    "due_date" : "2025-04-21",
    "rounding" : "item",
    "currency" : "CZK",
    "language" : "cze",
    "specific" : "6",
    "type" : "proforma"
  },
  "InvoiceItem" : [ {
    "unit" : "ks",
    "quantity" : 1,
    "name" : "Záloha na dřevník dle obj. č. 211",
    "description" : "Záloha 50% z 18295.00 CZK",
    "tax" : 21.00,
    "currency" : "CZK",
    "unit_price" : 7438.02
  } ],
  "Client" : {
    "zip" : "11000",
    "country" : "Česká republika",
    "address" : "Adminova 1",
    "phone" : "987654321",
    "city" : "Praa",
    "name" : "Admin Eshopu",
    "currency" : "CZK",
    "email" : "admin@example.com"
  }
}
2025-04-14T14:44:36.503+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Sending Proforma Invoice request to SF API: URL=https://moje.superfaktura.cz/invoices/create.json, Method=POST
2025-04-14T14:44:36.738+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Raw SF API Response Body for Proforma Invoice (Order 211): START
{"error":0,"error_message":"Invoice created","data":{"Invoice":{"id":"7669526","user_id":"39487","user_profile_id":"36761","client_id":"3494543","parent_id":null,"proforma_id":null,"estimate_id":null,"sequence_id":"305625","import_type":null,"import_id":null,"import_parent_id":null,"type":"proforma","template":null,"tax_document":null,"name":"Z\u00e1lohov\u00e1 faktura 000005\/2025","lang":null,"client_data":"{\"Client\":{\"user_id\":\"39487\",\"user_profile_id\":\"36761\",\"uuid\":null,\"country_id\":\"57\",\"name\":\"Admin Eshopu\",\"ico\":null,\"dic\":null,\"ic_dph\":null,\"iban\":null,\"swift\":null,\"bank_account_prefix\":null,\"bank_account\":null,\"bank_code\":null,\"account\":null,\"email\":\"admin@example.com\",\"address\":\"Adminova 1\",\"city\":\"Praa\",\"zip\":\"11000\",\"state\":null,\"country\":\"\\u010cesk\\u00e1 republika\",\"delivery_name\":null,\"delivery_address\":null,\"delivery_city\":null,\"delivery_zip\":null,\"delivery_state\":null,\"delivery_country\":null,\"delivery_country_id\":null,\"phone\":\"987654321\",\"delivery_phone\":null,\"fax\":null,\"due_date\":null,\"default_variable\":null,\"discount\":null,\"currency\":\"CZK\",\"bank_account_id\":null,\"comment\":null,\"tags\":null,\"distance\":null,\"dont_travel\":null,\"notices\":\"1\",\"id\":3494543}}","my_data":"{\"MyData\":{\"id\":\"36761\",\"user_id\":\"39451\",\"country_id\":\"57\",\"company_name\":\"Truhl\\u00e1\\u0159stv\\u00ed Kol\\u00e1\\u0159\",\"ico\":\"73589292\",\"dic\":\"\",\"ic_dph\":\"CZ8204183086\",\"business_register\":\"\",\"address\":\"Dru\\u017estevn\\u00ed 304\",\"city\":\"\\u0158e\\u010dany nad Labem\",\"zip\":\"53313\",\"tax_payer\":\"1\",\"BankAccount\":[{\"id\":\"29020\",\"user_id\":\"39451\",\"user_profile_id\":\"36761\",\"currency\":\"CZK\",\"default\":true,\"show\":true,\"country_id\":\"57\",\"bank_name\":\"Fio banka a.s.\",\"bank_code\":\"2010\",\"account\":\"2601817728\",\"iban\":\"CZ0420100000002601817728\",\"swift\":\"FIOBCZPPXXX\",\"created\":\"2021-09-30 09:01:03\",\"modified\":\"2022-03-15 08:14:09\",\"show_account\":true}],\"Logo\":[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}],\"Signature\":{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}}}","items_data":"Z\u00e1loha na d\u0159evn\u00edk dle obj. \u010d. 211 Z\u00e1loha 50% z 18295.00 CZK, ","invoice_no":"5","order_no":"211","invoice_no_formatted":"000005\/2025","invoice_no_formatted_raw":"52025","invoice_no_formatted_length":"11","mask":"YYYYNNN","variable":"211","variable_raw":"211","constant":"","specific":"6","payment_type":"transfer","status":"1","home_currency":"CZK","invoice_currency":"CZK","exchange_rate":1,"country_exchange_rate":"1.00000000000000","amount":"7438.02","vat":"1561.98","discount":"0","items_name":null,"issued_by":"mirsvobo","issued_by_phone":"704756313","issued_by_email":"mirsvobo@gmail.com","paid":"0.00","amount_paid":"0.00","deposit":"0.00","header_comment":"","comment":"","internal_comment":null,"created":"2025-04-14 00:00:00","modified":"2025-04-14 14:44:41","recurring":null,"paydate":null,"delivery":null,"taxdate":null,"accounting_date":"2025-04-14","delivery_type":"haulage","due":"2025-04-21","demo":"0","token":"f3762353","tags":null,"rounding":"item","vat_transfer":null,"special_vat_scheme":null,"issued_by_web":null,"summary_invoice":null,"total_amount":"9000.00","show_items_with_dph":true,"show_special_vat":false,"flag":"issued"},"Client":{"id":"3494543","user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Admin Eshopu","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"admin@example.com","address":"Adminova 1","city":"Hlavn\u00ed M\u011bsto","zip":"11000","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"987654321","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":null,"bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"created":"2025-04-05 22:55:58","modified":"2025-04-05 22:55:58","notices":true},"0":{"to_pay":"9000.000000","to_pay_in_invoice_currency":"9000.00","total":"9000.00"},"InvoiceEmail":[],"PostStamp":[],"InvoiceSetting":{"signature":true,"bysquare":true,"payment_info":true,"language":"cze","online_payment":false,"summary_bg_color":"#d4eef6","force_iban":true},"InvoicePayment":[],"Tag":[],"ClientData":{"user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Admin Eshopu","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"admin@example.com","address":"Adminova 1","city":"Praa","zip":"11000","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"987654321","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":"CZK","bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"notices":"1","id":3494543,"Country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true}},"MyData":{"id":"36761","user_id":"39451","country_id":"57","company_name":"Truhl\u00e1\u0159stv\u00ed Kol\u00e1\u0159","ico":"73589292","dic":"","ic_dph":"CZ8204183086","business_register":"","address":"Dru\u017estevn\u00ed 304","city":"\u0158e\u010dany nad Labem","zip":"53313","tax_payer":"1","BankAccount":[{"id":"29020","user_id":"39451","user_profile_id":"36761","currency":"CZK","default":true,"show":true,"country_id":"57","bank_name":"Fio banka a.s.","bank_code":"2010","account":"2601817728","iban":"CZ0420100000002601817728","swift":"FIOBCZPPXXX","created":"2021-09-30 09:01:03","modified":"2022-03-15 08:14:09","show_account":true}],"Logo":"[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"mobile_path\":\"imagecache\\\/media\\\/transfer\\\/img\\\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}]","Signature":"{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}","country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true},"SignatureRaw":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"LogoRaw":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}]},"Logo":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}],"Signature":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"InvoiceItem":[{"id":"24636766","invoice_id":"7669526","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"Z\u00e1loha na d\u0159evn\u00edk dle obj. \u010d. 211","description":"Z\u00e1loha 50% z 18295.00 CZK","sku":null,"quantity":"1.00000","unit":"ks","unit_price":7438.02,"tax":21,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"0","hide_in_autocomplete":null,"unit_price_discount":7438.02,"item_price":7438.02,"item_price_no_discount":7438.02,"discount_no_vat":-0,"discount_with_vat":-0,"discount_with_vat_total":-0,"discount_no_vat_total":-0,"unit_price_vat":9000.0042,"unit_price_vat_no_discount":9000.0042,"item_price_vat":9000,"item_price_vat_no_discount":9000,"item_price_vat_check":9000}],"Summary":{"vat_base_separate":{"21":7438.02},"vat_base_total":7438.02,"vat_separate":{"21":1561.98},"vat_total":1561.98,"invoice_total":9000,"discount":0},"SummaryInvoice":{"vat_base_separate_positive":{"21":7438.02},"vat_base_separate_negative":{"21":0},"vat_separate_positive":{"21":1561.98},"vat_separate_negative":{"21":0}},"UnitCount":{"ks":1},"Paypal":false,"RelatedItems":[],"Qr":{"qr":"SPD*1.0*ACC:CZ0420100000002601817728+FIOBCZPPXXX*AM:9000*CC:CZK*MSG:000005%252F2025%2B-%2BADMIN%2BESHOPU*X-VS:211*X-SS:6","qr_type":"QrPlatba","qr_url":"https:\/\/moje.superfaktura.cz\/tools\/qrCoder?key=bce5e482c58979e53ef1ca82546ca1a1&text=SPD%2A1.0%2AACC%3ACZ0420100000002601817728%2BFIOBCZPPXXX%2AAM%3A9000%2ACC%3ACZK%2AMSG%3A000005%25252F2025%252B-%252BADMIN%252BESHOPU%2AX-VS%3A211%2AX-SS%3A6&size=150"},"PaymentLink":""}}
END_RESPONSE
2025-04-14T14:44:36.739+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Proforma Invoice API call successful for order 211.
2025-04-14T14:44:36.739+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Constructed PDF download URL with token: https://moje.superfaktura.cz/invoices/pdf/7669526/token:f3762353
2025-04-14T14:44:36.739+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Parsed Proforma Invoice response for order 211: ID=7669526, Number=000005/2025, PDF URL=https://moje.superfaktura.cz/invoices/pdf/7669526/token:f3762353
2025-04-14T14:44:36.740+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Order 211 updated with Proforma Invoice details.
2025-04-14T14:44:36.759+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6
2025-04-14T14:44:36.759+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:36.759+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:36.760+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 6
2025-04-14T14:44:36.760+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:44:36.767+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:44:36.769+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 6
2025-04-14T14:44:38.536+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6/mark-deposit-paid
2025-04-14T14:44:38.536+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:38.536+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:38.539+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.a.controller.AdminOrderController  : Admin action: Attempting to mark deposit as paid for order ID: 6
2025-04-14T14:44:38.543+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] org.example.eshop.service.OrderService   : Marking deposit paid for order 211 on 2025-04-14
2025-04-14T14:44:38.543+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] org.example.eshop.service.OrderService   : Attempting to mark invoice SF ID 7669526 as paid in SuperFaktura (Amount: 9000.00, Date: 2025-04-14, Type: transfer) for order 211
2025-04-14T14:44:38.545+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.s.SuperFakturaInvoiceService       : Attempting to mark invoice SF ID 7669526 as paid for order 211 via API. Amount: 9000.00, Date: 2025-04-14, Type: transfer
2025-04-14T14:44:38.550+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.s.SuperFakturaInvoiceService       : Found currency 'CZK' for invoice SF ID 7669526 from order 211
2025-04-14T14:44:38.551+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.s.SuperFakturaInvoiceService       : SF API Request Payload (Mark Invoice Paid - Order 211):
{
  "InvoicePayment" : {
    "date" : "2025-04-14",
    "payment_type" : "transfer",
    "amount" : 9000.00,
    "invoice_id" : 7669526,
    "currency" : "CZK"
  }
}
2025-04-14T14:44:38.551+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.s.SuperFakturaInvoiceService       : Sending Mark Invoice Paid request to SF API: URL=https://moje.superfaktura.cz/invoice_payments/add/invoice_id:7669526.json, Method=POST
2025-04-14T14:44:38.705+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.s.SuperFakturaInvoiceService       : Raw SF API Response Body for Mark Invoice Paid (Order 211): START
{"payment_id":"4939926","error":0,"invoice_id":7669526,"status":3,"paid":9000,"to_pay":0,"to_pay_home_cur":0,"currency":"K\u010d","home_currency":"K\u010d","exchange_rate":1,"country_exchange_rate":1,"invoice_type":"proforma","parent_id":null,"overdue":false,"created":"2025-04-14","invoice_currency":"K\u010d","flash_message":{"text":"Platba byla ulo\u017eena","type":"success"}}
END_RESPONSE
2025-04-14T14:44:38.705+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.s.SuperFakturaInvoiceService       : SF API call successful (2xx) for Mark Invoice Paid (Order 211). Response has no 'data' key.
2025-04-14T14:44:38.705+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.s.SuperFakturaInvoiceService       : Successfully requested marking invoice SF ID 7669526 as paid for order 211
2025-04-14T14:44:38.705+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] org.example.eshop.service.OrderService   : Successfully requested marking invoice SF ID 7669526 as paid in SuperFaktura.
2025-04-14T14:44:38.714+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] org.example.eshop.service.OrderService   : Triggering tax document generation after marking deposit paid for order 211
2025-04-14T14:44:38.724+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.s.SuperFakturaInvoiceService       : Attempting to generate SuperFaktura TAX DOCUMENT for paid deposit for order: 211. Order currency: CZK
2025-04-14T14:44:38.724+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.s.SuperFakturaInvoiceService       : Tax Document requested for order 211 but deposit/paid date missing. Skipping.
2025-04-14T14:44:38.739+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.a.controller.AdminOrderController  : Admin action: Deposit marked as paid for order ID: 6
2025-04-14T14:44:38.754+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6
2025-04-14T14:44:38.754+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:38.754+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:38.754+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 6
2025-04-14T14:44:38.754+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:44:38.769+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:44:38.773+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 6
2025-04-14T14:44:42.228+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6/generate-tax-doc
2025-04-14T14:44:42.230+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:42.231+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:42.231+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.controller.AdminOrderController  : Admin action: Trigger SuperFaktura TAX DOC for order ID: 6
2025-04-14T14:44:42.231+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:44:42.238+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : Attempting to generate SuperFaktura TAX DOCUMENT for paid deposit for order: 211. Order currency: CZK
2025-04-14T14:44:42.238+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : SF API Request Payload (Tax Document (Deposit) - Order 211):
{
  "Invoice" : {
    "order_no" : "211",
    "date" : "2025-04-14",
    "note" : "Daňový doklad k záloze zaplacené dne 14.4.2025 k obj. č. 211.\nVztahuje se k zálohové faktuře č. 000005/2025.",
    "due_date" : "2025-04-14",
    "rounding" : "item",
    "language" : "cze",
    "specific" : "6",
    "type" : "regular",
    "payment_type" : "transfer",
    "delivery_date" : "2025-04-14",
    "variable" : "211",
    "sequence_id" : 342836,
    "currency" : "CZK",
    "already_paid" : 9000.00,
    "paid_date" : "2025-04-14"
  },
  "InvoiceItem" : [ {
    "unit" : "ks",
    "quantity" : 1,
    "name" : "Přijatá záloha k obj. č. 211",
    "tax" : 21.00,
    "currency" : "CZK",
    "unit_price" : 7438.02
  } ],
  "Client" : {
    "zip" : "11000",
    "country" : "Česká republika",
    "address" : "Adminova 1",
    "phone" : "987654321",
    "city" : "Praa",
    "name" : "Admin Eshopu",
    "currency" : "CZK",
    "email" : "admin@example.com"
  }
}
2025-04-14T14:44:42.238+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : Sending Tax Document (Deposit) request to SF API: URL=https://moje.superfaktura.cz/invoices/create.json, Method=POST
2025-04-14T14:44:42.411+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : Raw SF API Response Body for Tax Document (Deposit) (Order 211): START
{"error":0,"error_message":"Invoice created","data":{"Invoice":{"id":"7669529","user_id":"39487","user_profile_id":"36761","client_id":"3494543","parent_id":null,"proforma_id":null,"estimate_id":null,"sequence_id":"342836","import_type":null,"import_id":null,"import_parent_id":null,"type":"regular","template":null,"tax_document":null,"name":"Z\u00e1lohov\u00e1 faktura 0005\/2025","lang":null,"client_data":"{\"Client\":{\"user_id\":\"39487\",\"user_profile_id\":\"36761\",\"uuid\":null,\"country_id\":\"57\",\"name\":\"Admin Eshopu\",\"ico\":null,\"dic\":null,\"ic_dph\":null,\"iban\":null,\"swift\":null,\"bank_account_prefix\":null,\"bank_account\":null,\"bank_code\":null,\"account\":null,\"email\":\"admin@example.com\",\"address\":\"Adminova 1\",\"city\":\"Praa\",\"zip\":\"11000\",\"state\":null,\"country\":\"\\u010cesk\\u00e1 republika\",\"delivery_name\":null,\"delivery_address\":null,\"delivery_city\":null,\"delivery_zip\":null,\"delivery_state\":null,\"delivery_country\":null,\"delivery_country_id\":null,\"phone\":\"987654321\",\"delivery_phone\":null,\"fax\":null,\"due_date\":null,\"default_variable\":null,\"discount\":null,\"currency\":\"CZK\",\"bank_account_id\":null,\"comment\":null,\"tags\":null,\"distance\":null,\"dont_travel\":null,\"notices\":\"1\",\"id\":3494543}}","my_data":"{\"MyData\":{\"id\":\"36761\",\"user_id\":\"39451\",\"country_id\":\"57\",\"company_name\":\"Truhl\\u00e1\\u0159stv\\u00ed Kol\\u00e1\\u0159\",\"ico\":\"73589292\",\"dic\":\"\",\"ic_dph\":\"CZ8204183086\",\"business_register\":\"\",\"address\":\"Dru\\u017estevn\\u00ed 304\",\"city\":\"\\u0158e\\u010dany nad Labem\",\"zip\":\"53313\",\"tax_payer\":\"1\",\"BankAccount\":[{\"id\":\"29020\",\"user_id\":\"39451\",\"user_profile_id\":\"36761\",\"currency\":\"CZK\",\"default\":true,\"show\":true,\"country_id\":\"57\",\"bank_name\":\"Fio banka a.s.\",\"bank_code\":\"2010\",\"account\":\"2601817728\",\"iban\":\"CZ0420100000002601817728\",\"swift\":\"FIOBCZPPXXX\",\"created\":\"2021-09-30 09:01:03\",\"modified\":\"2022-03-15 08:14:09\",\"show_account\":true}],\"Logo\":[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}],\"Signature\":{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}}}","items_data":"P\u0159ijat\u00e1 z\u00e1loha k obj. \u010d. 211 , ","invoice_no":"5","order_no":"211","invoice_no_formatted":"0005\/2025","invoice_no_formatted_raw":"52025","invoice_no_formatted_length":"9","mask":"YYYYNNN","variable":"211","variable_raw":"211","constant":"","specific":"6","payment_type":"transfer","status":"3","home_currency":"CZK","invoice_currency":"CZK","exchange_rate":1,"country_exchange_rate":"1.00000000000000","amount":"7438.02","vat":"1561.98","discount":"0","items_name":null,"issued_by":"mirsvobo","issued_by_phone":"704756313","issued_by_email":"mirsvobo@gmail.com","paid":"9000.00","amount_paid":"9000.00","deposit":"0.00","header_comment":"","comment":"","internal_comment":null,"created":"2025-04-14 00:00:00","modified":"2025-04-14 14:44:46","recurring":null,"paydate":"2025-04-14 00:00:00","delivery":"2025-04-14 00:00:00","taxdate":null,"accounting_date":"2025-04-14","delivery_type":"haulage","due":"2025-04-21","demo":"0","token":"eee3802a","tags":"","rounding":"item","vat_transfer":null,"special_vat_scheme":null,"issued_by_web":null,"summary_invoice":null,"total_amount":"9000.00","show_items_with_dph":true,"show_special_vat":false,"flag":"fully-paid"},"Client":{"id":"3494543","user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Admin Eshopu","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"admin@example.com","address":"Adminova 1","city":"Hlavn\u00ed M\u011bsto","zip":"11000","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"987654321","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":null,"bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"created":"2025-04-05 22:55:58","modified":"2025-04-05 22:55:58","notices":true},"0":{"to_pay":"0.000000","to_pay_in_invoice_currency":"0.00","total":"9000.00"},"InvoiceEmail":[],"PostStamp":[],"InvoiceSetting":{"signature":true,"bysquare":true,"payment_info":true,"language":"cze","online_payment":false,"summary_bg_color":"#d4eef6","force_iban":true},"InvoicePayment":[{"id":"4939927","invoice_id":"7669529","import_payment_id":null,"user_id":"39487","user_profile_id":"36761","payment_type":"transfer","amount":"7438.02","home_currency":"CZK","payment_currency":"CZK","country_exchange_rate":"1.00000000000000","exchange_rate":"1.00000000000000","vat":"1561.98","document_no":null,"created":"2025-04-14 00:00:00"}],"Tag":[],"ClientData":{"user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Admin Eshopu","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"admin@example.com","address":"Adminova 1","city":"Praa","zip":"11000","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"987654321","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":"CZK","bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"notices":"1","id":3494543,"Country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true}},"MyData":{"id":"36761","user_id":"39451","country_id":"57","company_name":"Truhl\u00e1\u0159stv\u00ed Kol\u00e1\u0159","ico":"73589292","dic":"","ic_dph":"CZ8204183086","business_register":"","address":"Dru\u017estevn\u00ed 304","city":"\u0158e\u010dany nad Labem","zip":"53313","tax_payer":"1","BankAccount":[{"id":"29020","user_id":"39451","user_profile_id":"36761","currency":"CZK","default":true,"show":true,"country_id":"57","bank_name":"Fio banka a.s.","bank_code":"2010","account":"2601817728","iban":"CZ0420100000002601817728","swift":"FIOBCZPPXXX","created":"2021-09-30 09:01:03","modified":"2022-03-15 08:14:09","show_account":true}],"Logo":"[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"mobile_path\":\"imagecache\\\/media\\\/transfer\\\/img\\\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}]","Signature":"{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}","country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true},"SignatureRaw":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"LogoRaw":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}]},"Logo":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}],"Signature":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"InvoiceItem":[{"id":"24636769","invoice_id":"7669529","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"P\u0159ijat\u00e1 z\u00e1loha k obj. \u010d. 211","description":"","sku":null,"quantity":"1.00000","unit":"ks","unit_price":7438.02,"tax":21,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"0","hide_in_autocomplete":null,"unit_price_discount":7438.02,"item_price":7438.02,"item_price_no_discount":7438.02,"discount_no_vat":-0,"discount_with_vat":-0,"discount_with_vat_total":-0,"discount_no_vat_total":-0,"unit_price_vat":9000.0042,"unit_price_vat_no_discount":9000.0042,"item_price_vat":9000,"item_price_vat_no_discount":9000,"item_price_vat_check":9000}],"Summary":{"vat_base_separate":{"21":7438.02},"vat_base_total":7438.02,"vat_separate":{"21":1561.98},"vat_total":1561.98,"invoice_total":9000,"discount":0},"SummaryInvoice":{"vat_base_separate_positive":{"21":7438.02},"vat_base_separate_negative":{"21":0},"vat_separate_positive":{"21":1561.98},"vat_separate_negative":{"21":0}},"UnitCount":{"ks":1},"Paypal":false,"RelatedItems":[],"Qr":{"qr":"","qr_type":"","qr_url":""},"PaymentLink":""}}
END_RESPONSE
2025-04-14T14:44:42.416+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : Tax Document (Deposit) API call successful for order 211.
2025-04-14T14:44:42.417+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : Constructed PDF download URL with token: https://moje.superfaktura.cz/invoices/pdf/7669529/token:eee3802a
2025-04-14T14:44:42.418+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : Parsed Tax Document response for order 211: ID=7669529, Number=0005/2025, PDF URL=https://moje.superfaktura.cz/invoices/pdf/7669529/token:eee3802a
2025-04-14T14:44:42.418+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : Order 211 updated with Tax Document details.
2025-04-14T14:44:42.436+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6
2025-04-14T14:44:42.436+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:42.436+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:42.436+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 6
2025-04-14T14:44:42.436+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:44:42.444+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:44:42.452+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 6
2025-04-14T14:44:43.354+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6/generate-final
2025-04-14T14:44:43.354+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:43.354+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:43.354+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Admin action: Trigger SuperFaktura FINAL invoice for order ID: 6
2025-04-14T14:44:43.357+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:44:43.365+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.s.SuperFakturaInvoiceService       : Attempting to generate SuperFaktura FINAL invoice for order: 211. Order currency: CZK
2025-04-14T14:44:43.367+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.s.SuperFakturaInvoiceService       : Linking final invoice for order 211 to Proforma ID: 7669526
2025-04-14T14:44:43.367+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.s.SuperFakturaInvoiceService       : Calculating rounding difference for order 211: Original=18295.94, Rounded=18295.00, Difference=0.94
2025-04-14T14:44:43.367+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.s.SuperFakturaInvoiceService       : Added rounding item to SF payload for order 211: Amount=-0.94
2025-04-14T14:44:43.367+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.s.SuperFakturaInvoiceService       : Not setting 'already_paid' for final invoice 211. Relying on SF deduction via linked proforma_id or payment status.
2025-04-14T14:44:43.367+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.s.SuperFakturaInvoiceService       : SF API Request Payload (Final Invoice - Order 211):
{
  "Invoice" : {
    "order_no" : "211",
    "date" : "2025-04-14",
    "note" : "Odpočet zálohy dle zálohové faktury č. 000005/2025.",
    "due_date" : "2025-04-28",
    "rounding" : "item",
    "language" : "cze",
    "specific" : "6",
    "type" : "regular",
    "payment_type" : "transfer",
    "delivery_date" : "2025-04-14",
    "variable" : "211",
    "currency" : "CZK",
    "proforma_id" : 7669526
  },
  "InvoiceItem" : [ {
    "unit" : "ks",
    "quantity" : 1,
    "name" : "Dřevník na míru (Na míru|Rozměry (DxHxV): 100x50x150 cm)",
    "description" : "Rozměry (DxHxV): 100x50x150 cm",
    "tax" : 21.00,
    "currency" : "CZK",
    "unit_price" : 13250.00,
    "sku" : "CUSTOM-3"
  }, {
    "unit" : "ks",
    "quantity" : 1,
    "name" : "Doprava",
    "tax" : 21.00,
    "currency" : "CZK",
    "unit_price" : 1870.61
  }, {
    "unit" : "",
    "quantity" : 1,
    "name" : "Zaokrouhlení",
    "tax" : 0.00,
    "currency" : "CZK",
    "unit_price" : -0.94
  } ],
  "Client" : {
    "zip" : "11000",
    "country" : "Česká republika",
    "address" : "Adminova 1",
    "phone" : "987654321",
    "city" : "Praa",
    "name" : "Admin Eshopu",
    "currency" : "CZK",
    "email" : "admin@example.com"
  }
}
2025-04-14T14:44:43.367+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.s.SuperFakturaInvoiceService       : Sending Final Invoice request to SF API: URL=https://moje.superfaktura.cz/invoices/create.json, Method=POST
2025-04-14T14:44:43.560+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.s.SuperFakturaInvoiceService       : Raw SF API Response Body for Final Invoice (Order 211): START
{"error":0,"error_message":"Invoice created","data":{"Invoice":{"id":"7669530","user_id":"39487","user_profile_id":"36761","client_id":"3494543","parent_id":null,"proforma_id":"7669526","estimate_id":null,"sequence_id":"305624","import_type":null,"import_id":null,"import_parent_id":null,"type":"regular","template":null,"tax_document":null,"name":"Faktura 000009\/2025","lang":null,"client_data":"{\"Client\":{\"user_id\":\"39487\",\"user_profile_id\":\"36761\",\"uuid\":null,\"country_id\":\"57\",\"name\":\"Admin Eshopu\",\"ico\":null,\"dic\":null,\"ic_dph\":null,\"iban\":null,\"swift\":null,\"bank_account_prefix\":null,\"bank_account\":null,\"bank_code\":null,\"account\":null,\"email\":\"admin@example.com\",\"address\":\"Adminova 1\",\"city\":\"Praa\",\"zip\":\"11000\",\"state\":null,\"country\":\"\\u010cesk\\u00e1 republika\",\"delivery_name\":null,\"delivery_address\":null,\"delivery_city\":null,\"delivery_zip\":null,\"delivery_state\":null,\"delivery_country\":null,\"delivery_country_id\":null,\"phone\":\"987654321\",\"delivery_phone\":null,\"fax\":null,\"due_date\":null,\"default_variable\":null,\"discount\":null,\"currency\":\"CZK\",\"bank_account_id\":null,\"comment\":null,\"tags\":null,\"distance\":null,\"dont_travel\":null,\"notices\":\"1\",\"id\":3494543}}","my_data":"{\"MyData\":{\"id\":\"36761\",\"user_id\":\"39451\",\"country_id\":\"57\",\"company_name\":\"Truhl\\u00e1\\u0159stv\\u00ed Kol\\u00e1\\u0159\",\"ico\":\"73589292\",\"dic\":\"\",\"ic_dph\":\"CZ8204183086\",\"business_register\":\"\",\"address\":\"Dru\\u017estevn\\u00ed 304\",\"city\":\"\\u0158e\\u010dany nad Labem\",\"zip\":\"53313\",\"tax_payer\":\"1\",\"BankAccount\":[{\"id\":\"29020\",\"user_id\":\"39451\",\"user_profile_id\":\"36761\",\"currency\":\"CZK\",\"default\":true,\"show\":true,\"country_id\":\"57\",\"bank_name\":\"Fio banka a.s.\",\"bank_code\":\"2010\",\"account\":\"2601817728\",\"iban\":\"CZ0420100000002601817728\",\"swift\":\"FIOBCZPPXXX\",\"created\":\"2021-09-30 09:01:03\",\"modified\":\"2022-03-15 08:14:09\",\"show_account\":true}],\"Logo\":[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}],\"Signature\":{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}}}","items_data":"D\u0159evn\u00edk na m\u00edru (Na m\u00edru|Rozm\u011bry (DxHxV): 100x50x150 cm) Rozm\u011bry (DxHxV): 100x50x150 cm, Doprava , Zaokrouhlen\u00ed , ","invoice_no":"9","order_no":"211","invoice_no_formatted":"000009\/2025","invoice_no_formatted_raw":"92025","invoice_no_formatted_length":"11","mask":"YYYYNNN","variable":"211","variable_raw":"211","constant":"","specific":"6","payment_type":"transfer","status":"2","home_currency":"CZK","invoice_currency":"CZK","exchange_rate":1,"country_exchange_rate":"1.00000000000000","amount":"15119.67","vat":"3175.33","discount":"0","items_name":null,"issued_by":"mirsvobo","issued_by_phone":"704756313","issued_by_email":"mirsvobo@gmail.com","paid":"0.00","amount_paid":"0.00","deposit":"9000.00","header_comment":"","comment":"","internal_comment":null,"created":"2025-04-14 00:00:00","modified":"2025-04-14 14:44:48","recurring":null,"paydate":null,"delivery":"2025-04-14 00:00:00","taxdate":null,"accounting_date":"2025-04-14","delivery_type":"haulage","due":"2025-04-21","demo":"0","token":"b24e14cb","tags":"","rounding":"item","vat_transfer":null,"special_vat_scheme":null,"issued_by_web":null,"summary_invoice":null,"total_amount":"18295.00","show_items_with_dph":true,"show_special_vat":false,"flag":"partially-paid"},"Client":{"id":"3494543","user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Admin Eshopu","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"admin@example.com","address":"Adminova 1","city":"Hlavn\u00ed M\u011bsto","zip":"11000","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"987654321","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":null,"bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"created":"2025-04-05 22:55:58","modified":"2025-04-05 22:55:58","notices":true},"0":{"to_pay":"9295.000000","to_pay_in_invoice_currency":"9295.00","total":"18295.00"},"InvoiceEmail":[],"PostStamp":[],"InvoiceSetting":{"signature":true,"bysquare":true,"payment_info":true,"language":"cze","online_payment":false,"summary_bg_color":"#d4eef6","force_iban":true},"InvoicePayment":[],"Tag":[],"ClientData":{"user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Admin Eshopu","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"admin@example.com","address":"Adminova 1","city":"Praa","zip":"11000","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"987654321","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":"CZK","bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"notices":"1","id":3494543,"Country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true}},"MyData":{"id":"36761","user_id":"39451","country_id":"57","company_name":"Truhl\u00e1\u0159stv\u00ed Kol\u00e1\u0159","ico":"73589292","dic":"","ic_dph":"CZ8204183086","business_register":"","address":"Dru\u017estevn\u00ed 304","city":"\u0158e\u010dany nad Labem","zip":"53313","tax_payer":"1","BankAccount":[{"id":"29020","user_id":"39451","user_profile_id":"36761","currency":"CZK","default":true,"show":true,"country_id":"57","bank_name":"Fio banka a.s.","bank_code":"2010","account":"2601817728","iban":"CZ0420100000002601817728","swift":"FIOBCZPPXXX","created":"2021-09-30 09:01:03","modified":"2022-03-15 08:14:09","show_account":true}],"Logo":"[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"mobile_path\":\"imagecache\\\/media\\\/transfer\\\/img\\\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}]","Signature":"{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}","country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true},"SignatureRaw":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"LogoRaw":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}]},"Logo":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}],"Signature":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"InvoiceItem":[{"id":"24636770","invoice_id":"7669530","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"D\u0159evn\u00edk na m\u00edru (Na m\u00edru|Rozm\u011bry (DxHxV): 100x50x150 cm)","description":"Rozm\u011bry (DxHxV): 100x50x150 cm","sku":"CUSTOM-3","quantity":"1.00000","unit":"ks","unit_price":13250,"tax":21,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"0","hide_in_autocomplete":null,"unit_price_discount":13250,"item_price":13250,"item_price_no_discount":13250,"discount_no_vat":-0,"discount_with_vat":-0,"discount_with_vat_total":-0,"discount_no_vat_total":-0,"unit_price_vat":16032.5,"unit_price_vat_no_discount":16032.5,"item_price_vat":16032.5,"item_price_vat_no_discount":16032.5,"item_price_vat_check":16032.5},{"id":"24636771","invoice_id":"7669530","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"Doprava","description":"","sku":null,"quantity":"1.00000","unit":"ks","unit_price":1870.61,"tax":21,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"1","hide_in_autocomplete":null,"unit_price_discount":1870.61,"item_price":1870.61,"item_price_no_discount":1870.61,"discount_no_vat":-0,"discount_with_vat":-0,"discount_with_vat_total":-0,"discount_no_vat_total":-0,"unit_price_vat":2263.4381,"unit_price_vat_no_discount":2263.4381,"item_price_vat":2263.44,"item_price_vat_no_discount":2263.44,"item_price_vat_check":2263.44},{"id":"24636772","invoice_id":"7669530","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"Zaokrouhlen\u00ed","description":"","sku":null,"quantity":"1.00000","unit":"","unit_price":-0.94,"tax":0,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"2","hide_in_autocomplete":null,"unit_price_discount":-0.94,"item_price":-0.94,"item_price_no_discount":-0.94,"discount_no_vat":0,"discount_with_vat":0,"discount_with_vat_total":0,"discount_no_vat_total":0,"unit_price_vat":-0.94,"unit_price_vat_no_discount":-0.94,"item_price_vat":-0.94,"item_price_vat_no_discount":-0.94,"item_price_vat_check":-0.94}],"Summary":{"vat_base_separate":{"21":15120.61,"0":-0.94},"vat_base_total":15119.67,"vat_separate":{"21":3175.33,"0":-0},"vat_total":3175.33,"invoice_total":18295,"discount":0},"SummaryInvoice":{"vat_base_separate_positive":{"21":15120.61,"0":-0.94},"vat_base_separate_negative":{"21":0,"0":0},"vat_separate_positive":{"21":3175.33,"0":-0},"vat_separate_negative":{"21":0,"0":0}},"UnitCount":{"ks":2},"Paypal":false,"RelatedItems":[],"Qr":{"qr":"SPD*1.0*ACC:CZ0420100000002601817728+FIOBCZPPXXX*AM:9295*CC:CZK*MSG:000009%252F2025%2B-%2BADMIN%2BESHOPU*X-VS:211*X-SS:6","qr_type":"QrPlatba","qr_url":"https:\/\/moje.superfaktura.cz\/tools\/qrCoder?key=d0791e829408fb0d3ee4cb3c9f412961&text=SPD%2A1.0%2AACC%3ACZ0420100000002601817728%2BFIOBCZPPXXX%2AAM%3A9295%2ACC%3ACZK%2AMSG%3A000009%25252F2025%252B-%252BADMIN%252BESHOPU%2AX-VS%3A211%2AX-SS%3A6&size=150"},"PaymentLink":""}}
END_RESPONSE
2025-04-14T14:44:43.562+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.s.SuperFakturaInvoiceService       : Final Invoice API call successful for order 211.
2025-04-14T14:44:43.562+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.s.SuperFakturaInvoiceService       : Constructed PDF download URL with token: https://moje.superfaktura.cz/invoices/pdf/7669530/token:b24e14cb
2025-04-14T14:44:43.562+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.s.SuperFakturaInvoiceService       : Parsed Final Invoice response for order 211: ID=7669530, Number=000009/2025, PDF URL=https://moje.superfaktura.cz/invoices/pdf/7669530/token:b24e14cb
2025-04-14T14:44:43.562+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.s.SuperFakturaInvoiceService       : Order 211 updated with Final Invoice details.
2025-04-14T14:44:43.583+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6
2025-04-14T14:44:43.584+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:43.584+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:43.584+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 6
2025-04-14T14:44:43.584+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-7] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:44:43.593+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:44:43.595+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 6
2025-04-14T14:44:51.101+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6/mark-fully-paid
2025-04-14T14:44:51.101+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:51.101+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:51.101+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Admin action: Attempting to mark order as fully paid for order ID: 6
2025-04-14T14:44:51.101+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.OrderService   : Calculating remaining amount for order 211: Total(18295.00) - Deposit(9000.00) = 9295.00
2025-04-14T14:44:51.101+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.OrderService   : Marking order 211 fully paid on 2025-04-14
2025-04-14T14:44:51.109+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.OrderService   : Attempting to mark final invoice SF ID 7669530 as paid in SuperFaktura (Amount: 9295.00, Date: 2025-04-14, Type: transfer) for order 211
2025-04-14T14:44:51.110+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Attempting to mark invoice SF ID 7669530 as paid for order 211 via API. Amount: 9295.00, Date: 2025-04-14, Type: transfer
2025-04-14T14:44:51.111+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Found currency 'CZK' for invoice SF ID 7669530 from order 211
2025-04-14T14:44:51.111+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : SF API Request Payload (Mark Invoice Paid - Order 211):
{
  "InvoicePayment" : {
    "date" : "2025-04-14",
    "payment_type" : "transfer",
    "amount" : 9295.00,
    "invoice_id" : 7669530,
    "currency" : "CZK"
  }
}
2025-04-14T14:44:51.111+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Sending Mark Invoice Paid request to SF API: URL=https://moje.superfaktura.cz/invoice_payments/add/invoice_id:7669530.json, Method=POST
2025-04-14T14:44:51.280+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Raw SF API Response Body for Mark Invoice Paid (Order 211): START
{"payment_id":"4939928","error":0,"invoice_id":7669530,"status":3,"paid":18295,"to_pay":0,"to_pay_home_cur":0,"currency":"K\u010d","home_currency":"K\u010d","exchange_rate":1,"country_exchange_rate":1,"invoice_type":"regular","parent_id":null,"overdue":false,"created":"2025-04-14","invoice_currency":"K\u010d","flash_message":{"text":"Platba byla ulo\u017eena","type":"success"}}
END_RESPONSE
2025-04-14T14:44:51.281+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : SF API call successful (2xx) for Mark Invoice Paid (Order 211). Response has no 'data' key.
2025-04-14T14:44:51.281+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Successfully requested marking invoice SF ID 7669530 as paid for order 211
2025-04-14T14:44:51.284+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.OrderService   : Successfully requested marking final invoice SF ID 7669530 as paid in SuperFaktura.
2025-04-14T14:44:51.297+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Admin action: Order marked as fully paid for order ID: 6
2025-04-14T14:44:51.311+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6
2025-04-14T14:44:51.311+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:51.311+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:51.311+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 6
2025-04-14T14:44:51.311+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:44:51.321+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:44:51.323+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 6
2025-04-14T14:44:57.846+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T14:44:57.846+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:57.846+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:57.846+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T14:44:59.739+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /muj-ucet/objednavky
2025-04-14T14:44:59.739+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:44:59.739+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:44:59.752+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Finding all orders for customer ID: 2
2025-04-14T14:45:01.743+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /muj-ucet/objednavky/211
2025-04-14T14:45:01.743+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:45:01.743+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:45:01.747+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.c.CustomerAccountController        : Customer admin@example.com (ID: 2) viewing order detail for CODE: 211
2025-04-14T14:45:01.747+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.OrderService   : Finding order by code: 211
2025-04-14T14:45:01.761+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.c.CustomerAccountController        : Order detail for CODE 211 loaded successfully for customer admin@example.com
2025-04-14T14:45:52.228+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /muj-ucet/profil
2025-04-14T14:45:52.228+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:45:52.228+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:45:53.408+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /muj-ucet/adresy
2025-04-14T14:45:53.408+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:45:53.408+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:45:54.692+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /muj-ucet/zmena-hesla
2025-04-14T14:45:54.693+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:45:54.693+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:45:56.511+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T14:45:56.512+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:45:56.512+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:45:56.512+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T14:46:50.195+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin.]
2025-04-14T14:46:51.541+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6
2025-04-14T14:46:51.541+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:46:51.541+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:46:51.543+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 6
2025-04-14T14:46:51.544+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:46:51.551+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:46:51.562+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 6
2025-04-14T14:46:52.888+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/customers
2025-04-14T14:46:52.888+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:46:52.888+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:46:52.896+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.a.c.AdminCustomerController        : Requesting admin customer list view. Filters: email=null, name=null, enabled=null. Pageable: Page request [number: 0, size 20, sort: id: DESC]
2025-04-14T14:46:52.904+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-10] o.example.eshop.service.CustomerService  : Searching for customers with filters - Email: 'null', Name: 'null', Enabled: null, Page: Page request [number: 0, size 20, sort: id: DESC]
2025-04-14T14:46:55.626+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/customers/3
2025-04-14T14:46:55.626+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:46:55.626+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:46:55.628+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.c.AdminCustomerController        : Requesting admin customer detail view for ID: 3
2025-04-14T14:47:01.460+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/customers
2025-04-14T14:47:01.460+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:47:01.461+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:47:01.462+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.c.AdminCustomerController        : Requesting admin customer list view. Filters: email=null, name=null, enabled=null. Pageable: Page request [number: 0, size 20, sort: id: DESC]
2025-04-14T14:47:01.462+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] o.example.eshop.service.CustomerService  : Searching for customers with filters - Email: 'null', Name: 'null', Enabled: null, Page: Page request [number: 0, size 20, sort: id: DESC]
2025-04-14T14:47:04.026+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/products
2025-04-14T14:47:04.026+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:47:04.026+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:47:04.028+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.c.AdminProductController         : Requesting admin product list view. Filters: name=null, active=null. Pageable: Page request [number: 0, size 15, sort: id: DESC]
2025-04-14T14:47:04.032+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getAllProducts(Pageable: Page request [number: 0, size 15, sort: id: DESC]) <<<
2025-04-14T14:47:04.036+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.ProductService   : [ProductService] getAllProducts(Pageable): Načtena stránka s 3 produkty.
2025-04-14T14:47:04.036+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getAllProducts(Pageable) <<<
2025-04-14T14:47:06.578+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/designs
2025-04-14T14:47:06.578+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:47:06.578+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:47:06.578+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.c.AdminDesignController          : Requesting design list view.
2025-04-14T14:47:06.584+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.admin.service.DesignService    : Fetching all designs sorted by name
2025-04-14T14:47:08.464+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/coupons
2025-04-14T14:47:08.464+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:47:08.464+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:47:08.464+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.c.AdminCouponController          : Requesting coupon list view.
2025-04-14T14:47:08.471+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-7] o.example.eshop.service.CouponService    : Fetching all coupons for CMS
2025-04-14T14:47:10.320+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/discounts.]
2025-04-14T14:47:11.967+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/coupons
2025-04-14T14:47:11.967+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:47:11.967+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:47:11.972+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.a.c.AdminCouponController          : Requesting coupon list view.
2025-04-14T14:47:11.974+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.example.eshop.service.CouponService    : Fetching all coupons for CMS
2025-04-14T14:55:33.705+02:00  WARN 29156 --- [Eshop] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m9s145ms641µs600ns).
2025-04-14T14:55:53.280+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin.]
2025-04-14T14:55:55.009+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/4
2025-04-14T14:55:55.009+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:55:55.017+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:55:55.018+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 4
2025-04-14T14:55:55.018+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] org.example.eshop.service.OrderService   : Finding order by ID: 4
2025-04-14T14:55:55.027+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:55:55.034+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 4
2025-04-14T14:55:56.331+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/customers
2025-04-14T14:55:56.331+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:55:56.331+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:55:56.337+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.c.AdminCustomerController        : Requesting admin customer list view. Filters: email=null, name=null, enabled=null. Pageable: Page request [number: 0, size 20, sort: id: DESC]
2025-04-14T14:55:56.340+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] o.example.eshop.service.CustomerService  : Searching for customers with filters - Email: 'null', Name: 'null', Enabled: null, Page: Page request [number: 0, size 20, sort: id: DESC]
2025-04-14T14:55:58.923+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders
2025-04-14T14:55:58.923+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:55:58.923+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:55:58.931+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.controller.AdminOrderController  : Requesting admin order list view. Filters: stateId=null, paymentStatus=, customerEmail=, dateFrom=null, dateTo=null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:55:58.931+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] org.example.eshop.service.OrderService   : OrderService.findOrders called with filters - Email: 'N/A', StateID: null, PaymentStatus: 'N/A', From: null, To: null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:55:58.941+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] org.example.eshop.service.OrderService   : Found 6 orders matching criteria using specifications.
2025-04-14T14:55:58.941+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:55:58.948+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.controller.AdminOrderController  : [AdminOrderController.listOrders] Service returned page: Number=0, Elements=6, TotalElements=6
2025-04-14T14:56:02.608+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/2
2025-04-14T14:56:02.608+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:56:02.608+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:56:02.610+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 2
2025-04-14T14:56:02.610+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Finding order by ID: 2
2025-04-14T14:56:02.621+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:56:02.624+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 2
2025-04-14T14:56:15.558+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders
2025-04-14T14:56:15.559+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:56:15.559+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:56:15.559+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.controller.AdminOrderController  : Requesting admin order list view. Filters: stateId=null, paymentStatus=, customerEmail=, dateFrom=null, dateTo=null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:56:15.559+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-7] org.example.eshop.service.OrderService   : OrderService.findOrders called with filters - Email: 'N/A', StateID: null, PaymentStatus: 'N/A', From: null, To: null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:56:15.563+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] org.example.eshop.service.OrderService   : Found 6 orders matching criteria using specifications.
2025-04-14T14:56:15.568+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:56:15.568+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.controller.AdminOrderController  : [AdminOrderController.listOrders] Service returned page: Number=0, Elements=6, TotalElements=6
2025-04-14T14:56:19.800+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/1
2025-04-14T14:56:19.800+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:56:19.800+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:56:19.802+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 1
2025-04-14T14:56:19.802+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.OrderService   : Finding order by ID: 1
2025-04-14T14:56:19.810+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:56:19.813+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 1
2025-04-14T14:56:26.815+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/1
2025-04-14T14:56:26.815+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:56:26.815+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:56:26.817+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 1
2025-04-14T14:56:26.818+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] org.example.eshop.service.OrderService   : Finding order by ID: 1
2025-04-14T14:56:26.825+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:56:26.828+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 1
2025-04-14T14:56:27.257+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2025-04-14T14:56:32.521+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/1/update-state
2025-04-14T14:56:32.521+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:56:32.521+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:56:32.522+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Attempting to update state for order ID: 1 to state ID: 2
2025-04-14T14:56:32.528+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Updating order 206 state from 'Nová' to 'Čeká na zálohu'
2025-04-14T14:56:32.532+02:00 DEBUG 29156 --- [Eshop] [task-11] org.example.eshop.service.EmailService   : Loading email config for state 'AWAITING_DEPOSIT' from database.
2025-04-14T14:56:32.534+02:00 DEBUG 29156 --- [Eshop] [task-11] org.example.eshop.service.EmailService   : Loaded and cached email config for state 'AWAITING_DEPOSIT'. SendEmail: true
2025-04-14T14:56:32.534+02:00 ERROR 29156 --- [Eshop] [task-11] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-11] Exception processing template "emails/order-status-awaiting-deposit": Error resolving template [emails/order-status-awaiting-deposit], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-awaiting-deposit], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:56:32.534+02:00 ERROR 29156 --- [Eshop] [task-11] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'emails/order-status-awaiting-deposit' for status update order 206: Error resolving template [emails/order-status-awaiting-deposit], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-awaiting-deposit], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:56:32.540+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Successfully updated state for order ID: 1
2025-04-14T14:56:32.558+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/1
2025-04-14T14:56:32.558+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:56:32.558+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:56:32.558+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 1
2025-04-14T14:56:32.558+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-10] org.example.eshop.service.OrderService   : Finding order by ID: 1
2025-04-14T14:56:32.565+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:56:32.567+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 1
2025-04-14T14:57:10.230+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/1
2025-04-14T14:57:10.231+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:57:10.231+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:57:10.276+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 1
2025-04-14T14:57:10.277+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] org.example.eshop.service.OrderService   : Finding order by ID: 1
2025-04-14T14:57:10.381+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:57:10.390+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 1
2025-04-14T14:57:51.920+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin.]
2025-04-14T14:57:53.489+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/1
2025-04-14T14:57:53.489+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:57:53.489+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:57:53.491+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 1
2025-04-14T14:57:53.491+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Finding order by ID: 1
2025-04-14T14:57:53.500+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:57:53.503+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 1
2025-04-14T14:57:54.897+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/customers
2025-04-14T14:57:54.899+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:57:54.899+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:57:54.900+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.c.AdminCustomerController        : Requesting admin customer list view. Filters: email=null, name=null, enabled=null. Pageable: Page request [number: 0, size 20, sort: id: DESC]
2025-04-14T14:57:54.900+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-7] o.example.eshop.service.CustomerService  : Searching for customers with filters - Email: 'null', Name: 'null', Enabled: null, Page: Page request [number: 0, size 20, sort: id: DESC]
2025-04-14T14:57:56.497+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders
2025-04-14T14:57:56.497+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:57:56.497+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:57:56.498+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : Requesting admin order list view. Filters: stateId=null, paymentStatus=, customerEmail=, dateFrom=null, dateTo=null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:57:56.499+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.OrderService   : OrderService.findOrders called with filters - Email: 'N/A', StateID: null, PaymentStatus: 'N/A', From: null, To: null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:57:56.499+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.OrderService   : Found 6 orders matching criteria using specifications.
2025-04-14T14:57:56.499+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:57:56.509+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : [AdminOrderController.listOrders] Service returned page: Number=0, Elements=6, TotalElements=6
2025-04-14T14:58:31.820+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6
2025-04-14T14:58:31.821+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:58:31.821+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:58:31.823+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 6
2025-04-14T14:58:31.823+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:58:31.837+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:58:31.841+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 6
2025-04-14T14:58:31.900+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-6] org.thymeleaf.TemplateEngine             : [THYMELEAF][http-nio-8080-exec-6] Exception processing template "admin/order-detail": An error happened during template parsing (template: "class path resource [templates/admin/order-detail.html]")

org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/admin/order-detail.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372) ~[thymeleaf-spring6-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192) ~[thymeleaf-spring6-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.attoparser.ParseException: Could not parse as expression: "${!order.finalInvoiceGenerated and order.sfFinalInvoiceId == null and (order.paymentMethod == 'CASH_ON_DELIVERY' or order.paymentMethod ==" (template: "admin/order-detail" - line 126, col 27)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	... 127 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Could not parse as expression: "${!order.finalInvoiceGenerated and order.sfFinalInvoiceId == null and (order.paymentMethod == 'CASH_ON_DELIVERY' or order.paymentMethod ==" (template: "admin/order-detail" - line 126, col 27)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:131) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:62) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:44) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.standard.processor.StandardIfTagProcessor.isVisible(StandardIfTagProcessor.java:58) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.standard.processor.AbstractStandardConditionalVisibilityTagProcessor.doProcess(AbstractStandardConditionalVisibilityTagProcessor.java:61) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.Model.process(Model.java:282) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.Model.process(Model.java:282) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.Model.process(Model.java:282) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.Model.process(Model.java:290) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.GatheringModelProcessable.process(GatheringModelProcessable.java:78) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleCloseElement(ProcessorTemplateHandler.java:1640) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleCloseElementEnd(TemplateHandlerAdapterMarkupHandler.java:388) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleCloseElementEnd(InlinedOutputExpressionMarkupHandler.java:322) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleCloseElementEnd(OutputExpressionInlinePreProcessorHandler.java:220) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleCloseElementEnd(InlinedOutputExpressionMarkupHandler.java:164) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.attoparser.HtmlElement.handleCloseElementEnd(HtmlElement.java:169) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.attoparser.HtmlMarkupHandler.handleCloseElementEnd(HtmlMarkupHandler.java:412) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.attoparser.MarkupEventProcessorHandler.handleCloseElementEnd(MarkupEventProcessorHandler.java:473) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.attoparser.ParsingElementMarkupUtil.parseCloseElement(ParsingElementMarkupUtil.java:201) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:725) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	... 129 common frames omitted

2025-04-14T14:58:31.915+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/admin/order-detail.html]")] with root cause

org.thymeleaf.exceptions.TemplateProcessingException: Could not parse as expression: "${!order.finalInvoiceGenerated and order.sfFinalInvoiceId == null and (order.paymentMethod == 'CASH_ON_DELIVERY' or order.paymentMethod ==" (template: "admin/order-detail" - line 126, col 27)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:131) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:62) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:44) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.standard.processor.StandardIfTagProcessor.isVisible(StandardIfTagProcessor.java:58) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.standard.processor.AbstractStandardConditionalVisibilityTagProcessor.doProcess(AbstractStandardConditionalVisibilityTagProcessor.java:61) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.Model.process(Model.java:282) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.Model.process(Model.java:282) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1587) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.Model.process(Model.java:282) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.Model.process(Model.java:290) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.GatheringModelProcessable.process(GatheringModelProcessable.java:78) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleCloseElement(ProcessorTemplateHandler.java:1640) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleCloseElementEnd(TemplateHandlerAdapterMarkupHandler.java:388) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleCloseElementEnd(InlinedOutputExpressionMarkupHandler.java:322) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleCloseElementEnd(OutputExpressionInlinePreProcessorHandler.java:220) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleCloseElementEnd(InlinedOutputExpressionMarkupHandler.java:164) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.attoparser.HtmlElement.handleCloseElementEnd(HtmlElement.java:169) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.attoparser.HtmlMarkupHandler.handleCloseElementEnd(HtmlMarkupHandler.java:412) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.attoparser.MarkupEventProcessorHandler.handleCloseElementEnd(MarkupEventProcessorHandler.java:473) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.attoparser.ParsingElementMarkupUtil.parseCloseElement(ParsingElementMarkupUtil.java:201) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:725) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257) ~[attoparser-2.0.7.RELEASE.jar:2.0.7.RELEASE]
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372) ~[thymeleaf-spring6-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192) ~[thymeleaf-spring6-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1437) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:58:31.952+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6
2025-04-14T14:58:31.952+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:58:31.952+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:58:31.999+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-6] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [/admin/orders/6] and exception [An error happened during template parsing (template: "class path resource [templates/admin/order-detail.html]")] as the response has already been committed. As a result, the response may have the wrong status code.
2025-04-14T14:58:54.944+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6
2025-04-14T14:58:54.945+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:58:54.945+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:58:54.946+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 6
2025-04-14T14:58:54.947+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:58:54.960+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:58:54.963+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 6
2025-04-14T14:58:57.033+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin.]
2025-04-14T14:58:58.160+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6
2025-04-14T14:58:58.160+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:58:58.160+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:58:58.162+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 6
2025-04-14T14:58:58.162+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:58:58.193+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:58:58.197+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 6
2025-04-14T14:58:59.298+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders
2025-04-14T14:58:59.298+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:58:59.298+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:58:59.302+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.controller.AdminOrderController  : Requesting admin order list view. Filters: stateId=null, paymentStatus=, customerEmail=, dateFrom=null, dateTo=null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:58:59.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] org.example.eshop.service.OrderService   : OrderService.findOrders called with filters - Email: 'N/A', StateID: null, PaymentStatus: 'N/A', From: null, To: null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:58:59.306+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] org.example.eshop.service.OrderService   : Found 6 orders matching criteria using specifications.
2025-04-14T14:58:59.313+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:58:59.314+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.controller.AdminOrderController  : [AdminOrderController.listOrders] Service returned page: Number=0, Elements=6, TotalElements=6
2025-04-14T14:59:00.699+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/6
2025-04-14T14:59:00.699+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:00.699+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:00.699+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 6
2025-04-14T14:59:00.699+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] org.example.eshop.service.OrderService   : Finding order by ID: 6
2025-04-14T14:59:00.715+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:59:00.719+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 6
2025-04-14T14:59:02.926+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders
2025-04-14T14:59:02.926+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:02.926+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:02.926+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Requesting admin order list view. Filters: stateId=null, paymentStatus=, customerEmail=, dateFrom=null, dateTo=null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:59:02.932+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : OrderService.findOrders called with filters - Email: 'N/A', StateID: null, PaymentStatus: 'N/A', From: null, To: null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:59:02.940+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Found 6 orders matching criteria using specifications.
2025-04-14T14:59:02.943+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:59:02.948+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : [AdminOrderController.listOrders] Service returned page: Number=0, Elements=6, TotalElements=6
2025-04-14T14:59:04.467+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin.]
2025-04-14T14:59:05.899+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders
2025-04-14T14:59:05.899+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:05.899+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:05.902+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : Requesting admin order list view. Filters: stateId=null, paymentStatus=, customerEmail=, dateFrom=null, dateTo=null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:59:05.902+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.OrderService   : OrderService.findOrders called with filters - Email: 'N/A', StateID: null, PaymentStatus: 'N/A', From: null, To: null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:59:05.912+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.OrderService   : Found 6 orders matching criteria using specifications.
2025-04-14T14:59:05.912+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:59:05.922+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : [AdminOrderController.listOrders] Service returned page: Number=0, Elements=6, TotalElements=6
2025-04-14T14:59:07.569+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T14:59:07.569+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:07.569+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:07.569+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T14:59:08.764+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkty
2025-04-14T14:59:08.764+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:08.764+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:08.764+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do listProducts. Pageable: Page request [number: 0, size 9, sort: name: ASC]
2025-04-14T14:59:08.764+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProducts(Pageable: Page request [number: 0, size 9, sort: name: ASC]) <<<
2025-04-14T14:59:08.772+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : [ProductService] getActiveProducts(Pageable): Načtena stránka s 3 aktivními produkty.
2025-04-14T14:59:08.772+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProducts(Pageable) <<<
2025-04-14T14:59:08.772+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : [ProductController] ProductService.getActiveProducts vrátil stránku: TotalElements=3, TotalPages=1, Number=0, Size=9
2025-04-14T14:59:08.780+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : [ProductController] Hibernate.initialize(images) dokončeno pro 3 produktů na stránce.
2025-04-14T14:59:08.780+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím listProducts. Obsah modelu před vrácením 'produkty': {currentGlobalCurrency=CZK, productPage=Page 1 of 1 containing org.example.eshop.model.Product instances}
2025-04-14T14:59:08.881+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T14:59:08.881+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:08.881+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:08.885+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/placeholder-custom.png
2025-04-14T14:59:08.885+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-modern-1.jpg
2025-04-14T14:59:08.885+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:08.885+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:08.885+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:08.885+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:08.885+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:59:08.887+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T14:59:08.887+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-modern-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:59:08.887+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "placeholder-custom.png"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:59:08.893+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-modern-1.jpg]]
2025-04-14T14:59:08.893+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [placeholder-custom.png]]
2025-04-14T14:59:09.991+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /produkt/klasik
2025-04-14T14:59:09.991+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:09.991+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:09.991+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : >>> [ProductController] Vstupuji do productDetail. Slug: klasik
2025-04-14T14:59:09.991+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getActiveProductBySlug. Slug: klasik
2025-04-14T14:59:09.999+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : [ProductService] getActiveProductBySlug: Aktivní produkt se slugem 'klasik' nalezen.
2025-04-14T14:59:09.999+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getActiveProductBySlug (Slug: klasik) <<<
2025-04-14T14:59:09.999+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Produkt ID 1 nalezen pro slug 'klasik'.
2025-04-14T14:59:09.999+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Inicializovány obrázky pro produkt ID 1
2025-04-14T14:59:09.999+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Zpracovávám detail pro STANDARD produkt ID 1
2025-04-14T14:59:10.012+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : [ProductController] Inicializovány designy, lazury a barvy střech pro standardní produkt ID 1
2025-04-14T14:59:10.012+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.ProductController   : >>> [ProductController] Opouštím productDetail. Obsah modelu před vrácením 'produkt-detail-standard': {currentGlobalCurrency=CZK, product=org.example.eshop.model.Product@1b673f50, basePriceCZK=5990.00, basePriceEUR=250.00, availableDesigns=[org.example.eshop.model.Design@20, org.example.eshop.model.Design@21], availableGlazes=[org.example.eshop.model.Glaze@7e8318e8, org.example.eshop.model.Glaze@7e8318e8, org.example.eshop.model.Glaze@7e8318e8], availableRoofColors=[org.example.eshop.model.RoofColor@38d45770, org.example.eshop.model.RoofColor@38d45770, org.example.eshop.model.RoofColor@38d45770], cartItemDto=org.example.eshop.dto.CartItemDto@64c85cbe}
2025-04-14T14:59:10.131+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T14:59:10.131+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:10.131+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:10.137+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:59:10.137+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T14:59:11.186+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik/pridat
2025-04-14T14:59:11.187+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:11.187+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:11.202+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : --- addToCart START (Attribute Select Version) --- Cart instance hash: -557472145
2025-04-14T14:59:11.204+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 1
2025-04-14T14:59:11.208+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 1 nalezen.
2025-04-14T14:59:11.208+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 1) <<<
2025-04-14T14:59:11.208+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Processing addToCart request for product ID: 1
2025-04-14T14:59:11.208+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : CartItemDto details: isCustom=false, quantity=1
2025-04-14T14:59:11.208+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Selected IDs: Design=1, Glaze=3, RoofColor=1
2025-04-14T14:59:11.208+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do getProductById. ID: 1
2025-04-14T14:59:11.208+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.example.eshop.service.ProductService   : [ProductService] getProductById: Produkt ID 1 nalezen.
2025-04-14T14:59:11.208+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím getProductById (ID: 1) <<<
2025-04-14T14:59:11.224+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Applied Tax Rate 21.00% for product ID 1
2025-04-14T14:59:11.224+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Calculated attribute surcharges: CZK=0, EUR=0
2025-04-14T14:59:11.224+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Using base price for standard product: CZK=5990.00, EUR=250.00
2025-04-14T14:59:11.224+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Final unit prices calculated (incl. attribute surcharges and addons): CZK=5990.00, EUR=250.00
2025-04-14T14:59:11.224+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Built variant info string for CartItem (ProductID: 1): 'Rozměry (DxHxV): 200x80x180 cm | Design: Klasik | Lazura: Bezbarvý lak | Střecha: Antracit'
2025-04-14T14:59:11.224+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : Generated Cart Item ID: P1-S-D1-G3-RC1
2025-04-14T14:59:11.224+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.Cart           : addItem called for cart hash: 1417332352. Item ID: P1-S-D1-G3-RC1, Product ID: 1
2025-04-14T14:59:11.224+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.Cart           : Added new cart item ID: P1-S-D1-G3-RC1. Cart hash: 1417332352
2025-04-14T14:59:11.224+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.Cart           : Cart items map after addItem (hash: 1417332352): {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=1, taxRatePercent=0.21}}
2025-04-14T14:59:11.224+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.controller.CartController      : --- addToCart END --- Item added/updated. Cart instance hash: -557472145, Current cart items count: 1
2025-04-14T14:59:11.231+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /kosik
2025-04-14T14:59:11.231+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:11.231+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:11.231+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : --- viewCart START --- Cart instance hash: -557472145
2025-04-14T14:59:11.231+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Cart items before display: {P1-S-D1-G3-RC1=CartItem{cartItemId='P1-S-D1-G3-RC1', productId=1, quantity=1, taxRatePercent=0.21}}
2025-04-14T14:59:11.231+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Displaying cart page. Cart has 1 items.
2025-04-14T14:59:11.231+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Current currency set to: CZK
2025-04-14T14:59:11.231+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Cart subtotal (CZK): 5990.00
2025-04-14T14:59:11.231+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Validated coupon: None, Discount amount (CZK): 0
2025-04-14T14:59:11.231+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Total VAT (CZK): 1257.90
2025-04-14T14:59:11.231+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : VAT Breakdown (CZK): {0.21=1257.90}
2025-04-14T14:59:11.239+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Total Price Before Shipping (CZK): 7247.90
2025-04-14T14:59:11.239+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : Total Price Without Tax After Discount (CZK): 5990.00
2025-04-14T14:59:11.239+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.controller.CartController      : --- viewCart END --- Model attributes set for cart.
2025-04-14T14:59:11.313+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /images/drevnik-klasik-1.jpg
2025-04-14T14:59:11.313+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:11.313+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:11.313+02:00 ERROR 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalApiExceptionHandler   : Unexpected error: 

org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:509) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at org.springframework.data.rest.webmvc.RepositoryEntityController.getItemResource(RepositoryEntityController.java:317) ~[spring-data-rest-webmvc-4.4.4.jar:4.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.lang.NumberFormatException: For input string: "drevnik-klasik-1.jpg"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]
	at java.base/java.lang.Long.parseLong(Long.java:709) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1157) ~[na:na]
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:204) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:64) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.StringToNumberConverterFactory$StringToNumber.convert(StringToNumberConverterFactory.java:50) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.GenericConversionService$ConverterFactoryAdapter.convert(GenericConversionService.java:415) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41) ~[spring-core-6.2.5.jar:6.2.5]
	... 133 common frames omitted

2025-04-14T14:59:11.318+02:00  WARN 29156 --- [Eshop] [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value [drevnik-klasik-1.jpg]]
2025-04-14T14:59:12.575+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna
2025-04-14T14:59:12.577+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:12.577+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:12.583+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Displaying checkout page for user: admin@example.com in currency: CZK
2025-04-14T14:59:12.603+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Initialized checkout form DTO from logged-in customer 2.
2025-04-14T14:59:12.603+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Added shippingTaxRate 0.21 to model.
2025-04-14T14:59:12.603+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T14:59:12.603+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Praa, 11000, Česká republika'
2025-04-14T14:59:12.899+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 1870.61 CZK (Distance: 91.4 km)
2025-04-14T14:59:12.899+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Preparing checkout summary model data for currency: CZK
2025-04-14T14:59:12.899+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Rounding calculation: originalTotalPrice=9511.34, roundedTotalPrice=9511, roundingDifference=0.34
2025-04-14T14:59:12.899+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout summary model prepared: subtotal=5990.00, itemDiscount=0, itemVat=1257.90, origShipCost=1870.61, shipDiscount=0, finalShipCost=1870.61, finalShipTax=392.83, originalTotal=9511.34, roundingDiff=0.34, finalRoundedTotal=9511, totalVatWithShip=1650.73, shippingError='null'
2025-04-14T14:59:12.899+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.controller.CheckoutController  : Checkout page model prepared for admin@example.com. Currency: CZK
2025-04-14T14:59:22.003+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/calculate-shipping
2025-04-14T14:59:22.003+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:22.003+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:22.023+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : AJAX request to calculate shipping for address: ShippingAddressDto(street=Adminova 1, city=Praha, zipCode=11000, country=Česká republika) in currency CZK
2025-04-14T14:59:22.023+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculating shipping cost for order null in currency CZK
2025-04-14T14:59:22.023+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calling Google Distance Matrix API: Origin=50.03500389,15.49180022, Destination='Adminova 1, Praha, 11000, Česká republika'
2025-04-14T14:59:22.170+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.service.GoogleMapsShippingService  : Calculated shipping cost for order null: 2025.16 CZK (Distance: 101.7 km)
2025-04-14T14:59:22.170+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.eshop.controller.CheckoutController  : AJAX Shipping Calc OK: origCost=2025.16, origTax=425.28, shipDiscount=0, finalCost=2025.16, finalTax=425.28, finalTotal=9698.34, finalTotalVat=1683.18
2025-04-14T14:59:23.274+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /pokladna/odeslat
2025-04-14T14:59:23.274+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:23.274+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:23.301+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Processing checkout submission for user: admin@example.com in currency: CZK
2025-04-14T14:59:23.301+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Set email in DTO from principal for logged-in user: admin@example.com
2025-04-14T14:59:23.301+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Getting logged-in customer: admin@example.com
2025-04-14T14:59:23.303+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Customer 2 address differs or useInvoice flag changed, updating from DTO.
2025-04-14T14:59:23.303+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.CustomerService  : Setting invoice name/lastname from main contact for customer ID 2.
2025-04-14T14:59:23.303+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.example.eshop.service.CustomerService  : Saving customer ID: 2
2025-04-14T14:59:23.303+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Updated address data saved for customer 2.
2025-04-14T14:59:23.307+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Using valid shipping costs from form: NoTax=2025.16, Tax=425.28
2025-04-14T14:59:23.307+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Calculating final order totals for saving: originalTotal=9698.34, roundedTotal=9698
2025-04-14T14:59:23.307+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Attempting to create order with request: CreateOrderRequest(customerId=2, useCustomerAddresses=true, paymentMethod=BANK_TRANSFER, currency=CZK, customerNote=, couponCode=null, items=[org.example.eshop.dto.CartItemDto@104f4311], shippingCostNoTax=2025.16, shippingTax=425.28)
2025-04-14T14:59:23.307+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 2 with explicit currency: CZK
2025-04-14T14:59:23.307+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T14:59:23.307+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T14:59:23.307+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 2 to order.
2025-04-14T14:59:23.307+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Invoice recipient is person: Admin Eshopu
2025-04-14T14:59:23.307+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T14:59:23.307+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T14:59:23.307+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T14:59:23.307+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Processing item with Product ID: 1
2025-04-14T14:59:23.307+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 1
2025-04-14T14:59:23.319+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T14:59:23.319+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 1)
2025-04-14T14:59:23.319+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Klasik | Lazura: Bezbarvý lak | Střecha: Antracit
2025-04-14T14:59:23.319+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 5990.00
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Unit Price After Discount: 5990.00
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 5990.00
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Unit Tax Amount: 1257.90
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Unit Price With Tax: 7247.90
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=5990.00, TotalTaxAmount=1257.90, TotalPriceWithTax=7247.90
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=5990.00, TaxAmount=1257.90
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 5990.00, Running Item Tax: 1257.90
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 5990.00, Final Item Tax: 1257.90
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 2025.16, Tax: 425.28, Estimated Rate: 0.2100
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=8015.16, TotalTax=1683.18, OriginalTotalWithTax=9698.34, RoundedTotalToSave=9698
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=8015.16, TotalTax=1683.18, OriginalTotalWithTax=9698.34, RoundedTotalToSave=9698
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T14:59:23.324+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 212
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Generated Order Code: 212
2025-04-14T14:59:23.324+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T14:59:23.343+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Order 212 created successfully. Total: 9698 CZK
2025-04-14T14:59:23.343+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 212...
2025-04-14T14:59:23.343+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Order 212 successfully created with currency CZK for user: admin@example.com
2025-04-14T14:59:23.343+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.Cart           : clearCart called for cart hash: 1417332352. Clearing items and coupon.
2025-04-14T14:59:23.343+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.controller.CheckoutController  : Session cart cleared for admin@example.com
2025-04-14T14:59:23.343+02:00 ERROR 29156 --- [Eshop] [task-12] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-12] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:59:23.343+02:00 ERROR 29156 --- [Eshop] [task-12] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 212: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:59:23.365+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /muj-ucet/objednavky
2025-04-14T14:59:23.365+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:23.365+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:23.365+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-7] org.example.eshop.service.OrderService   : Finding all orders for customer ID: 2
2025-04-14T14:59:27.739+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders
2025-04-14T14:59:27.739+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:27.739+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:27.744+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.a.controller.AdminOrderController  : Requesting admin order list view. Filters: stateId=null, paymentStatus=, customerEmail=, dateFrom=null, dateTo=null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:59:27.744+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] org.example.eshop.service.OrderService   : OrderService.findOrders called with filters - Email: 'N/A', StateID: null, PaymentStatus: 'N/A', From: null, To: null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T14:59:27.757+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] org.example.eshop.service.OrderService   : Found 7 orders matching criteria using specifications.
2025-04-14T14:59:27.757+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:59:27.760+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.a.controller.AdminOrderController  : [AdminOrderController.listOrders] Service returned page: Number=0, Elements=7, TotalElements=7
2025-04-14T14:59:29.222+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/7
2025-04-14T14:59:29.222+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:29.222+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:29.222+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 7
2025-04-14T14:59:29.222+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Finding order by ID: 7
2025-04-14T14:59:29.230+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:59:29.233+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 7
2025-04-14T14:59:32.138+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/7/generate-final
2025-04-14T14:59:32.138+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:32.138+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:32.141+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.a.controller.AdminOrderController  : Admin action: Trigger SuperFaktura FINAL invoice for order ID: 7
2025-04-14T14:59:32.141+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] org.example.eshop.service.OrderService   : Finding order by ID: 7
2025-04-14T14:59:32.149+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Attempting to generate SuperFaktura FINAL invoice for order: 212. Order currency: CZK
2025-04-14T14:59:32.149+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Calculating rounding difference for order 212: Original=9698.34, Rounded=9698.00, Difference=0.34
2025-04-14T14:59:32.149+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Added rounding item to SF payload for order 212: Amount=-0.34
2025-04-14T14:59:32.149+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Not setting 'already_paid' for final invoice 212. Relying on SF deduction via linked proforma_id or payment status.
2025-04-14T14:59:32.149+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : SF API Request Payload (Final Invoice - Order 212):
{
  "Invoice" : {
    "order_no" : "212",
    "date" : "2025-04-14",
    "note" : "",
    "payment_type" : "transfer",
    "delivery_date" : "2025-04-14",
    "variable" : "212",
    "due_date" : "2025-04-28",
    "rounding" : "item",
    "currency" : "CZK",
    "language" : "cze",
    "specific" : "7",
    "type" : "regular"
  },
  "InvoiceItem" : [ {
    "unit" : "ks",
    "quantity" : 1,
    "name" : "Dřevník Klasik (Design: Klasik | Lazura: Bezbarvý lak | Střecha: Antracit)",
    "description" : "Lazura: Bezbarvý lak | Střecha: Antracit | Design: Klasik | Přesah: Standardní",
    "tax" : 21.00,
    "currency" : "CZK",
    "unit_price" : 5990.00,
    "sku" : "klasik"
  }, {
    "unit" : "ks",
    "quantity" : 1,
    "name" : "Doprava",
    "tax" : 21.00,
    "currency" : "CZK",
    "unit_price" : 2025.16
  }, {
    "unit" : "",
    "quantity" : 1,
    "name" : "Zaokrouhlení",
    "tax" : 0.00,
    "currency" : "CZK",
    "unit_price" : -0.34
  } ],
  "Client" : {
    "zip" : "11000",
    "country" : "Česká republika",
    "address" : "Adminova 1",
    "phone" : "987654321",
    "city" : "Praha",
    "name" : "Admin Eshopu",
    "currency" : "CZK",
    "email" : "admin@example.com"
  }
}
2025-04-14T14:59:32.151+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Sending Final Invoice request to SF API: URL=https://moje.superfaktura.cz/invoices/create.json, Method=POST
2025-04-14T14:59:32.512+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Raw SF API Response Body for Final Invoice (Order 212): START
{"error":0,"error_message":"Invoice created","data":{"Invoice":{"id":"7669612","user_id":"39487","user_profile_id":"36761","client_id":"3494543","parent_id":null,"proforma_id":null,"estimate_id":null,"sequence_id":"305624","import_type":null,"import_id":null,"import_parent_id":null,"type":"regular","template":null,"tax_document":null,"name":"Faktura 000009\/2025","lang":null,"client_data":"{\"Client\":{\"user_id\":\"39487\",\"user_profile_id\":\"36761\",\"uuid\":null,\"country_id\":\"57\",\"name\":\"Admin Eshopu\",\"ico\":null,\"dic\":null,\"ic_dph\":null,\"iban\":null,\"swift\":null,\"bank_account_prefix\":null,\"bank_account\":null,\"bank_code\":null,\"account\":null,\"email\":\"admin@example.com\",\"address\":\"Adminova 1\",\"city\":\"Praha\",\"zip\":\"11000\",\"state\":null,\"country\":\"\\u010cesk\\u00e1 republika\",\"delivery_name\":null,\"delivery_address\":null,\"delivery_city\":null,\"delivery_zip\":null,\"delivery_state\":null,\"delivery_country\":null,\"delivery_country_id\":null,\"phone\":\"987654321\",\"delivery_phone\":null,\"fax\":null,\"due_date\":null,\"default_variable\":null,\"discount\":null,\"currency\":\"CZK\",\"bank_account_id\":null,\"comment\":null,\"tags\":null,\"distance\":null,\"dont_travel\":null,\"notices\":\"1\",\"id\":3494543}}","my_data":"{\"MyData\":{\"id\":\"36761\",\"user_id\":\"39451\",\"country_id\":\"57\",\"company_name\":\"Truhl\\u00e1\\u0159stv\\u00ed Kol\\u00e1\\u0159\",\"ico\":\"73589292\",\"dic\":\"\",\"ic_dph\":\"CZ8204183086\",\"business_register\":\"\",\"address\":\"Dru\\u017estevn\\u00ed 304\",\"city\":\"\\u0158e\\u010dany nad Labem\",\"zip\":\"53313\",\"tax_payer\":\"1\",\"BankAccount\":[{\"id\":\"29020\",\"user_id\":\"39451\",\"user_profile_id\":\"36761\",\"currency\":\"CZK\",\"default\":true,\"show\":true,\"country_id\":\"57\",\"bank_name\":\"Fio banka a.s.\",\"bank_code\":\"2010\",\"account\":\"2601817728\",\"iban\":\"CZ0420100000002601817728\",\"swift\":\"FIOBCZPPXXX\",\"created\":\"2021-09-30 09:01:03\",\"modified\":\"2022-03-15 08:14:09\",\"show_account\":true}],\"Logo\":[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}],\"Signature\":{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}}}","items_data":"D\u0159evn\u00edk Klasik (Design: Klasik | Lazura: Bezbarv\u00fd lak | St\u0159echa: Antracit) Lazura: Bezbarv\u00fd lak | St\u0159echa: Antracit | Design: Klasik | P\u0159esah: Standardn\u00ed, Doprava , Zaokrouhlen\u00ed , ","invoice_no":"9","order_no":"212","invoice_no_formatted":"000009\/2025","invoice_no_formatted_raw":"92025","invoice_no_formatted_length":"11","mask":"YYYYNNN","variable":"212","variable_raw":"212","constant":"","specific":"7","payment_type":"transfer","status":"1","home_currency":"CZK","invoice_currency":"CZK","exchange_rate":1,"country_exchange_rate":"1.00000000000000","amount":"8014.82","vat":"1683.18","discount":"0","items_name":null,"issued_by":"mirsvobo","issued_by_phone":"704756313","issued_by_email":"mirsvobo@gmail.com","paid":"0.00","amount_paid":"0.00","deposit":"0.00","header_comment":"","comment":"","internal_comment":null,"created":"2025-04-14 00:00:00","modified":"2025-04-14 14:59:36","recurring":null,"paydate":null,"delivery":"2025-04-14 00:00:00","taxdate":null,"accounting_date":"2025-04-14","delivery_type":"haulage","due":"2025-04-21","demo":"0","token":"b24e14cb","tags":null,"rounding":"item","vat_transfer":null,"special_vat_scheme":null,"issued_by_web":null,"summary_invoice":null,"total_amount":"9698.00","show_items_with_dph":true,"show_special_vat":false,"flag":"issued"},"Client":{"id":"3494543","user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Admin Eshopu","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"admin@example.com","address":"Adminova 1","city":"Hlavn\u00ed M\u011bsto","zip":"11000","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"987654321","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":null,"bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"created":"2025-04-05 22:55:58","modified":"2025-04-05 22:55:58","notices":true},"0":{"to_pay":"9698.000000","to_pay_in_invoice_currency":"9698.00","total":"9698.00"},"InvoiceEmail":[],"PostStamp":[],"InvoiceSetting":{"signature":true,"bysquare":true,"payment_info":true,"language":"cze","online_payment":false,"summary_bg_color":"#d4eef6","force_iban":true},"InvoicePayment":[],"Tag":[],"ClientData":{"user_id":"39487","user_profile_id":"36761","uuid":null,"country_id":"57","name":"Admin Eshopu","ico":null,"dic":null,"ic_dph":null,"iban":null,"swift":null,"bank_account_prefix":null,"bank_account":null,"bank_code":null,"account":null,"email":"admin@example.com","address":"Adminova 1","city":"Praha","zip":"11000","state":null,"country":"\u010cesk\u00e1 republika","delivery_name":null,"delivery_address":null,"delivery_city":null,"delivery_zip":null,"delivery_state":null,"delivery_country":null,"delivery_country_id":null,"phone":"987654321","delivery_phone":null,"fax":null,"due_date":null,"default_variable":null,"discount":null,"currency":"CZK","bank_account_id":null,"comment":null,"tags":null,"distance":null,"dont_travel":null,"notices":"1","id":3494543,"Country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true}},"MyData":{"id":"36761","user_id":"39451","country_id":"57","company_name":"Truhl\u00e1\u0159stv\u00ed Kol\u00e1\u0159","ico":"73589292","dic":"","ic_dph":"CZ8204183086","business_register":"","address":"Dru\u017estevn\u00ed 304","city":"\u0158e\u010dany nad Labem","zip":"53313","tax_payer":"1","BankAccount":[{"id":"29020","user_id":"39451","user_profile_id":"36761","currency":"CZK","default":true,"show":true,"country_id":"57","bank_name":"Fio banka a.s.","bank_code":"2010","account":"2601817728","iban":"CZ0420100000002601817728","swift":"FIOBCZPPXXX","created":"2021-09-30 09:01:03","modified":"2022-03-15 08:14:09","show_account":true}],"Logo":"[{\"id\":\"232833\",\"model\":\"User\",\"foreign_key\":\"36761\",\"dirname\":\"img\",\"basename\":\"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"checksum\":\"879da79e1e0cb910db85417d917648c9\",\"group\":\"logo\",\"default\":true,\"alternative\":null,\"size\":\"56033\",\"extern_file\":\"0\",\"delete_flag\":false,\"created\":\"2021-09-30 09:00:09\",\"modified\":\"2022-03-15 08:14:09\",\"path\":\"img\\\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\",\"mobile_path\":\"imagecache\\\/media\\\/transfer\\\/img\\\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png\"}]","Signature":"{\"id\":null,\"model\":null,\"foreign_key\":null,\"dirname\":null,\"basename\":null,\"checksum\":null,\"group\":null,\"default\":null,\"alternative\":null,\"size\":null,\"extern_file\":null,\"delete_flag\":null,\"created\":null,\"modified\":null,\"path\":\"\"}","country":{"id":57,"name":"\u010cesk\u00e1 republika","iso":"cz","eu":true},"SignatureRaw":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"LogoRaw":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}]},"Logo":[{"id":"232833","model":"User","foreign_key":"36761","dirname":"img","basename":"01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","checksum":"879da79e1e0cb910db85417d917648c9","group":"logo","default":true,"alternative":null,"size":"56033","extern_file":"0","delete_flag":false,"created":"2021-09-30 09:00:09","modified":"2022-03-15 08:14:09","path":"img\/01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png","mobile_path":"imagecache\/media\/transfer\/img\/100x100_01bee4bf6f88cc7efb2e_36761_kolar_miniatura.png"}],"Signature":{"id":null,"model":null,"foreign_key":null,"dirname":null,"basename":null,"checksum":null,"group":null,"default":null,"alternative":null,"size":null,"extern_file":null,"delete_flag":null,"created":null,"modified":null,"path":""},"InvoiceItem":[{"id":"24637124","invoice_id":"7669612","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"D\u0159evn\u00edk Klasik (Design: Klasik | Lazura: Bezbarv\u00fd lak | St\u0159echa: Antracit)","description":"Lazura: Bezbarv\u00fd lak | St\u0159echa: Antracit | Design: Klasik | P\u0159esah: Standardn\u00ed","sku":"klasik","quantity":"1.00000","unit":"ks","unit_price":5990,"tax":21,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"0","hide_in_autocomplete":null,"unit_price_discount":5990,"item_price":5990,"item_price_no_discount":5990,"discount_no_vat":-0,"discount_with_vat":-0,"discount_with_vat_total":-0,"discount_no_vat_total":-0,"unit_price_vat":7247.9,"unit_price_vat_no_discount":7247.9,"item_price_vat":7247.9,"item_price_vat_no_discount":7247.9,"item_price_vat_check":7247.9},{"id":"24637125","invoice_id":"7669612","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"Doprava","description":"","sku":null,"quantity":"1.00000","unit":"ks","unit_price":2025.16,"tax":21,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"1","hide_in_autocomplete":null,"unit_price_discount":2025.16,"item_price":2025.16,"item_price_no_discount":2025.16,"discount_no_vat":-0,"discount_with_vat":-0,"discount_with_vat_total":-0,"discount_no_vat_total":-0,"unit_price_vat":2450.4436,"unit_price_vat_no_discount":2450.4436,"item_price_vat":2450.44,"item_price_vat_no_discount":2450.44,"item_price_vat_check":2450.44},{"id":"24637126","invoice_id":"7669612","user_id":"39487","user_profile_id":"36761","stock_item_id":null,"name":"Zaokrouhlen\u00ed","description":"","sku":null,"quantity":"1.00000","unit":"","unit_price":-0.34,"tax":0,"tax_deposit":null,"discount":0,"discount_description":"","ordernum":"2","hide_in_autocomplete":null,"unit_price_discount":-0.34,"item_price":-0.34,"item_price_no_discount":-0.34,"discount_no_vat":0,"discount_with_vat":0,"discount_with_vat_total":0,"discount_no_vat_total":0,"unit_price_vat":-0.34,"unit_price_vat_no_discount":-0.34,"item_price_vat":-0.34,"item_price_vat_no_discount":-0.34,"item_price_vat_check":-0.34}],"Summary":{"vat_base_separate":{"21":8015.16,"0":-0.34},"vat_base_total":8014.82,"vat_separate":{"21":1683.18,"0":-0},"vat_total":1683.18,"invoice_total":9698,"discount":0},"SummaryInvoice":{"vat_base_separate_positive":{"21":8015.16,"0":-0.34},"vat_base_separate_negative":{"21":0,"0":0},"vat_separate_positive":{"21":1683.18,"0":-0},"vat_separate_negative":{"21":0,"0":0}},"UnitCount":{"ks":2},"Paypal":false,"RelatedItems":[],"Qr":{"qr":"SPD*1.0*ACC:CZ0420100000002601817728+FIOBCZPPXXX*AM:9698*CC:CZK*MSG:000009%252F2025%2B-%2BADMIN%2BESHOPU*X-VS:212*X-SS:7","qr_type":"QrPlatba","qr_url":"https:\/\/moje.superfaktura.cz\/tools\/qrCoder?key=d5565bf41eac42f5e8ebfa13f564e9d3&text=SPD%2A1.0%2AACC%3ACZ0420100000002601817728%2BFIOBCZPPXXX%2AAM%3A9698%2ACC%3ACZK%2AMSG%3A000009%25252F2025%252B-%252BADMIN%252BESHOPU%2AX-VS%3A212%2AX-SS%3A7&size=150"},"PaymentLink":""}}
END_RESPONSE
2025-04-14T14:59:32.519+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Final Invoice API call successful for order 212.
2025-04-14T14:59:32.519+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Constructed PDF download URL with token: https://moje.superfaktura.cz/invoices/pdf/7669612/token:b24e14cb
2025-04-14T14:59:32.519+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Parsed Final Invoice response for order 212: ID=7669612, Number=000009/2025, PDF URL=https://moje.superfaktura.cz/invoices/pdf/7669612/token:b24e14cb
2025-04-14T14:59:32.519+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-6] o.e.e.s.SuperFakturaInvoiceService       : Order 212 updated with Final Invoice details.
2025-04-14T14:59:32.546+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/7
2025-04-14T14:59:32.546+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:32.546+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:32.552+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 7
2025-04-14T14:59:32.552+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] org.example.eshop.service.OrderService   : Finding order by ID: 7
2025-04-14T14:59:32.561+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:59:32.561+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-8] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 7
2025-04-14T14:59:38.232+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/7/update-state
2025-04-14T14:59:38.232+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:38.232+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:38.233+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.a.controller.AdminOrderController  : Attempting to update state for order ID: 7 to state ID: 3
2025-04-14T14:59:38.238+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] org.example.eshop.service.OrderService   : Updating order 212 state from 'Nová' to 'Čeká na platbu'
2025-04-14T14:59:38.238+02:00 ERROR 29156 --- [Eshop] [task-13] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-13] Exception processing template "emails/order-status-awaiting-payment": Error resolving template [emails/order-status-awaiting-payment], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-awaiting-payment], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:59:38.243+02:00 ERROR 29156 --- [Eshop] [task-13] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'emails/order-status-awaiting-payment' for status update order 212: Error resolving template [emails/order-status-awaiting-payment], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-awaiting-payment], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:59:38.245+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-10] o.e.e.a.controller.AdminOrderController  : Successfully updated state for order ID: 7
2025-04-14T14:59:38.256+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/7
2025-04-14T14:59:38.258+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:38.258+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:38.258+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 7
2025-04-14T14:59:38.258+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] org.example.eshop.service.OrderService   : Finding order by ID: 7
2025-04-14T14:59:38.261+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:59:38.267+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-1] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 7
2025-04-14T14:59:39.371+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/7/mark-fully-paid
2025-04-14T14:59:39.371+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:39.371+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:39.371+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.controller.AdminOrderController  : Admin action: Attempting to mark order as fully paid for order ID: 7
2025-04-14T14:59:39.376+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] org.example.eshop.service.OrderService   : Calculating full amount for order 212: 9698.00
2025-04-14T14:59:39.376+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] org.example.eshop.service.OrderService   : Marking order 212 fully paid on 2025-04-14
2025-04-14T14:59:39.376+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] org.example.eshop.service.OrderService   : Attempting to mark final invoice SF ID 7669612 as paid in SuperFaktura (Amount: 9698.00, Date: 2025-04-14, Type: transfer) for order 212
2025-04-14T14:59:39.376+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : Attempting to mark invoice SF ID 7669612 as paid for order 212 via API. Amount: 9698.00, Date: 2025-04-14, Type: transfer
2025-04-14T14:59:39.385+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : Found currency 'CZK' for invoice SF ID 7669612 from order 212
2025-04-14T14:59:39.385+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : SF API Request Payload (Mark Invoice Paid - Order 212):
{
  "InvoicePayment" : {
    "date" : "2025-04-14",
    "payment_type" : "transfer",
    "amount" : 9698.00,
    "invoice_id" : 7669612,
    "currency" : "CZK"
  }
}
2025-04-14T14:59:39.385+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : Sending Mark Invoice Paid request to SF API: URL=https://moje.superfaktura.cz/invoice_payments/add/invoice_id:7669612.json, Method=POST
2025-04-14T14:59:39.550+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : Raw SF API Response Body for Mark Invoice Paid (Order 212): START
{"payment_id":"4939991","error":0,"invoice_id":7669612,"status":3,"paid":9698,"to_pay":0,"to_pay_home_cur":0,"currency":"K\u010d","home_currency":"K\u010d","exchange_rate":1,"country_exchange_rate":1,"invoice_type":"regular","parent_id":null,"overdue":false,"created":"2025-04-14","invoice_currency":"K\u010d","flash_message":{"text":"Platba byla ulo\u017eena","type":"success"}}
END_RESPONSE
2025-04-14T14:59:39.550+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : SF API call successful (2xx) for Mark Invoice Paid (Order 212). Response has no 'data' key.
2025-04-14T14:59:39.550+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.s.SuperFakturaInvoiceService       : Successfully requested marking invoice SF ID 7669612 as paid for order 212
2025-04-14T14:59:39.557+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] org.example.eshop.service.OrderService   : Successfully requested marking final invoice SF ID 7669612 as paid in SuperFaktura.
2025-04-14T14:59:39.573+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-9] o.e.e.a.controller.AdminOrderController  : Admin action: Order marked as fully paid for order ID: 7
2025-04-14T14:59:39.590+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/7
2025-04-14T14:59:39.590+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:39.590+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:39.590+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 7
2025-04-14T14:59:39.590+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] org.example.eshop.service.OrderService   : Finding order by ID: 7
2025-04-14T14:59:39.599+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:59:39.602+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-2] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 7
2025-04-14T14:59:44.599+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/7/update-state
2025-04-14T14:59:44.599+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:44.599+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:44.599+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.controller.AdminOrderController  : Attempting to update state for order ID: 7 to state ID: 5
2025-04-14T14:59:44.606+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] org.example.eshop.service.OrderService   : Updating order 212 state from 'Čeká na platbu' to 'Zaplaceno'
2025-04-14T14:59:44.614+02:00 ERROR 29156 --- [Eshop] [task-14] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-14] Exception processing template "emails/order-status-paid": Error resolving template [emails/order-status-paid], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-paid], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:59:44.615+02:00 ERROR 29156 --- [Eshop] [task-14] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'emails/order-status-paid' for status update order 212: Error resolving template [emails/order-status-paid], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-paid], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:59:44.632+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-7] o.e.e.a.controller.AdminOrderController  : Successfully updated state for order ID: 7
2025-04-14T14:59:44.643+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/7
2025-04-14T14:59:44.644+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:44.644+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:44.644+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 7
2025-04-14T14:59:44.644+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.OrderService   : Finding order by ID: 7
2025-04-14T14:59:44.652+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:59:44.654+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 7
2025-04-14T14:59:48.682+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/7/update-state
2025-04-14T14:59:48.682+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:48.682+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:48.682+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.a.controller.AdminOrderController  : Attempting to update state for order ID: 7 to state ID: 6
2025-04-14T14:59:48.682+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] org.example.eshop.service.OrderService   : Updating order 212 state from 'Zaplaceno' to 'Zpracovává se'
2025-04-14T14:59:48.691+02:00 DEBUG 29156 --- [Eshop] [task-15] org.example.eshop.service.EmailService   : Loading email config for state 'PROCESSING' from database.
2025-04-14T14:59:48.691+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-5] o.e.e.a.controller.AdminOrderController  : Successfully updated state for order ID: 7
2025-04-14T14:59:48.691+02:00 DEBUG 29156 --- [Eshop] [task-15] org.example.eshop.service.EmailService   : Loaded and cached email config for state 'PROCESSING'. SendEmail: true
2025-04-14T14:59:48.691+02:00 ERROR 29156 --- [Eshop] [task-15] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-15] Exception processing template "emails/order-status-processing": Error resolving template [emails/order-status-processing], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-processing], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:59:48.691+02:00 ERROR 29156 --- [Eshop] [task-15] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'emails/order-status-processing' for status update order 212: Error resolving template [emails/order-status-processing], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [emails/order-status-processing], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderStatusUpdateEmail(EmailService.java:120) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T14:59:48.698+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders/7
2025-04-14T14:59:48.698+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T14:59:48.698+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T14:59:48.707+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Requesting admin order detail view for ID: 7
2025-04-14T14:59:48.707+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] org.example.eshop.service.OrderService   : Finding order by ID: 7
2025-04-14T14:59:48.707+02:00 DEBUG 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T14:59:48.715+02:00  INFO 29156 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.controller.AdminOrderController  : Order detail loaded successfully for ID: 7
2025-04-14T15:00:54.161+02:00  INFO 29156 --- [Eshop] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-04-14T15:00:54.285+02:00  INFO 29156 --- [Eshop] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-04-14T15:00:54.335+02:00  INFO 29156 --- [Eshop] [SpringApplicationShutdownHook] o.e.e.service.GoogleMapsShippingService  : Shutting down Google Maps API context.
2025-04-14T15:00:54.350+02:00  INFO 29156 --- [Eshop] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T15:00:56.597+02:00  INFO 29156 --- [Eshop] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-14T15:00:56.734+02:00  INFO 29156 --- [Eshop] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-14T15:09:58.694+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Starting EshopApplication using Java 21.0.6 with PID 30760 (C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop\target\classes started by mirsv in C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop)
2025-04-14T15:09:58.704+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Running with Spring Boot v3.4.4, Spring v6.2.5
2025-04-14T15:09:58.708+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : No active profile set, falling back to 1 default profile: "default"
2025-04-14T15:09:59.688+02:00  INFO 30760 --- [Eshop] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-14T15:09:59.688+02:00  INFO 30760 --- [Eshop] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-14T15:10:03.792+02:00  INFO 30760 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-14T15:10:04.478+02:00  INFO 30760 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 653 ms. Found 14 JPA repository interfaces.
2025-04-14T15:10:08.409+02:00  INFO 30760 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-04-14T15:10:08.456+02:00  INFO 30760 --- [Eshop] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-04-14T15:10:08.456+02:00  INFO 30760 --- [Eshop] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-04-14T15:10:08.735+02:00  INFO 30760 --- [Eshop] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-04-14T15:10:08.740+02:00  INFO 30760 --- [Eshop] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 9048 ms
2025-04-14T15:10:10.276+02:00  INFO 30760 --- [Eshop] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-14T15:10:10.536+02:00  INFO 30760 --- [Eshop] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-04-14T15:10:10.624+02:00  INFO 30760 --- [Eshop] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-14T15:10:11.355+02:00  INFO 30760 --- [Eshop] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-14T15:10:11.450+02:00  INFO 30760 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-14T15:10:11.706+02:00  INFO 30760 --- [Eshop] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.mariadb.jdbc.Connection@520fe0c3
2025-04-14T15:10:11.710+02:00  INFO 30760 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-14T15:10:11.906+02:00  INFO 30760 --- [Eshop] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 11.7.2
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-04-14T15:10:16.562+02:00  INFO 30760 --- [Eshop] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-14T15:10:20.390+02:00  INFO 30760 --- [Eshop] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T15:10:22.050+02:00  INFO 30760 --- [Eshop] [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-14T15:10:23.103+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Initializing Google Maps API context...
2025-04-14T15:10:23.696+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Google Maps API context initialized successfully.
2025-04-14T15:10:23.698+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Origin coordinates set to: 50.03500389,15.49180022
2025-04-14T15:10:23.736+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Initializing order code counter...
2025-04-14T15:10:24.206+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : No existing numeric-like order codes found in database.
2025-04-14T15:10:24.207+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Order code counter initialized to: 205
2025-04-14T15:10:24.736+02:00  WARN 30760 --- [Eshop] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-14T15:10:25.308+02:00  INFO 30760 --- [Eshop] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-04-14T15:10:25.470+02:00  INFO 30760 --- [Eshop] [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-04-14T15:10:26.409+02:00  INFO 30760 --- [Eshop] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-04-14T15:10:27.540+02:00  INFO 30760 --- [Eshop] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-04-14T15:10:27.645+02:00  INFO 30760 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-04-14T15:10:27.673+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Started EshopApplication in 30.825 seconds (process running for 33.589)
2025-04-14T15:10:27.699+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Initializing test data...
2025-04-14T15:10:28.147+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Tax Rates...
2025-04-14T15:10:28.216+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Order States...
2025-04-14T15:10:28.238+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Email Template Configs...
2025-04-14T15:10:28.404+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik
2025-04-14T15:10:28.409+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik Plus
2025-04-14T15:10:28.412+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Simple
2025-04-14T15:10:28.420+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Box
2025-04-14T15:10:28.426+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Ořech
2025-04-14T15:10:28.428+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Palisandr
2025-04-14T15:10:28.436+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Bezbarvý lak
2025-04-14T15:10:28.436+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Šedá lazura
2025-04-14T15:10:28.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Antracit
2025-04-14T15:10:28.453+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak
2025-04-14T15:10:28.456+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak Premium
2025-04-14T15:10:28.464+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Antracit
2025-04-14T15:10:28.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Červená
2025-04-14T15:10:28.476+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Zelená
2025-04-14T15:10:28.480+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná
2025-04-14T15:10:28.486+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná metalická
2025-04-14T15:10:28.900+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Polička navíc
2025-04-14T15:10:28.916+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Držák na nářadí
2025-04-14T15:10:28.932+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Starý doplněk
2025-04-14T15:10:28.966+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Klasik
2025-04-14T15:10:29.038+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Modern
2025-04-14T15:10:29.050+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník na míru
2025-04-14T15:10:29.056+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating new configurator for product ID: 3
2025-04-14T15:10:29.056+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Updating existing configurator for product ID: 3
2025-04-14T15:10:29.356+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating admin user: admin@example.com
2025-04-14T15:10:29.366+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating test orders...
2025-04-14T15:10:29.366+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T15:10:29.372+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T15:10:29.372+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T15:10:29.399+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T15:10:29.399+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T15:10:29.399+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T15:10:29.401+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T15:10:29.402+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T15:10:29.403+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T15:10:29.403+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 1
2025-04-14T15:10:29.403+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 1
2025-04-14T15:10:29.409+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T15:10:29.409+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 1)
2025-04-14T15:10:29.412+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Klasik | Lazura: Ořech | Střecha: Antracit
2025-04-14T15:10:29.412+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 5990.00
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 5990.00
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 5990.00
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 1257.90
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 7247.90
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=5990.00, TotalTaxAmount=1257.90, TotalPriceWithTax=7247.90
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=5990.00, TaxAmount=1257.90
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 5990.00, Running Item Tax: 1257.90
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 5990.00, Final Item Tax: 1257.90
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=6490.00, TotalTax=1362.90, OriginalTotalWithTax=7852.90, RoundedTotalToSave=7852
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=6490.00, TotalTax=1362.90, OriginalTotalWithTax=7852.90, RoundedTotalToSave=7852
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T15:10:29.421+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 206
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 206
2025-04-14T15:10:29.421+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T15:10:29.437+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 206 created successfully. Total: 7852 CZK
2025-04-14T15:10:29.437+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 206...
2025-04-14T15:10:29.437+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 206 (Total: 7852 CZK)
2025-04-14T15:10:29.437+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in EUR
2025-04-14T15:10:29.437+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: EUR
2025-04-14T15:10:29.437+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: EUR
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: EUR
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: EUR
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 3
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 3
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 3)
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Na míru|Rozměry (DxHxV): 350x120x210 cm|Příčka: Ano
2025-04-14T15:10:29.446+02:00  INFO 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: EUR
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (EUR): 1623.60
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (EUR): 0.00
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for divider (EUR): 62.40
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (EUR, fixed): 0.00
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (EUR, fixed): 0.00
2025-04-14T15:10:29.446+02:00  INFO 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: EUR. Vypočtená cena: 1686.00
2025-04-14T15:10:29.446+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 1686.00
2025-04-14T15:10:29.454+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 1686.00
2025-04-14T15:10:29.454+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing addons for OrderItem (Product ID: 3), Currency: EUR
2025-04-14T15:10:29.456+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Requested addon IDs: [1, 2]
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Found addons from DB: [1, 2]
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Allowed addon IDs for this product: [1, 2]
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=1, Name=Polička navíc
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (EUR): 15.00
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (EUR): 30.00
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=2, Name=Držák na nářadí
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (EUR): 20.00
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (EUR): 20.00
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished processing addons. Total addon price (EUR): 50.00
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 50.00
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 1736.00
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 364.56
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 2100.56
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=1736.00, TotalTaxAmount=364.56, TotalPriceWithTax=2100.56
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=1736.00, TaxAmount=364.56
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 1736.00, Running Item Tax: 364.56
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 1736.00, Final Item Tax: 364.56
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: EUR
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 25.00, Tax: 5.25, Estimated Rate: 0.2100
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: EUR
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=1761.00, TotalTax=369.81, OriginalTotalWithTax=2130.81, RoundedTotalToSave=2130
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=1761.00, TotalTax=369.81, OriginalTotalWithTax=2130.81, RoundedTotalToSave=2130
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: EUR
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null contains custom product. Calculating potential deposit.
2025-04-14T15:10:29.470+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 2130 is 1065.00
2025-04-14T15:10:29.472+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 1000
2025-04-14T15:10:29.472+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 1000.00
2025-04-14T15:10:29.472+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Deposit required for order null. Status set to AWAITING_DEPOSIT.
2025-04-14T15:10:29.472+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 2130 is 1065.00
2025-04-14T15:10:29.472+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 1000
2025-04-14T15:10:29.472+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 1000.00
2025-04-14T15:10:29.472+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Deposit amount 1000.00 EUR calculated for custom order (new).
2025-04-14T15:10:29.472+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: AWAITING_DEPOSIT, Deposit Amount: 1000.00
2025-04-14T15:10:29.472+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 207
2025-04-14T15:10:29.472+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 207
2025-04-14T15:10:29.472+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T15:10:29.479+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 207 created successfully. Total: 2130 EUR
2025-04-14T15:10:29.479+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 207...
2025-04-14T15:10:29.479+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 11] Triggering proforma invoice generation for order 207. Currency: EUR
2025-04-14T15:10:29.498+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Non-critical error generating proforma invoice for order 207: Order not found: 2. Order creation continues.

jakarta.persistence.EntityNotFoundException: Order not found: 2
	at org.example.eshop.service.SuperFakturaInvoiceService.lambda$reloadOrder$2(SuperFakturaInvoiceService.java:351) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.reloadOrder(SuperFakturaInvoiceService.java:351) ~[classes/:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.generateProformaInvoice(SuperFakturaInvoiceService.java:76) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$1.generateProformaInvoice(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$0.generateProformaInvoice(<generated>) ~[classes/:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:362) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:191) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T15:10:29.503+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 207 (Total: 2130 EUR)
2025-04-14T15:10:29.504+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer admin@example.com with 1 items in CZK
2025-04-14T15:10:29.504+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 2 with explicit currency: CZK
2025-04-14T15:10:29.504+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T15:10:29.507+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T15:10:29.507+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 2 to order.
2025-04-14T15:10:29.507+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Admin Eshopu
2025-04-14T15:10:29.507+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T15:10:29.507+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T15:10:29.507+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T15:10:29.507+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 2
2025-04-14T15:10:29.507+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 2
2025-04-14T15:10:29.509+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 500.00
2025-04-14T15:10:29.509+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 2)
2025-04-14T15:10:29.509+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Modern Simple | Lazura: Teak Premium | Střecha: Stříbrná metalická
2025-04-14T15:10:29.509+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 7490.00
2025-04-14T15:10:29.512+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 7490.00
2025-04-14T15:10:29.512+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T15:10:29.512+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 7990.00
2025-04-14T15:10:29.512+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 1677.90
2025-04-14T15:10:29.512+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 9667.90
2025-04-14T15:10:29.512+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=15980.00, TotalTaxAmount=3355.80, TotalPriceWithTax=19335.80
2025-04-14T15:10:29.512+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=15980.00, TaxAmount=3355.80
2025-04-14T15:10:29.512+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 15980.00, Running Item Tax: 3355.80
2025-04-14T15:10:29.512+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 15980.00, Final Item Tax: 3355.80
2025-04-14T15:10:29.512+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T15:10:29.512+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T15:10:29.513+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T15:10:29.513+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=16480.00, TotalTax=3460.80, OriginalTotalWithTax=19940.80, RoundedTotalToSave=19940
2025-04-14T15:10:29.513+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=16480.00, TotalTax=3460.80, OriginalTotalWithTax=19940.80, RoundedTotalToSave=19940
2025-04-14T15:10:29.513+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T15:10:29.513+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T15:10:29.513+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T15:10:29.513+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T15:10:29.513+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T15:10:29.513+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 208
2025-04-14T15:10:29.513+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 208
2025-04-14T15:10:29.513+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T15:10:29.516+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 208 created successfully. Total: 19940 CZK
2025-04-14T15:10:29.517+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 208...
2025-04-14T15:10:29.519+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 208 (Total: 19940 CZK)
2025-04-14T15:10:29.519+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updating order 208 to PAID and state PROCESSING (SF API calls might be triggered if active)
2025-04-14T15:10:29.527+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updated order 208 to PAID and state PROCESSING (bypassed SF calls)
2025-04-14T15:10:29.527+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T15:10:29.528+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T15:10:29.528+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T15:10:29.534+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T15:10:29.534+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T15:10:29.534+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T15:10:29.534+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T15:10:29.534+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T15:10:29.534+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T15:10:29.535+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 3
2025-04-14T15:10:29.535+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 3
2025-04-14T15:10:29.535+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T15:10:29.535+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 3)
2025-04-14T15:10:29.535+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Na míru|Rozměry (DxHxV): 280x90x195 cm|Okap: Ano
2025-04-14T15:10:29.535+02:00  INFO 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Vstupuji do calculateDynamicProductPrice. Product ID: 3, Currency: CZK
2025-04-14T15:10:29.535+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price from dimensions (CZK): 32700.00
2025-04-14T15:10:29.535+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for design 'null' (CZK): 0.00
2025-04-14T15:10:29.535+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for divider (CZK): 0.00
2025-04-14T15:10:29.535+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for gutter (CZK, fixed): 1000.00
2025-04-14T15:10:29.535+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : [ProductService] Price for garden shed (CZK, fixed): 0.00
2025-04-14T15:10:29.535+02:00  INFO 30760 --- [Eshop] [restartedMain] o.example.eshop.service.ProductService   : >>> [ProductService] Opouštím calculateDynamicProductPrice. Product ID: 3, Currency: CZK. Vypočtená cena: 33700.00
2025-04-14T15:10:29.535+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 33700.00
2025-04-14T15:10:29.538+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 33700.00
2025-04-14T15:10:29.538+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing addons for OrderItem (Product ID: 3), Currency: CZK
2025-04-14T15:10:29.538+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Requested addon IDs: [1]
2025-04-14T15:10:29.542+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Found addons from DB: [1]
2025-04-14T15:10:29.542+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Allowed addon IDs for this product: [1, 2]
2025-04-14T15:10:29.542+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing valid addon: ID=1, Name=Polička navíc
2025-04-14T15:10:29.542+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon unit price (CZK): 350.00
2025-04-14T15:10:29.542+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Addon line total price (CZK): 350.00
2025-04-14T15:10:29.542+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished processing addons. Total addon price (CZK): 350.00
2025-04-14T15:10:29.542+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 350.00
2025-04-14T15:10:29.542+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 34050.00
2025-04-14T15:10:29.542+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 7150.50
2025-04-14T15:10:29.543+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 41200.50
2025-04-14T15:10:29.543+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=34050.00, TotalTaxAmount=7150.50, TotalPriceWithTax=41200.50
2025-04-14T15:10:29.543+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=34050.00, TaxAmount=7150.50
2025-04-14T15:10:29.543+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 34050.00, Running Item Tax: 7150.50
2025-04-14T15:10:29.543+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 34050.00, Final Item Tax: 7150.50
2025-04-14T15:10:29.543+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T15:10:29.543+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T15:10:29.544+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T15:10:29.544+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=34550.00, TotalTax=7255.50, OriginalTotalWithTax=41805.50, RoundedTotalToSave=41805
2025-04-14T15:10:29.544+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=34550.00, TotalTax=7255.50, OriginalTotalWithTax=41805.50, RoundedTotalToSave=41805
2025-04-14T15:10:29.544+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T15:10:29.544+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null contains custom product. Calculating potential deposit.
2025-04-14T15:10:29.544+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 41805 is 20902.50
2025-04-14T15:10:29.544+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 20000
2025-04-14T15:10:29.544+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 20000.00
2025-04-14T15:10:29.544+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Deposit required for order null. Status set to AWAITING_DEPOSIT.
2025-04-14T15:10:29.544+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: 50% of 41805 is 20902.50
2025-04-14T15:10:29.544+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Rounded down to nearest thousand: 20000
2025-04-14T15:10:29.544+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : CalculateDeposit: Final deposit amount calculated: 20000.00
2025-04-14T15:10:29.544+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Deposit amount 20000.00 CZK calculated for custom order (new).
2025-04-14T15:10:29.544+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: AWAITING_DEPOSIT, Deposit Amount: 20000.00
2025-04-14T15:10:29.544+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 209
2025-04-14T15:10:29.544+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 209
2025-04-14T15:10:29.544+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T15:10:29.550+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order 209 created successfully. Total: 41805 CZK
2025-04-14T15:10:29.550+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 10] Sending confirmation email for order 209...
2025-04-14T15:10:29.551+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 11] Triggering proforma invoice generation for order 209. Currency: CZK
2025-04-14T15:10:29.555+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Non-critical error generating proforma invoice for order 209: Order not found: 4. Order creation continues.

jakarta.persistence.EntityNotFoundException: Order not found: 4
	at org.example.eshop.service.SuperFakturaInvoiceService.lambda$reloadOrder$2(SuperFakturaInvoiceService.java:351) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.reloadOrder(SuperFakturaInvoiceService.java:351) ~[classes/:na]
	at org.example.eshop.service.SuperFakturaInvoiceService.generateProformaInvoice(SuperFakturaInvoiceService.java:76) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$1.generateProformaInvoice(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.SuperFakturaInvoiceService$$SpringCGLIB$$0.generateProformaInvoice(<generated>) ~[classes/:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:362) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:236) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T15:10:29.556+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Successfully initiated test order creation via OrderService: 209 (Total: 41805 CZK)
2025-04-14T15:10:29.556+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updating order 209 to DEPOSIT_PAID and state IN_PRODUCTION (SF API calls might be triggered if active)
2025-04-14T15:10:29.557+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Manually updated order 209 to DEPOSIT_PAID and state IN_PRODUCTION (bypassed SF calls)
2025-04-14T15:10:29.558+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Test data initialization finished successfully.
2025-04-14T15:10:29.699+02:00 ERROR 30760 --- [Eshop] [task-2] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-2] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T15:10:29.700+02:00 ERROR 30760 --- [Eshop] [task-3] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-3] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T15:10:29.700+02:00 ERROR 30760 --- [Eshop] [task-1] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-1] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T15:10:29.699+02:00 ERROR 30760 --- [Eshop] [task-4] org.thymeleaf.TemplateEngine             : [THYMELEAF][task-4] Exception processing template "order-confirmation": Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T15:10:29.704+02:00 ERROR 30760 --- [Eshop] [task-2] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 207: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T15:10:29.704+02:00 ERROR 30760 --- [Eshop] [task-3] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 208: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T15:10:29.704+02:00 ERROR 30760 --- [Eshop] [task-1] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 206: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T15:10:29.706+02:00 ERROR 30760 --- [Eshop] [task-4] org.example.eshop.service.EmailService   : Failed to process Thymeleaf template 'order-confirmation' for order confirmation 209: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [order-confirmation], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1064) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1053) ~[thymeleaf-3.1.3.RELEASE.jar:3.1.3.RELEASE]
	at org.example.eshop.service.EmailService.sendOrderConfirmationEmail(EmailService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.5.jar:6.2.5]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-04-14T15:10:30.318+02:00  INFO 30760 --- [Eshop] [RMI TCP Connection(4)-192.168.1.157] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-14T15:10:30.318+02:00  INFO 30760 --- [Eshop] [RMI TCP Connection(4)-192.168.1.157] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-04-14T15:10:30.318+02:00  INFO 30760 --- [Eshop] [RMI TCP Connection(4)-192.168.1.157] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-04-14T15:11:10.691+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /
2025-04-14T15:11:10.693+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T15:11:10.694+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-1] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T15:11:10.695+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-1] o.e.eshop.controller.HomeController      : Accessing home page
2025-04-14T15:11:16.521+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/orders
2025-04-14T15:11:16.523+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T15:11:16.523+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-3] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T15:11:16.538+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : Requesting admin order list view. Filters: stateId=null, paymentStatus=, customerEmail=, dateFrom=null, dateTo=null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T15:11:16.546+02:00 DEBUG 30760 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.OrderService   : OrderService.findOrders called with filters - Email: 'N/A', StateID: null, PaymentStatus: 'N/A', From: null, To: null. Pageable: Page request [number: 0, size 20, sort: orderDate: DESC]
2025-04-14T15:11:16.576+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-3] org.example.eshop.service.OrderService   : Found 4 orders matching criteria using specifications.
2025-04-14T15:11:16.580+02:00 DEBUG 30760 --- [Eshop] [http-nio-8080-exec-3] o.e.eshop.service.OrderStateService      : Fetching all order states sorted by displayOrder
2025-04-14T15:11:16.586+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-3] o.e.e.a.controller.AdminOrderController  : [AdminOrderController.listOrders] Service returned page: Number=0, Elements=4, TotalElements=4
2025-04-14T15:11:20.013+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/tax-rates
2025-04-14T15:11:20.013+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T15:11:20.013+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-5] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T15:11:20.016+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-5] o.e.e.a.c.AdminTaxRateController         : Requesting tax rate list view.
2025-04-14T15:11:20.020+02:00 DEBUG 30760 --- [Eshop] [http-nio-8080-exec-5] o.example.eshop.service.TaxRateService   : Fetching all tax rates
2025-04-14T15:11:23.945+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Vstupuji do addGlobalCurrencyToModel pro request: /admin/tax-rates/1/edit
2025-04-14T15:11:23.945+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : [GlobalModelAttributeAdvice] Získána měna ze CurrencyService: CZK
2025-04-14T15:11:23.945+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-4] o.e.e.advice.GlobalModelAttributeAdvice  : >>> [GlobalModelAttributeAdvice] Opouštím addGlobalCurrencyToModel. Vracím měnu: CZK
2025-04-14T15:11:23.947+02:00  INFO 30760 --- [Eshop] [http-nio-8080-exec-4] o.e.e.a.c.AdminTaxRateController         : Requesting edit form for tax rate ID: 1
2025-04-14T15:11:23.947+02:00 DEBUG 30760 --- [Eshop] [http-nio-8080-exec-4] o.example.eshop.service.TaxRateService   : Fetching tax rate by ID: 1
2025-04-14T15:11:31.038+02:00  WARN 30760 --- [Eshop] [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin.]
2025-04-14T15:13:22.248+02:00  INFO 30760 --- [Eshop] [File Watcher] rtingClassPathChangeChangedEventListener : Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-04-14T15:13:22.273+02:00  INFO 30760 --- [Eshop] [Thread-6] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-04-14T15:13:22.310+02:00  INFO 30760 --- [Eshop] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-04-14T15:13:22.340+02:00  INFO 30760 --- [Eshop] [Thread-6] o.e.e.service.GoogleMapsShippingService  : Shutting down Google Maps API context.
2025-04-14T15:13:22.353+02:00  INFO 30760 --- [Eshop] [Thread-6] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T15:13:24.001+02:00  INFO 30760 --- [Eshop] [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-14T15:13:24.054+02:00  INFO 30760 --- [Eshop] [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-14T15:13:24.507+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Starting EshopApplication using Java 21.0.6 with PID 30760 (C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop\target\classes started by mirsv in C:\Users\mirsv\Desktop\Dřevníky Kolář\Eshop)
2025-04-14T15:13:24.508+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Running with Spring Boot v3.4.4, Spring v6.2.5
2025-04-14T15:13:24.509+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : No active profile set, falling back to 1 default profile: "default"
2025-04-14T15:13:26.043+02:00  INFO 30760 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-14T15:13:26.198+02:00  INFO 30760 --- [Eshop] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 153 ms. Found 14 JPA repository interfaces.
2025-04-14T15:13:26.819+02:00  INFO 30760 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-04-14T15:13:26.823+02:00  INFO 30760 --- [Eshop] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-04-14T15:13:26.823+02:00  INFO 30760 --- [Eshop] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-04-14T15:13:26.902+02:00  INFO 30760 --- [Eshop] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-04-14T15:13:26.903+02:00  INFO 30760 --- [Eshop] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2373 ms
2025-04-14T15:13:27.650+02:00  INFO 30760 --- [Eshop] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-14T15:13:27.671+02:00  INFO 30760 --- [Eshop] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-14T15:13:27.777+02:00  INFO 30760 --- [Eshop] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-14T15:13:27.785+02:00  INFO 30760 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-04-14T15:13:27.808+02:00  INFO 30760 --- [Eshop] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection org.mariadb.jdbc.Connection@30c53d2d
2025-04-14T15:13:27.808+02:00  INFO 30760 --- [Eshop] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-04-14T15:13:27.816+02:00  INFO 30760 --- [Eshop] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 11.7.2
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-04-14T15:13:30.775+02:00  INFO 30760 --- [Eshop] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-14T15:13:34.466+02:00  INFO 30760 --- [Eshop] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T15:13:34.976+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Initializing Google Maps API context...
2025-04-14T15:13:34.977+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Google Maps API context initialized successfully.
2025-04-14T15:13:34.978+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.e.service.GoogleMapsShippingService  : Origin coordinates set to: 50.03500389,15.49180022
2025-04-14T15:13:34.988+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Initializing order code counter...
2025-04-14T15:13:35.038+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : No existing numeric-like order codes found in database.
2025-04-14T15:13:35.038+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Order code counter initialized to: 205
2025-04-14T15:13:35.247+02:00  WARN 30760 --- [Eshop] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-14T15:13:35.516+02:00  INFO 30760 --- [Eshop] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-04-14T15:13:35.535+02:00  INFO 30760 --- [Eshop] [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-04-14T15:13:35.890+02:00  INFO 30760 --- [Eshop] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-04-14T15:13:36.663+02:00  INFO 30760 --- [Eshop] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-04-14T15:13:36.727+02:00  INFO 30760 --- [Eshop] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-04-14T15:13:36.739+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.EshopApplication       : Started EshopApplication in 12.431 seconds (process running for 222.655)
2025-04-14T15:13:36.742+02:00  INFO 30760 --- [Eshop] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-04-14T15:13:36.745+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Initializing test data...
2025-04-14T15:13:36.756+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Tax Rates...
2025-04-14T15:13:36.760+02:00  INFO 30760 --- [Eshop] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-04-14T15:13:36.767+02:00  INFO 30760 --- [Eshop] [SpringApplicationShutdownHook] o.e.e.service.GoogleMapsShippingService  : Shutting down Google Maps API context.
2025-04-14T15:13:36.770+02:00  INFO 30760 --- [Eshop] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-14T15:13:36.828+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Order States...
2025-04-14T15:13:36.878+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating default Email Template Configs...
2025-04-14T15:13:37.044+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik
2025-04-14T15:13:37.058+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Klasik Plus
2025-04-14T15:13:37.066+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Simple
2025-04-14T15:13:37.075+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Design: Modern Box
2025-04-14T15:13:37.099+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Ořech
2025-04-14T15:13:37.109+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Palisandr
2025-04-14T15:13:37.119+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Bezbarvý lak
2025-04-14T15:13:37.127+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Šedá lazura
2025-04-14T15:13:37.137+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Antracit
2025-04-14T15:13:37.147+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak
2025-04-14T15:13:37.154+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Glaze: Teak Premium
2025-04-14T15:13:37.165+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Antracit
2025-04-14T15:13:37.177+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Červená
2025-04-14T15:13:37.187+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Zelená
2025-04-14T15:13:37.195+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná
2025-04-14T15:13:37.204+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating RoofColor: Stříbrná metalická
2025-04-14T15:13:37.217+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Polička navíc
2025-04-14T15:13:37.226+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Držák na nářadí
2025-04-14T15:13:37.241+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Addon: Starý doplněk
2025-04-14T15:13:37.258+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Klasik
2025-04-14T15:13:37.284+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník Modern
2025-04-14T15:13:37.297+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating Product: Dřevník na míru
2025-04-14T15:13:37.301+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating new configurator for product ID: 3
2025-04-14T15:13:37.302+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Updating existing configurator for product ID: 3
2025-04-14T15:13:37.759+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating admin user: admin@example.com
2025-04-14T15:13:37.773+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Creating test orders...
2025-04-14T15:13:37.774+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T15:13:37.775+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T15:13:37.776+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T15:13:37.783+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 2] Initializing Order object for currency: CZK
2025-04-14T15:13:37.784+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Copying addresses for customer ID: 1 to order.
2025-04-14T15:13:37.784+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Invoice recipient is person: Test Uživatel
2025-04-14T15:13:37.784+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Delivery address is same as invoice. Copying invoice address details AND customer contact name/phone.
2025-04-14T15:13:37.784+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Address copy for order (new) completed successfully.
2025-04-14T15:13:37.784+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 3] Processing order items for currency: CZK
2025-04-14T15:13:37.784+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processing item with Product ID: 1
2025-04-14T15:13:37.784+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Starting processCartItem for Product ID: 1
2025-04-14T15:13:37.789+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Surcharge calculated: 0
2025-04-14T15:13:37.790+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Saving historical data for OrderItem (Product ID: 1)
2025-04-14T15:13:37.790+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished saving historical data for OrderItem. VariantInfo: Design: Klasik | Lazura: Ořech | Střecha: Antracit
2025-04-14T15:13:37.790+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Base Unit Price (No Tax, Raw): 5990.00
2025-04-14T15:13:37.798+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price After Discount: 5990.00
2025-04-14T15:13:37.798+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Total Fixed Addons Price: 0
2025-04-14T15:13:37.798+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Unit Price (No Tax): 5990.00
2025-04-14T15:13:37.798+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Tax Amount: 1257.90
2025-04-14T15:13:37.798+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Unit Price With Tax: 7247.90
2025-04-14T15:13:37.799+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Calculated Totals: TotalPriceWithoutTax=5990.00, TotalTaxAmount=1257.90, TotalPriceWithTax=7247.90
2025-04-14T15:13:37.799+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final OrderItem state before return: PriceNoTax=5990.00, TaxAmount=1257.90
2025-04-14T15:13:37.799+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Processed item successfully. Running Subtotal: 5990.00, Running Item Tax: 1257.90
2025-04-14T15:13:37.799+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Finished items processing. Final Subtotal: 5990.00, Final Item Tax: 1257.90
2025-04-14T15:13:37.799+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 5] Calculating shipping cost (no free shipping coupon). Currency: CZK
2025-04-14T15:13:37.799+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Using shipping costs from request. CostNoTax: 500.00, Tax: 105.00, Estimated Rate: 0.2100
2025-04-14T15:13:37.799+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 6] Calculating final totals for currency: CZK
2025-04-14T15:13:37.799+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=6490.00, TotalTax=1362.90, OriginalTotalWithTax=7852.90, RoundedTotalToSave=7852
2025-04-14T15:13:37.799+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final totals calculated: TotalNoTax=6490.00, TotalTax=1362.90, OriginalTotalWithTax=7852.90, RoundedTotalToSave=7852
2025-04-14T15:13:37.799+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 7] Determining payment status/deposit for currency: CZK
2025-04-14T15:13:37.799+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Order null does not contain custom product. Proceeding based on payment method.
2025-04-14T15:13:37.799+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Determining status for payment method: BANK_TRANSFER
2025-04-14T15:13:37.799+02:00  INFO 30760 --- [Eshop] [restartedMain] o.e.eshop.service.DummyPaymentService    : DetermineInitialPaymentStatus: Status for BANK_TRANSFER set to PENDING_PAYMENT for order null.
2025-04-14T15:13:37.799+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Final Payment status: PENDING_PAYMENT, Deposit Amount: null
2025-04-14T15:13:37.800+02:00 DEBUG 30760 --- [Eshop] [restartedMain] o.e.e.service.OrderCodeGeneratorService  : Generated next order code: 206
2025-04-14T15:13:37.800+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Generated Order Code: 206
2025-04-14T15:13:37.800+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 8] Saving order...
2025-04-14T15:13:37.822+02:00  WARN 30760 --- [Eshop] [restartedMain] o.m.jdbc.message.server.ErrorPacket      : Error: 1213-40001: Deadlock found when trying to get lock; try restarting transaction
2025-04-14T15:13:37.825+02:00  WARN 30760 --- [Eshop] [restartedMain] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1213, SQLState: 40001
2025-04-14T15:13:37.825+02:00 ERROR 30760 --- [Eshop] [restartedMain] o.h.engine.jdbc.spi.SqlExceptionHelper   : (conn=43) Deadlock found when trying to get lock; try restarting transaction
2025-04-14T15:13:37.836+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : !!! CRITICAL ERROR during order save for potential order code 206: could not execute statement [(conn=43) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]

org.springframework.dao.CannotAcquireLockException: could not execute statement [(conn=43) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:283) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy237.save(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:331) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:173) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]
Caused by: org.hibernate.exception.LockAcquisitionException: could not execute statement [(conn=43) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1260) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320) ~[spring-orm-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy233.persist(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:636) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:731) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	... 52 common frames omitted
Caused by: java.sql.SQLTransactionRollbackException: (conn=43) Deadlock found when trying to get lock; try restarting transaction
	at org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:303) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:378) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:189) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:1235) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:1174) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:1093) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.execute(StandardClient.java:1017) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:101) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:313) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:290) ~[mariadb-java-client-3.4.1.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	... 98 common frames omitted

2025-04-14T15:13:37.847+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : !!! ORDER CREATION FAILED for customer ID 1 / Order Code 206. Error message: Failed to save order: could not execute statement [(conn=43) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)] !!!
2025-04-14T15:13:37.848+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order Creation Exception Stack Trace:

java.lang.RuntimeException: Failed to save order: could not execute statement [(conn=43) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:336) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:173) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]
Caused by: org.springframework.dao.CannotAcquireLockException: could not execute statement [(conn=43) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:283) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy237.save(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:331) ~[classes/:na]
	... 46 common frames omitted
Caused by: org.hibernate.exception.LockAcquisitionException: could not execute statement [(conn=43) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1260) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320) ~[spring-orm-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy233.persist(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:636) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:731) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	... 52 common frames omitted
Caused by: java.sql.SQLTransactionRollbackException: (conn=43) Deadlock found when trying to get lock; try restarting transaction
	at org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:303) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:378) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:189) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:1235) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:1174) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:1093) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.execute(StandardClient.java:1017) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:101) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:313) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:290) ~[mariadb-java-client-3.4.1.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	... 98 common frames omitted

2025-04-14T15:13:37.855+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Failed to create test order via OrderService for customer test@example.com (Items: [1]): Failed to save order: could not execute statement [(conn=43) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]

java.lang.RuntimeException: Failed to save order: could not execute statement [(conn=43) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:336) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:173) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]
Caused by: org.springframework.dao.CannotAcquireLockException: could not execute statement [(conn=43) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:283) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560) ~[spring-orm-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy237.save(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:331) ~[classes/:na]
	... 46 common frames omitted
Caused by: org.hibernate.exception.LockAcquisitionException: could not execute statement [(conn=43) Deadlock found when trying to get lock; try restarting transaction] [insert into customer_orders (applied_coupon_id,applied_coupon_code,cancelled_date,coupon_discount_amount,currency,customer_id,delivered_date,delivery_city,delivery_company_name,delivery_country,delivery_first_name,delivery_last_name,delivery_phone,delivery_street,delivery_zip_code,deposit_amount,deposit_paid_date,final_invoice_generated,final_invoice_number,invoice_city,invoice_company_name,invoice_country,invoice_first_name,invoice_last_name,invoice_street,invoice_tax_id,invoice_vat_id,invoice_zip_code,note,order_code,order_date,original_total_price,payment_date,payment_method,payment_status,proforma_invoice_number,sf_final_invoice_id,sf_final_invoice_pdf_url,sf_proforma_invoice_id,sf_proforma_pdf_url,sf_tax_document_id,sf_tax_document_pdf_url,shipped_date,shipping_cost_without_tax,shipping_tax,shipping_tax_rate,order_state_id,sub_total_without_tax,tax_document_number,total_items_tax,total_price,total_price_without_tax,total_tax) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1260) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320) ~[spring-orm-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy233.persist(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:636) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:731) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	... 52 common frames omitted
Caused by: java.sql.SQLTransactionRollbackException: (conn=43) Deadlock found when trying to get lock; try restarting transaction
	at org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:303) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:378) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:189) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:1235) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:1174) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:1093) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.client.impl.StandardClient.execute(StandardClient.java:1017) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:101) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:313) ~[mariadb-java-client-3.4.1.jar:na]
	at org.mariadb.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:290) ~[mariadb-java-client-3.4.1.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	... 98 common frames omitted

2025-04-14T15:13:37.860+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in EUR
2025-04-14T15:13:37.860+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: EUR
2025-04-14T15:13:37.860+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: EUR
2025-04-14T15:13:37.871+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
2025-04-14T15:13:37.872+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : !!! ORDER CREATION FAILED for customer ID 1 / Order Code (new). Error message: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs) !!!
2025-04-14T15:13:37.872+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order Creation Exception Stack Trace:

org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:86) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:182) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:141) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:269) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:90) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1379) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:145) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy239.findByCodeIgnoreCase(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:84) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:191) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T15:13:37.876+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Failed to create test order via OrderService for customer test@example.com (Items: [3]): null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)

org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:86) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:182) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:141) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:269) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:90) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1379) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:145) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy239.findByCodeIgnoreCase(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:84) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:191) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T15:13:37.878+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer admin@example.com with 1 items in CZK
2025-04-14T15:13:37.879+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 2 with explicit currency: CZK
2025-04-14T15:13:37.879+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T15:13:37.883+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
2025-04-14T15:13:37.883+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : !!! ORDER CREATION FAILED for customer ID 2 / Order Code (new). Error message: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs) !!!
2025-04-14T15:13:37.883+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order Creation Exception Stack Trace:

org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:86) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:182) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:141) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:269) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:90) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1379) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:145) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy239.findByCodeIgnoreCase(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:84) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:202) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T15:13:37.886+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Failed to create test order via OrderService for customer admin@example.com (Items: [2]): null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)

org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:86) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:182) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:141) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:269) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:90) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1379) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:145) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy239.findByCodeIgnoreCase(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:84) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:202) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T15:13:37.889+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Attempting to create test order via OrderService for customer test@example.com with 1 items in CZK
2025-04-14T15:13:37.889+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Attempting to create order for customer ID: 1 with explicit currency: CZK
2025-04-14T15:13:37.889+02:00 DEBUG 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : [Order Creation - Step 1] Validating request and loading entities for currency: CZK
2025-04-14T15:13:37.894+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
2025-04-14T15:13:37.894+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : !!! ORDER CREATION FAILED for customer ID 1 / Order Code (new). Error message: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs) !!!
2025-04-14T15:13:37.894+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.service.OrderService   : Order Creation Exception Stack Trace:

org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:86) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:182) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:141) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:269) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:90) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1379) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:145) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy239.findByCodeIgnoreCase(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:84) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:236) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T15:13:37.897+02:00 ERROR 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Failed to create test order via OrderService for customer test@example.com (Items: [3]): null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)

org.hibernate.AssertionFailure: null id in org.example.eshop.model.Order entry (don't flush the Session after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:86) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:182) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:141) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:269) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:90) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1379) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:145) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275) ~[hibernate-core-6.6.11.Final.jar:6.6.11.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136) ~[spring-data-jpa-3.4.4.jar:3.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.5.jar:6.2.5]
	at jdk.proxy5/jdk.proxy5.$Proxy239.findByCodeIgnoreCase(Unknown Source) ~[na:na]
	at org.example.eshop.service.OrderService.createOrder(OrderService.java:84) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createTestOrder(DataInitializer.java:287) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.createSampleOrders(DataInitializer.java:236) ~[classes/:na]
	at org.example.eshop.init.DataInitializer.run(DataInitializer.java:145) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T15:13:37.899+02:00  INFO 30760 --- [Eshop] [restartedMain] org.example.eshop.init.DataInitializer   : Test data initialization finished successfully.
2025-04-14T15:13:37.904+02:00  INFO 30760 --- [Eshop] [restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-14T15:13:37.951+02:00 ERROR 30760 --- [Eshop] [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.transaction.UnexpectedRollbackException: Transaction silently rolled back because it has been marked as rollback-only
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:804) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:698) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:416) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.example.eshop.init.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$4(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:784) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.4.jar:3.4.4]
	at org.example.eshop.EshopApplication.main(EshopApplication.java:12) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.4.jar:3.4.4]

2025-04-14T15:13:39.149+02:00  INFO 30760 --- [Eshop] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-04-14T15:13:39.156+02:00  INFO 30760 --- [Eshop] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
