const TrackingService={_gtagInitialized:!1,_gtagId:'AW-17046857865',_sklikId:100245398,_sklikPurchaseId:100245399,_sklikBeginCheckoutId:100245400,_heurekaApiKey:'337b0666ea50d1f4fcd05d5473cfef9e43ec',_hasNonGoogleConsent:function(e){if("undefined"==typeof CookieConsent)return!1;if(!CookieConsent.validConsent())return!1;const n=CookieConsent.getUserPreferences().acceptedCategories;return!!Array.isArray(n)&&e.every(e=>n.includes(e))},_getSklikConsentValue:function(){return this._hasNonGoogleConsent(['marketing'])?1:0},_runNonGoogleIfConsentGiven:function(e,n,o="callback"){this._hasNonGoogleConsent(e)?n():void 0},initBaseScripts:function(){this._gtagInitialized="function"==typeof gtag;const e="function"==typeof window.rc?.conversionHit,n="function"==typeof heureka},trackViewItem:function(e){const n="trackViewItem";if(!e||!e.variantId||null==e.priceNoVat||!e.currency)return;const o=parseFloat(e.priceNoVat)||0,t=o;this._gtagInitialized?(gtag("event","view_item",{currency:e.currency,value:o.toFixed(2),items:[{item_id:e.variantId,item_name:e.name,item_brand:e.brand,item_category:e.category,price:o.toFixed(2),quantity:1}]}),gtag("event","view_item",{send_to:this._gtagId,value:t.toFixed(2),currency:e.currency,items:[{id:e.variantId,google_business_vertical:"retail"}]})):void 0,this._runNonGoogleIfConsentGiven(["marketing"],()=>{if("function"==typeof window.rc?.conversionHit){const n={id:this._sklikId,value:t.toFixed(2),consent:this._getSklikConsentValue()};window.rc.conversionHit(n)}else console.warn("Sklik (rc.conversionHit) function NOT found during trackViewItem. Skipping Sklik conversion.")},n+" Sklik"),this._runNonGoogleIfConsentGiven(["marketing"],()=>{},"function"!=typeof heureka?console.warn("Heureka SDK not initialized during "+n+" check."):void 0,n+" Heureka Check")},trackAddToCart:function(e){const n="trackAddToCart";if(!e||!e.variantId||null==e.price||!e.currency||!e.quantity)return;const o=parseFloat(e.price)||0,t=parseInt(e.quantity)||1,i=o*t;this._gtagInitialized?(gtag("event","add_to_cart",{currency:e.currency,value:i.toFixed(2),items:[{item_id:e.variantId,item_name:e.name,item_brand:e.brand,item_category:e.category,price:o.toFixed(2),quantity:t}]}),gtag("event","add_to_cart",{send_to:this._gtagId,value:i.toFixed(2),currency:e.currency,items:[{id:e.variantId,quantity:t,price:o.toFixed(2),google_business_vertical:"retail"}]})):void 0},trackBeginCheckout:function(e){const n="trackBeginCheckout";if(!e||!Array.isArray(e.items)||null==e.value_no_vat||!e.currency)return;const o="checkout_visited";try{if(sessionStorage.getItem(o))return}catch(e){console.warn("Could not access sessionStorage for checkout tracking flag:",e)}const t=parseFloat(e.value_no_vat)||0;this._gtagInitialized?(gtag("event","begin_checkout",{currency:e.currency,value:t.toFixed(2),items:e.items.map(e=>({item_id:e.variantId,item_name:e.name,item_brand:e.brand,item_category:e.category,price:(parseFloat(e.price)||0).toFixed(2),quantity:parseInt(e.quantity)||1}))}),gtag("event","begin_checkout",{send_to:this._gtagId,value:t.toFixed(2),currency:e.currency,items:e.items.map(e=>({id:e.variantId,quantity:e.quantity,price:(parseFloat(e.price)||0).toFixed(2),google_business_vertical:"retail"}))})):void 0,this._runNonGoogleIfConsentGiven(["marketing"],()=>{if("function"==typeof window.rc?.conversionHit){const n={id:this._sklikBeginCheckoutId,value:t.toFixed(2),consent:this._getSklikConsentValue()};window.rc.conversionHit(n)}else console.warn("Sklik (rc.conversionHit) function NOT found during trackBeginCheckout. Skipping Sklik conversion.")},n+" Sklik");try{sessionStorage.setItem(o,"true")}catch(e){console.error("Error setting sessionStorage item:",e)}},trackPurchase:function(e){const n="trackPurchase";if(!e||!e.transaction_id||!Array.isArray(e.items)||null==e.value||null==e.value_no_vat||!e.currency)return;const o=parseFloat(e.value)||0,t=parseFloat(e.tax)||0,i=parseFloat(e.shipping)||0,r=parseFloat(e.value_no_vat)||0,a=parseFloat(e.shipping_no_vat)||0,s=r+a;if(this._gtagInitialized){const c=e.items.map(e=>({item_id:e.item_id,item_name:e.item_name,item_brand:e.item_brand,item_category:e.item_category,price:(parseFloat(e.price)||0).toFixed(2),quantity:parseInt(e.quantity)||1}));gtag("event","purchase",{transaction_id:e.transaction_id,value:o.toFixed(2),currency:e.currency,tax:t.toFixed(2),shipping:i.toFixed(2),items:c}),gtag("event","conversion",{send_to:this._gtagId+"/I-9yCKq-n8EaEInRycA_",value:s.toFixed(2),currency:e.currency,transaction_id:e.transaction_id,items:c.map(e=>({id:e.item_id,quantity:e.quantity,price:e.price,google_business_vertical:"retail"}))})}else console.warn("Gtag not initialized during "+n+". Skipping GA/Ads part.");this._runNonGoogleIfConsentGiven(["marketing"],()=>{if("function"==typeof window.rc?.conversionHit){const n={id:this._sklikPurchaseId,value:s.toFixed(2),order_id:e.transaction_id,consent:this._getSklikConsentValue()};window.rc.conversionHit(n)}else console.warn("Sklik (rc.conversionHit) function NOT found during trackPurchase. Skipping purchase conversion.");if("function"==typeof heureka){if(Array.isArray(e.heureka_items))try{heureka("authenticate",this._heurekaApiKey),heureka("set_order_id",e.transaction_id),heureka("set_currency",e.currency),e.heureka_items.forEach(e=>{e&&e.itemId&&e.name&&null!=e.priceVat&&e.quantity>0?heureka("add_product",e.itemId,e.name,(parseFloat(e.priceVat)||0).toFixed(2),e.quantity):console.warn("Skipping invalid Heureka item:",e)});const n=parseFloat(e.heureka_total_vat)||0;heureka("set_total_vat",n.toFixed(2)),heureka("send","Order")}catch(e){console.error("Heureka Order conversion failed during trackPurchase:",e)}else console.warn("Heureka items data missing or not an array, skipping purchase conversion.")}else console.warn("Heureka function NOT found during trackPurchase. Skipping purchase conversion.")},n+" Sklik/Heureka")},trackContactClick:function(e){const n="trackContactClick";this._gtagInitialized?(gtag("event","generate_lead",{value:10,currency:"CZK"}),gtag("event","conversion",{send_to:this._gtagId+"/QfVhCLO-n8EaEInRycA_",value:10,currency:"CZK"})):console.warn("Gtag not initialized during "+n+". Skipping GA/Ads part.")}};document.addEventListener("click",function(e){const n=e.target.closest("a.track-contact-click");if(n){const e=n.getAttribute("href");let o="unknown";e?.startsWith("tel:")?o="phone":e?.startsWith("mailto:")&&(o="email"),"undefined"!=typeof TrackingService&&"function"==typeof TrackingService.trackContactClick?TrackingService.trackContactClick(o):console.warn("TrackingService or trackContactClick not ready for contact click event.")}});